(function (cjs, an) {

var p; // shortcut to reference prototypes
var lib={};var ss={};var img={};
lib.ssMetadata = [
		{name:"index_atlas_1", frames: [[4609,0,1042,1357],[3565,0,1042,1869],[7824,2166,300,128],[3090,2539,300,128],[2088,3040,516,176],[2171,3218,516,176],[3392,2539,136,68],[0,2438,1042,985],[4611,1997,904,153],[0,3425,516,176],[5367,2152,148,89],[8031,2004,115,115],[5517,2119,118,66],[1044,2438,1042,889],[4611,2152,754,101],[8134,1127,48,48],[8059,1060,120,65],[8035,1748,116,126],[8035,1876,116,126],[5738,2256,662,46],[2171,3396,662,46],[6780,1128,1042,1191],[7907,0,262,232],[3090,3018,1125,478],[4611,1359,1013,636],[2438,0,1125,2436],[0,0,2436,2436],[6865,3308,1123,305],[8059,936,122,122],[3565,1871,1044,1145],[5323,3323,1125,300],[7907,234,262,232],[3090,2669,374,91],[7824,1959,205,205],[1044,3329,1125,278],[7824,1748,209,209],[7992,2296,172,216],[2171,3498,1125,206],[5517,1997,120,120],[4217,3258,1104,319],[6865,2321,1125,985],[7824,1128,308,308],[7824,1438,308,308],[7907,468,262,232],[3090,2438,452,99],[4425,3579,542,104],[2088,2438,1000,600],[7992,2514,137,86],[7907,936,150,150],[5653,0,1125,1126],[6780,0,1125,1126],[5653,1128,1125,1126],[3298,3579,1125,123],[4611,2256,1125,1000],[7907,702,262,232],[5738,2321,1125,1000]]}
];


(lib.AnMovieClip = function(){
	this.actionFrames = [];
	this.ignorePause = false;
	this.gotoAndPlay = function(positionOrLabel){
		cjs.MovieClip.prototype.gotoAndPlay.call(this,positionOrLabel);
	}
	this.play = function(){
		cjs.MovieClip.prototype.play.call(this);
	}
	this.gotoAndStop = function(positionOrLabel){
		cjs.MovieClip.prototype.gotoAndStop.call(this,positionOrLabel);
	}
	this.stop = function(){
		cjs.MovieClip.prototype.stop.call(this);
	}
}).prototype = p = new cjs.MovieClip();
// symbols:



(lib._1 = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(0);
}).prototype = p = new cjs.Sprite();



(lib._1_1 = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(1);
}).prototype = p = new cjs.Sprite();



(lib._17 = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(2);
}).prototype = p = new cjs.Sprite();



(lib._18 = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(3);
}).prototype = p = new cjs.Sprite();



(lib._2 = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(4);
}).prototype = p = new cjs.Sprite();



(lib._2_1 = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(5);
}).prototype = p = new cjs.Sprite();



(lib._20 = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(6);
}).prototype = p = new cjs.Sprite();



(lib._3 = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(7);
}).prototype = p = new cjs.Sprite();



(lib._3_1 = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(8);
}).prototype = p = new cjs.Sprite();



(lib._4 = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(9);
}).prototype = p = new cjs.Sprite();



(lib._4_1 = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(10);
}).prototype = p = new cjs.Sprite();



(lib._5 = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(11);
}).prototype = p = new cjs.Sprite();



(lib._5_1 = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(12);
}).prototype = p = new cjs.Sprite();



(lib._6 = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(13);
}).prototype = p = new cjs.Sprite();



(lib._7 = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(14);
}).prototype = p = new cjs.Sprite();



(lib._hatena = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(15);
}).prototype = p = new cjs.Sprite();



(lib.a1 = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(16);
}).prototype = p = new cjs.Sprite();



(lib.a2 = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(17);
}).prototype = p = new cjs.Sprite();



(lib.a3 = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(18);
}).prototype = p = new cjs.Sprite();



(lib.a4 = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(19);
}).prototype = p = new cjs.Sprite();



(lib.a5 = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(20);
}).prototype = p = new cjs.Sprite();



(lib.a6 = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(21);
}).prototype = p = new cjs.Sprite();



(lib.achievementButton = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(22);
}).prototype = p = new cjs.Sprite();



(lib.achievementDesciption = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(23);
}).prototype = p = new cjs.Sprite();



(lib.achievementDetailBG = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(24);
}).prototype = p = new cjs.Sprite();



(lib.bg = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(25);
}).prototype = p = new cjs.Sprite();



(lib.bg1 = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(26);
}).prototype = p = new cjs.Sprite();



(lib.cellBG = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(27);
}).prototype = p = new cjs.Sprite();



(lib.close = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(28);
}).prototype = p = new cjs.Sprite();



(lib.dialogBG = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(29);
}).prototype = p = new cjs.Sprite();



(lib.footer = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(30);
}).prototype = p = new cjs.Sprite();



(lib.generatorButton = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(31);
}).prototype = p = new cjs.Sprite();



(lib.goldenSushiBG = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(32);
}).prototype = p = new cjs.Sprite();



(lib.hatena = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(33);
}).prototype = p = new cjs.Sprite();



(lib.header = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(34);
}).prototype = p = new cjs.Sprite();



(lib.iconFrame = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(35);
}).prototype = p = new cjs.Sprite();



(lib.invite = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(36);
}).prototype = p = new cjs.Sprite();



(lib.messageBG = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(37);
}).prototype = p = new cjs.Sprite();



(lib._new = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(38);
}).prototype = p = new cjs.Sprite();



(lib.NotificationBG = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(39);
}).prototype = p = new cjs.Sprite();



(lib.panel = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(40);
}).prototype = p = new cjs.Sprite();



(lib.shop_goldenSushi_icon = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(41);
}).prototype = p = new cjs.Sprite();



(lib.shop_sushi_icon = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(42);
}).prototype = p = new cjs.Sprite();



(lib.shopButton = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(43);
}).prototype = p = new cjs.Sprite();



(lib.subTile2 = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(44);
}).prototype = p = new cjs.Sprite();



(lib.subTitle = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(45);
}).prototype = p = new cjs.Sprite();



(lib.sushi = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(46);
}).prototype = p = new cjs.Sprite();



(lib.sushiIcon = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(47);
}).prototype = p = new cjs.Sprite();



(lib.sushiMini = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(48);
}).prototype = p = new cjs.Sprite();



(lib.SushiScroll1 = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(49);
}).prototype = p = new cjs.Sprite();



(lib.SushiScroll2 = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(50);
}).prototype = p = new cjs.Sprite();



(lib.SushiScroll3 = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(51);
}).prototype = p = new cjs.Sprite();



(lib.title = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(52);
}).prototype = p = new cjs.Sprite();



(lib.underBG = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(53);
}).prototype = p = new cjs.Sprite();



(lib.upgradeButton = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(54);
}).prototype = p = new cjs.Sprite();



(lib.upperBG = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(55);
}).prototype = p = new cjs.Sprite();
// helper functions:

function mc_symbol_clone() {
	var clone = this._cloneProps(new this.constructor(this.mode, this.startPosition, this.loop, this.reversed));
	clone.gotoAndStop(this.currentFrame);
	clone.paused = this.paused;
	clone.framerate = this.framerate;
	return clone;
}

function getMCSymbolPrototype(symbol, nominalBounds, frameBounds) {
	var prototype = cjs.extend(symbol, cjs.MovieClip);
	prototype.clone = mc_symbol_clone;
	prototype.nominalBounds = nominalBounds;
	prototype.frameBounds = frameBounds;
	return prototype;
	}


(lib.UpgradeDesciptionMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	this.isSingleFrame = false;
	// timeline functions:
	this.frame_0 = function() {
		if(this.isSingleFrame) {
			return;
		}
		if(this.totalFrames == 1) {
			this.isSingleFrame = true;
		}
		this.bitmap;
		this.scaleX = this.parent.canvasScaleX;
		this.scaleY = this.parent.canvasScaleX;
		this.y = document.documentElement.clientHeight / 2;
		this.x = document.documentElement.clientWidth / 2;
		this.visible = false;
		
		this.title_O = new Outline(lib, this.title, 5, "#000000", "#FFFFFF");
		this.obj;
		
		this.Close = function()
		{
			this.parent.MaskMC.removeEventListener("click", this._close);
			this.parent.MaskMC.visible = false;
		
			createjs.Tween.get(this, { override: true })
			.to({ scaleX: 0, scaleY: 0 }, 250, createjs.Ease.backInOut)
			.call(() => {
				this.visible = false;
		    });
			main.PlaySE("popup");
		} 
		
		this.Open = function(_obj)
		{
			this.obj = _obj;
			
			this.visible = true;
			this.scaleX = 0;
			this.scaleY = 0;
			
			this._close = this.parent.MaskMC.addEventListener("click", this.Close.bind(this));
			this.parent.MaskMC.visible = true;
			
			createjs.Tween.get(this, { override: true })
			.to({ scaleX: this.parent.canvasScaleX, scaleY: this.parent.canvasScaleX }, 250, createjs.Ease.backInOut);
		
			main.PlaySE("popup");
		
			if( this.bitmap != null)
			{
				this.removeChild(this.bitmap);
				this.bitmap == null;
			}
			
			//アイコン生成
			this.bitmap = new createjs.Bitmap("images/Icon/" + this.obj.dir + "/" + this.obj.id + ".png");
			this.addChild(this.bitmap);
			this.bitmap.x = 54;
			this.bitmap.y = 68;
			this.bitmap.scaleX = 193 / this.bitmap.image.width;
			this.bitmap.scaleY = 193 / this.bitmap.image.height;
			this.bitmap.mouseEnabled = false;
		
			this.title_O.text = this.obj.name;
			this.description.text = this.obj.description;
			
			SetWrapText(this.description);
		}
	}

	// actions tween:
	this.timeline.addTween(cjs.Tween.get(this).call(this.frame_0).wait(1));

	// IconBG
	this.instance = new lib.iconFrame();
	this.instance.setTransform(46,60);

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	// Text_title
	this.title = new cjs.Text("Sushi Syokunin", "60px 'Potta One'");
	this.title.name = "title";
	this.title.lineHeight = 87;
	this.title.lineWidth = 716;
	this.title.parent = this;
	this.title.setTransform(275,67);

	this.timeline.addTween(cjs.Tween.get(this.title).wait(1));

	// Text
	this.description = new cjs.Text("「押すだけで寿司が出てくる。\nたまにネタとシャリが逆さまですが。」", "50px 'Potta One'");
	this.description.name = "description";
	this.description.lineHeight = 72;
	this.description.lineWidth = 901;
	this.description.parent = this;
	this.description.setTransform(81.85,338.35);

	this.timeline.addTween(cjs.Tween.get(this.description).wait(1));

	// BG
	this.instance_1 = new lib.dialogBG();

	this.timeline.addTween(cjs.Tween.get(this.instance_1).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.UpgradeDesciptionMC, new cjs.Rectangle(0,0,1044,1145), null);


(lib.SliderButtonMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {SE:0,BGM:10};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Icon
	this.instance = new lib.a2();
	this.instance.setTransform(-58,-58);

	this.instance_1 = new lib.a3();
	this.instance_1.setTransform(-58,-58);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.instance}]}).to({state:[{t:this.instance_1}]},10).wait(10));

	this._renderFirstFrame();

}).prototype = p = new cjs.MovieClip();
p.nominalBounds = new cjs.Rectangle(-58,-58,116,126);


(lib.ShopType4ButtonMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {NotPurchased:0,Shortage:19,NotSelected:39,Selected:58};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Text
	this.price = new cjs.Text("1,000", "70px 'Potta One'", "#FFFFFF");
	this.price.name = "price";
	this.price.textAlign = "center";
	this.price.lineHeight = 103;
	this.price.lineWidth = 406;
	this.price.parent = this;
	this.price.setTransform(301.05,28);

	this.timeline.addTween(cjs.Tween.get(this.price).wait(19).to({color:"#C5253A"},0).wait(20).to({x:258,y:36,text:"このスキンを使う",font:"60px 'Potta One'",color:"#FFFFFF",lineHeight:88.9,lineWidth:512},0).wait(19).to({x:344.05,y:28,text:"スキン使用中！",font:"70px 'Potta One'",color:"#C5253A",lineHeight:103.35,lineWidth:490},0).wait(21));

	// BG
	this.instance = new lib._2();

	this.instance_1 = new lib._4();

	this.instance_2 = new lib._5();
	this.instance_2.setTransform(-18,16);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.instance}]}).to({state:[{t:this.instance_1}]},39).to({state:[{t:this.instance_2}]},19).wait(21));

	this._renderFirstFrame();

}).prototype = p = new cjs.MovieClip();
p.nominalBounds = new cjs.Rectangle(-18,0,609.2,176);


(lib.ShopType3ButtonMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {Active:0,"Shortage":19,"Selected":39};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Text
	this.price = new cjs.Text("1,000", "70px 'Potta One'", "#FFFFFF");
	this.price.name = "price";
	this.price.textAlign = "center";
	this.price.lineHeight = 103;
	this.price.lineWidth = 406;
	this.price.parent = this;
	this.price.setTransform(301.05,28);

	this.timeline.addTween(cjs.Tween.get(this.price).wait(19).to({color:"#C5253A"},0).wait(20).to({x:298.05,text:"使用中",lineWidth:210},0).wait(21));

	// BG
	this.instance = new lib._2();

	this.instance_1 = new lib._5();
	this.instance_1.setTransform(75,16);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.instance}]}).to({state:[{t:this.instance_1}]},39).wait(21));

	this._renderFirstFrame();

}).prototype = p = new cjs.MovieClip();
p.nominalBounds = new cjs.Rectangle(0,0,516,176);


(lib.ShopType2ButtonMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {"Active":0,"Shortage":19};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Text
	this.price = new cjs.Text("1,000", "70px 'Potta One'", "#FFFFFF");
	this.price.name = "price";
	this.price.textAlign = "center";
	this.price.lineHeight = 103;
	this.price.lineWidth = 406;
	this.price.parent = this;
	this.price.setTransform(301.05,28);

	this.timeline.addTween(cjs.Tween.get(this.price).wait(19).to({color:"#C5253A"},0).wait(20));

	// BG
	this.instance = new lib._2();

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(39));

	this._renderFirstFrame();

}).prototype = p = new cjs.MovieClip();
p.nominalBounds = new cjs.Rectangle(0,0,516,176);


(lib.ShopType1ButtonMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Text
	this.text = new cjs.Text("Stars", "50px 'Potta One'", "#FFFFFF");
	this.text.textAlign = "center";
	this.text.lineHeight = 74;
	this.text.lineWidth = 512;
	this.text.parent = this;
	this.text.setTransform(258,81.45);

	this.price = new cjs.Text("1,000", "70px 'Potta One'", "#FFFFFF");
	this.price.name = "price";
	this.price.textAlign = "center";
	this.price.lineHeight = 103;
	this.price.lineWidth = 512;
	this.price.parent = this;
	this.price.setTransform(258,0);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.price},{t:this.text}]}).wait(1));

	// BG
	this.instance = new lib._4();

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.ShopType1ButtonMC, new cjs.Rectangle(0,-2,516,178), null);


(lib.ShopSubTitleMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Text
	this.title = new cjs.Text("アップグレード", "50px 'Potta One'");
	this.title.name = "title";
	this.title.textAlign = "center";
	this.title.lineHeight = 74;
	this.title.lineWidth = 538;
	this.title.parent = this;
	this.title.setTransform(321,15);

	this.timeline.addTween(cjs.Tween.get(this.title).wait(1));

	// BG
	this.instance = new lib.subTitle();
	this.instance.setTransform(50,0);

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.ShopSubTitleMC, new cjs.Rectangle(50,0,542,104), null);


(lib.ShopActiveMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// レイヤー_1
	this.shape = new cjs.Shape();
	this.shape.graphics.f().s("#00CC33").ss(10,1,1).p("EhU1gktMCprAAAMAAABJbMiprAAAg");
	this.shape.setTransform(563.05,238.65);

	this.timeline.addTween(cjs.Tween.get(this.shape).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.ShopActiveMC, new cjs.Rectangle(15.1,-1.3,1096,480), null);


(lib.NotificationMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Text
	this.message = new cjs.Text("実績が解除されました。\n3建物を所有する", "60px 'Potta One'");
	this.message.name = "message";
	this.message.lineHeight = 89;
	this.message.lineWidth = 796;
	this.message.parent = this;
	this.message.setTransform(294,67);

	this.timeline.addTween(cjs.Tween.get(this.message).wait(1));

	// BG
	this.instance = new lib.NotificationBG();
	this.instance.setTransform(11,0);

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.NotificationMC, new cjs.Rectangle(11,0,1104,319), null);


(lib.MessageMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	this.isSingleFrame = false;
	// timeline functions:
	this.frame_0 = function() {
		if(this.isSingleFrame) {
			return;
		}
		if(this.totalFrames == 1) {
			this.isSingleFrame = true;
		}
		this.bitmap == null;
		this.scaleX = this.parent.canvasScaleX;
		this.scaleY = this.parent.canvasScaleX;
		this.y = document.documentElement.clientHeight / 2;
		this.x = document.documentElement.clientWidth / 2;
		this.visible = false;
		
		//this.message_O = new Outline(lib, this.message, 5, "#000000", "#FFFFFF");
		
		this.Close = function()
		{
			this.parent.Mask2MC.removeEventListener("click", this._close);
			this.parent.Mask2MC.visible = false;
			
			createjs.Tween.get(this, { override: true })
			.to({ scaleX: 0, scaleY: 0 }, 250, createjs.Ease.backInOut)
			.call(() => {
				this.visible = false;
		    });
		
			main.PlaySE("popup");
		} 
		
		this.Open = function(_message)
		{
			//this.message_O.text = _message;
			this.message.text = _message;	
			
			this.visible = true;
			this.scaleX = 0;
			this.scaleY = 0;
			
			this._close = this.parent.Mask2MC.addEventListener("click", this.Close.bind(this));
			this.parent.Mask2MC.visible = true;
			
			createjs.Tween.get(this, { override: true })
			.to({ scaleX: this.parent.canvasScaleX, scaleY: this.parent.canvasScaleX }, 250, createjs.Ease.backInOut);
		}
	}

	// actions tween:
	this.timeline.addTween(cjs.Tween.get(this).call(this.frame_0).wait(1));

	// Text
	this.message = new cjs.Text("寿司ロボットを入手しました", "60px 'Potta One'", "#FFFFFF");
	this.message.name = "message";
	this.message.textAlign = "center";
	this.message.lineHeight = 89;
	this.message.lineWidth = 1121;
	this.message.parent = this;
	this.message.setTransform(562.5,60);

	this.timeline.addTween(cjs.Tween.get(this.message).wait(1));

	// BG
	this.instance = new lib.messageBG();

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.MessageMC, new cjs.Rectangle(0,0,1125,206), null);


(lib.DoddMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// BG
	this.instance = new lib._new();

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.DoddMC, new cjs.Rectangle(0,0,120,120), null);


(lib.BadgeMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Text
	this.notification = new cjs.Text("99", "50px 'Potta One'", "#FFFFFF");
	this.notification.name = "notification";
	this.notification.textAlign = "center";
	this.notification.lineHeight = 74;
	this.notification.parent = this;
	this.notification.setTransform(61,19.8);

	this.timeline.addTween(cjs.Tween.get(this.notification).wait(1));

	// BG
	this.instance = new lib._new();

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.BadgeMC, new cjs.Rectangle(0,0,120,120), null);


(lib.LodingMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// BG
	this.shape = new cjs.Shape();
	this.shape.graphics.f("#000000").s().p("EhX4C+UMAAAl8nMCvxAAAMAAAF8ng");
	this.shape.setTransform(562.5,1218);

	this.timeline.addTween(cjs.Tween.get(this.shape).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.LodingMC, new cjs.Rectangle(0,0,1125,2436), null);


(lib.RewardMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {type1:0,type2:10,type4:21,type3:31};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Text
	this.text = new cjs.Text("×100 Million", "70px 'Potta One'", "#C5253A");
	this.text.lineHeight = 101;
	this.text.parent = this;
	this.text.setTransform(355.4,24.35);

	this.timeline.addTween(cjs.Tween.get(this.text).wait(39));

	// Image
	this.instance = new lib._4_1();
	this.instance.setTransform(150,36);

	this.text_1 = new cjs.Text("×100 Million", "70px 'Potta One'", "#C5253A");
	this.text_1.lineHeight = 101;
	this.text_1.parent = this;
	this.text_1.setTransform(355.4,24.35);

	this.instance_1 = new lib._5_1();
	this.instance_1.setTransform(162,46);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.text_1},{t:this.instance}]}).to({state:[{t:this.text_1},{t:this.instance_1}]},10).wait(29));

	// BG
	this.instance_2 = new lib._3_1();

	this.timeline.addTween(cjs.Tween.get(this.instance_2).wait(39));

	this._renderFirstFrame();

}).prototype = p = new cjs.MovieClip();
p.nominalBounds = new cjs.Rectangle(0,0,904,153);


(lib.InviteListMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {NotAcquired:0,Acquisition:9};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Image
	this.text = new cjs.Text("×10", "60px 'Potta One'", "#C5253A");
	this.text.lineHeight = 87;
	this.text.parent = this;
	this.text.setTransform(738.6,38);

	this.instance = new lib._5_1();
	this.instance.setTransform(598,45);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.instance},{t:this.text,p:{x:738.6,y:38,text:"×10",font:"60px 'Potta One'",color:"#C5253A",textAlign:"",lineHeight:86.9,lineWidth:108}}]}).to({state:[{t:this.text,p:{x:708.2,y:42.1,text:"受け取り済み",font:"50px 'Potta One'",color:"#000000",textAlign:"center",lineHeight:72.4,lineWidth:300}}]},9).wait(11));

	// Text
	this.title = new cjs.Text("1人招待する", "50px 'Potta One'");
	this.title.name = "title";
	this.title.lineHeight = 72;
	this.title.lineWidth = 519;
	this.title.parent = this;
	this.title.setTransform(65.35,42);

	this.timeline.addTween(cjs.Tween.get(this.title).wait(20));

	// BG
	this.instance_1 = new lib._3_1();

	this.timeline.addTween(cjs.Tween.get(this.instance_1).wait(20));

	this._renderFirstFrame();

}).prototype = p = new cjs.MovieClip();
p.nominalBounds = new cjs.Rectangle(0,0,904,153);


(lib.GeneratorDesciptionMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	this.isSingleFrame = false;
	// timeline functions:
	this.frame_0 = function() {
		if(this.isSingleFrame) {
			return;
		}
		if(this.totalFrames == 1) {
			this.isSingleFrame = true;
		}
		this.bitmap = null;
		this.scaleX = this.parent.canvasScaleX;
		this.scaleY = this.parent.canvasScaleX;
		this.y = document.documentElement.clientHeight / 2;
		this.x = document.documentElement.clientWidth / 2;
		this.visible = false;
		
		this.title_O = new Outline(lib, this.title, 5, "#000000", "#FFFFFF");
		this.posessionTitle_O = new Outline(lib, this.posessionTitle, 5, "#C5253A", "#FFFFFF");	
		this.posession_O = new Outline(lib, this.posession, 5, "#C5253A", "#FFFFFF");	
		this.obj;
		this.ratio;
		
		this.Close = function()
		{
			this.parent.MaskMC.removeEventListener("click", this._close);
			this.parent.MaskMC.visible = false;
			
			createjs.Tween.get(this, { override: true })
			.to({ scaleX: 0, scaleY: 0 }, 250, createjs.Ease.backInOut)
			.call(() => {
				this.visible = false;
		    });
		
			main.PlaySE("popup");
		
			if(this.obj.amount > 0)
				createjs.Ticker.removeEventListener('tick', this._Tick);
		} 
		
		this.Open = function(_obj)
		{
			this.obj = _obj;
			
			this.visible = true;
			this.scaleX = 0;
			this.scaleY = 0;
		
			this._close = this.parent.MaskMC.addEventListener("click", this.Close.bind(this));
			this.parent.MaskMC.visible = true;
			
			createjs.Tween.get(this, { override: true })
			.to({ scaleX: this.parent.canvasScaleX, scaleY: this.parent.canvasScaleX }, 250, createjs.Ease.backInOut);
		
			main.PlaySE("popup");
		
			if( this.bitmap != null)
			{
				this.removeChild(this.bitmap);
				this.bitmap == null;
			}
		
			//アイコン生成
			this.bitmap = new createjs.Bitmap("images/Icon/" + this.obj.dir + "/" + this.obj.id + ".png");
			this.addChild(this.bitmap);
			this.bitmap.x = 54;
			this.bitmap.y = 68;
			this.bitmap.scaleX = 193 / this.bitmap.image.width;
			this.bitmap.scaleY = 193 / this.bitmap.image.height;
			this.bitmap.mouseEnabled = false;
		
			this.title_O.text = this.obj.name;
			this.description.text = this.obj.description;
			this.posession_O.text = this.obj.posession;
		
			SetWrapText(this.description);
			
			if(this.obj.posession > 0)
			{
				var total = 0;
				for (var i = 0; i < main.generators.length; i++)
				{
					total += main.generators[i].storedTotalSps;	
				}
				this.ratio = this.obj.storedTotalSps / total * 100;
		
				this._Tick = createjs.Ticker.addEventListener("tick", this.Tick.bind(this));
			}
			else
			{
				this.desciption1.text = "";	
				this.desciption2.text = "";	
				this.desciption3.text = "";	
			}
		}
		
		this._Tick;
		this.Tick = function(event)
		{
			var text1 = "各[x]が毎秒[y]Sushi生産";
			this.desciption1.text = 
				text1.replace("[x]", this.obj.name)
				.replace("[y]", FormatNumber(Accuracy(this.obj.storedTotalSps), 1, 0));
			
			var text2 = "[x][y]が毎秒[z]Sushi生産(合計SpSの[w]%)";
			this.desciption2.text = 
				text2.replace("[x]", this.obj.posession)
				.replace("[y]", this.obj.name)
				.replace("[z]", FormatNumber(Accuracy(this.obj.storedTotalSps * this.obj.posession), 1, 2))
				.replace("[w]", this.ratio.toFixed(1));
			
			var text3 = "これまで[x]Sushi生産";
			this.desciption3.text = text3.replace("[x]", FormatNumber(Math.floor(this.obj.totalSushies), 1, 0));
		
			SetWrapText(this.desciption1);
			SetWrapText(this.desciption2);
			SetWrapText(this.desciption3);
		}
	}

	// actions tween:
	this.timeline.addTween(cjs.Tween.get(this).call(this.frame_0).wait(1));

	// IconBG
	this.instance = new lib.iconFrame();
	this.instance.setTransform(46,60);

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	// Text_Title
	this.title = new cjs.Text("Sushi Syokunin", "60px 'Potta One'");
	this.title.name = "title";
	this.title.lineHeight = 87;
	this.title.lineWidth = 716;
	this.title.parent = this;
	this.title.setTransform(275,67);

	this.timeline.addTween(cjs.Tween.get(this.title).wait(1));

	// Text_amountTitle
	this.posessionTitle = new cjs.Text("施設数：", "60px 'Potta One'", "#C5253A");
	this.posessionTitle.name = "posessionTitle";
	this.posessionTitle.lineHeight = 89;
	this.posessionTitle.parent = this;
	this.posessionTitle.setTransform(273.6,155);

	this.timeline.addTween(cjs.Tween.get(this.posessionTitle).wait(1));

	// Text_amount
	this.posession = new cjs.Text("126", "60px 'Potta One'", "#C5253A");
	this.posession.name = "posession";
	this.posession.lineHeight = 87;
	this.posession.lineWidth = 220;
	this.posession.parent = this;
	this.posession.setTransform(517,155);

	this.timeline.addTween(cjs.Tween.get(this.posession).wait(1));

	// Text
	this.description = new cjs.Text("「押すだけで寿司が出てくる。\nたまにネタとシャリが逆さまですが。」", "50px 'Potta One'");
	this.description.name = "description";
	this.description.lineHeight = 72;
	this.description.lineWidth = 901;
	this.description.parent = this;
	this.description.setTransform(81.85,338.35);

	this.desciption3 = new cjs.Text("各SushiFactoryが毎秒100.000million 生産", "50px 'Potta One'");
	this.desciption3.name = "desciption3";
	this.desciption3.lineHeight = 72;
	this.desciption3.lineWidth = 938;
	this.desciption3.parent = this;
	this.desciption3.setTransform(57,938);

	this.desciption2 = new cjs.Text("各SushiFactoryが毎秒100.000million 生産", "50px 'Potta One'");
	this.desciption2.name = "desciption2";
	this.desciption2.lineHeight = 72;
	this.desciption2.lineWidth = 938;
	this.desciption2.parent = this;
	this.desciption2.setTransform(57,759);

	this.desciption1 = new cjs.Text("各SushiFactoryが毎秒100.000million 生産", "50px 'Potta One'");
	this.desciption1.name = "desciption1";
	this.desciption1.lineHeight = 72;
	this.desciption1.lineWidth = 938;
	this.desciption1.parent = this;
	this.desciption1.setTransform(57,579.2);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.desciption1},{t:this.desciption2},{t:this.desciption3},{t:this.description}]}).wait(1));

	// BG
	this.instance_1 = new lib.dialogBG();

	this.timeline.addTween(cjs.Tween.get(this.instance_1).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.GeneratorDesciptionMC, new cjs.Rectangle(0,0,1044,1145), null);


(lib.SushiImageMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// レイヤー_1
	this.instance = new lib.sushi();

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.SushiImageMC, new cjs.Rectangle(0,0,1000,600), null);


(lib.SushiEffectMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// レイヤー_1
	this.instance = new lib.sushiMini();
	this.instance.setTransform(-76,-76);

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.SushiEffectMC, new cjs.Rectangle(-76,-76,150,150), null);


(lib.ScrollMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	this.isSingleFrame = false;
	// timeline functions:
	this.frame_0 = function() {
		if(this.isSingleFrame) {
			return;
		}
		if(this.totalFrames == 1) {
			this.isSingleFrame = true;
		}
		this.content;
		this.count;
		
		this.Reload = function() 
		{
			this.content.ContentBGMC.scaleY = (0 + 280 * this.count) * 0.01;
			minY = -(50 + 280 * this.count) + 914;
		}
		
		this.SetFullSize = function(size) 
		{
			this.content.ContentBGMC.scaleY = size * 0.01;
			minY = -size + (document.documentElement.clientHeight / this.parent.parent.canvasScaleX)	-300 -278;
		}
		
		this.SetSize = function(size) 
		{
			this.content.ContentBGMC.scaleY = size * 0.01;
			minY = -size + 914;
		}
		
		this.content.ContentBGMC.scaleY = (0 + 280 * this.count) * 0.01;
		
		var content = this.content;
		var startY;
		var startScrollY;
		var isScrolling = false;
		var velocity = 0;
		var friction = 0.95; // 慣性スクロールの減速率
		var minY = -(50 + 280 * this.count) + 914;
		var maxY = 0;
		var lastY;
		var lastMoveTime;
		isScrolled = false;
		
		this.isScrolled =  function() 
		{
			return isScrolled; 
		}
		
		this.Open =  function() 
		{
			content.addEventListener("mousedown", startScroll);
			stage.addEventListener("stagemousemove", doScroll);
			stage.addEventListener("stagemouseup", endScroll);
		}
		this.Close =  function() 
		{
			content.removeEventListener("mousedown", startScroll);
			stage.removeEventListener("stagemousemove", doScroll);
			stage.removeEventListener("stagemouseup", endScroll);
		}
		
		function startScroll(event) {
		    event.preventDefault();
		    isScrolling = true;
		    startY = getY(event);
		    startScrollY = content.y;
		    velocity = 0;
		    lastY = getY(event);
		    lastMoveTime = new Date().getTime();
			
			isScrolled = false;
		}
			
		function doScroll(event) {
		    if (isScrolling) {
		        event.preventDefault();
		        var dy = getY(event) - startY;
		        content.y = startScrollY + dy;
		
		        // スクロールの境界を設定
		        if (content.y < minY) {
		            content.y = minY;
		        }
		        if (content.y > maxY) {
		            content.y = maxY;
		        }
		
		        // 慣性用の速度を計算
		        var now = new Date().getTime();
		        var timeDiff = now - lastMoveTime;
		        if (timeDiff > 0) { // timeDiffがゼロでないことを確認
		            velocity = (getY(event) - lastY) / timeDiff * 1000; // ピクセル/秒に変換
		        }
		        lastY = getY(event);
		        lastMoveTime = now;
			
				isScrolled = true;
		    }
		}
		
		function endScroll(event) {
		    isScrolling = false;
		    // 速度が小さい場合にリセット
		    if (Math.abs(velocity) < 0.5) { // 閾値を適切に設定
		        velocity = 0;
		    }
		    // 慣性スクロールのためのタイマーを開始
		    createjs.Ticker.addEventListener("tick", applyInertia);
		}
		
		function applyInertia(event) {
		    if (!isScrolling) {
		        content.y += velocity * event.delta / 1000; // velocityをタイムデルタに合わせて調整
		        velocity *= friction;
		
		        // スクロールの境界を設定
		        if (content.y < minY) {
		            content.y = minY;
		            velocity = 0;
		        }
		        if (content.y > maxY) {
		            content.y = maxY;
		            velocity = 0;
		        }
		
		        // 慣性がほぼ止まったらタイマーを停止
		        if (Math.abs(velocity) < 1) {
		            createjs.Ticker.removeEventListener("tick", applyInertia);
		        }
		    }
		}
		
		function getY(event) {
			var y;	
		    if (event.touches && event.touches.length > 0) {
		        y = event.touches[0].clientY;
		    }
		    y = event.stageY;	
			var pt = stage.globalToLocal(0, y);
		    return pt.y   /   exportRoot.canvasScaleX;
		}
	}

	// actions tween:
	this.timeline.addTween(cjs.Tween.get(this).call(this.frame_0).wait(1));

	// AS
	this.shape = new cjs.Shape();
	this.shape.graphics.f().s("#FFFFFF").ss(1,1,1).p("Aj5j5IHzAAIAAHzInzAAg");
	this.shape.setTransform(25,25);

	this.shape_1 = new cjs.Shape();
	this.shape_1.graphics.f("#FF0000").s().p("Aj5D6IAAnzIHzAAIAAHzg");
	this.shape_1.setTransform(25,25);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.shape_1},{t:this.shape}]}).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.ScrollMC, new cjs.Rectangle(-1,-1,52,52), null);


(lib.MaskMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// レイヤー_1
	this.shape = new cjs.Shape();
	this.shape.graphics.f("rgba(0,0,0,0.498)").s().p("AnzH0IAAvnIPnAAIAAPng");
	this.shape.setTransform(50,50);

	this.timeline.addTween(cjs.Tween.get(this.shape).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.MaskMC, new cjs.Rectangle(0,0,100,100), null);


(lib.IconMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// レイヤー_1
	this.instance = new lib.iconFrame();

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.IconMC, new cjs.Rectangle(0,0,209,209), null);


(lib.DispNumMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// レイヤー_1
	this.num = new cjs.Text("+12345", "40px 'Potta One'", "#FFFFFF");
	this.num.name = "num";
	this.num.textAlign = "center";
	this.num.lineHeight = 60;
	this.num.parent = this;
	this.num.setTransform(0,-28.95);

	this.timeline.addTween(cjs.Tween.get(this.num).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.DispNumMC, new cjs.Rectangle(-73.6,-30.9,147.3,61.9), null);


(lib.DebugMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// レイヤー_1
	this.status = new cjs.Text("Normal", "60px 'Potta One'", "#FFFFFF");
	this.status.name = "status";
	this.status.textAlign = "center";
	this.status.lineHeight = 89;
	this.status.lineWidth = 496;
	this.status.parent = this;
	this.status.setTransform(250,2);

	this.shape = new cjs.Shape();
	this.shape.graphics.f().s("#FFFFFF").ss(1,1,1).p("EgnDgHzMBOHAAAIAAPnMhOHAAAg");
	this.shape.setTransform(250,50);

	this.shape_1 = new cjs.Shape();
	this.shape_1.graphics.f("#C5253A").s().p("EgnDAH0IAAvnMBOHAAAIAAPng");
	this.shape_1.setTransform(250,50);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.shape_1},{t:this.shape},{t:this.status}]}).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.DebugMC, new cjs.Rectangle(-1,-1,502,102), null);


(lib.ContainerMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	this._renderFirstFrame();

}).prototype = p = new cjs.MovieClip();
p.nominalBounds = new cjs.Rectangle(0,0,0,0);


(lib.CloseButtonMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// レイヤー_1
	this.instance = new lib.close();

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.CloseButtonMC, new cjs.Rectangle(0,0,122,122), null);


(lib.ButtonMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	this.isSingleFrame = false;
	// timeline functions:
	this.frame_0 = function() {
		if(this.isSingleFrame) {
			return;
		}
		if(this.totalFrames == 1) {
			this.isSingleFrame = true;
		}
		//元のは非表示
		this.shape.visible = false;	
		
		//当たり判定用のビットマップを生成
		var hitArea = new createjs.Shape();
		hitArea.graphics.beginFill("#FFF").drawRect(0, 0, 100, 100);
		var bitmap = new createjs.Bitmap();
		bitmap.hitArea = hitArea;
		this.addChild(bitmap);
	}

	// actions tween:
	this.timeline.addTween(cjs.Tween.get(this).call(this.frame_0).wait(1));

	// レイヤー_1
	this.shape = new cjs.Shape();
	this.shape.graphics.f("rgba(0,0,0,0.247)").s().p("AnzH0IAAvnIPnAAIAAPng");
	this.shape.setTransform(50,50);

	this.timeline.addTween(cjs.Tween.get(this.shape).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.ButtonMC, new cjs.Rectangle(0,0,100,100), null);


(lib.BG3MC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// BG
	this.instance = new lib.SushiScroll3();
	this.instance.setTransform(0,1125,1,0.9991);

	this.instance_1 = new lib.SushiScroll3();
	this.instance_1.setTransform(1,-1125,1,0.9991);

	this.instance_2 = new lib.SushiScroll3();
	this.instance_2.setTransform(0,0,1,0.9991);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.instance_2},{t:this.instance_1},{t:this.instance}]}).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.BG3MC, new cjs.Rectangle(0,-1125,1126,3375), null);


(lib.BG2MC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// BG
	this.instance = new lib.SushiScroll2();
	this.instance.setTransform(0,1125,1,0.9991);

	this.instance_1 = new lib.SushiScroll2();
	this.instance_1.setTransform(0,-1125,1,0.9991);

	this.instance_2 = new lib.SushiScroll2();
	this.instance_2.setTransform(0,0,1,0.9991);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.instance_2},{t:this.instance_1},{t:this.instance}]}).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.BG2MC, new cjs.Rectangle(0,-1125,1125,3375), null);


(lib.BG1MC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// BG
	this.instance = new lib.SushiScroll1();
	this.instance.setTransform(0,1125,1,0.9991);

	this.instance_1 = new lib.SushiScroll1();
	this.instance_1.setTransform(0,-1125,1,0.9991);

	this.instance_2 = new lib.SushiScroll1();
	this.instance_2.setTransform(0,0,1,0.9991);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.instance_2},{t:this.instance_1},{t:this.instance}]}).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.BG1MC, new cjs.Rectangle(0,-1125,1125,3375), null);


(lib.UpperBGMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// レイヤー_1
	this.instance = new lib.upperBG();

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.UpperBGMC, new cjs.Rectangle(0,0,1125,1000), null);


(lib.UnderBGMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// レイヤー_1
	this.instance = new lib.underBG();
	this.instance.setTransform(0,-490);

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.UnderBGMC, new cjs.Rectangle(0,-490,1125,1000), null);


(lib.RadiationMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// レイヤー_1
	this.instance = new lib.bg1();

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.RadiationMC, new cjs.Rectangle(0,0,2436,2436), null);


(lib.AchievementSubTitleMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Text
	this.count = new cjs.Text("1% (100/100)", "50px 'Potta One'", "#FFFFFF");
	this.count.name = "count";
	this.count.textAlign = "center";
	this.count.lineHeight = 74;
	this.count.lineWidth = 398;
	this.count.parent = this;
	this.count.setTransform(874.1,15);

	this.title = new cjs.Text("アップグレード", "50px 'Potta One'");
	this.title.name = "title";
	this.title.textAlign = "center";
	this.title.lineHeight = 74;
	this.title.lineWidth = 538;
	this.title.parent = this;
	this.title.setTransform(321,15);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.title},{t:this.count}]}).wait(1));

	// BG
	this.instance = new lib.subTile2();
	this.instance.setTransform(627,0);

	this.instance_1 = new lib.subTitle();
	this.instance_1.setTransform(50,0);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.instance_1},{t:this.instance}]}).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.AchievementSubTitleMC, new cjs.Rectangle(50,0,1029,104), null);


(lib.AchievementActiveMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// レイヤー_1
	this.shape = new cjs.Shape();
	this.shape.graphics.f().s("#00CC33").ss(5,1,1).p("AxGxGMAiNAAAMAAAAiNMgiNAAAg");
	this.shape.setTransform(109.5,109.5);

	this.timeline.addTween(cjs.Tween.get(this.shape).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.AchievementActiveMC, new cjs.Rectangle(-2.5,-2.5,224,224), null);


(lib.UpgradeCellMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {"Active":0,Lock:9};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Icon_Button
	this.IconButtonMC = new lib.ButtonMC();
	this.IconButtonMC.name = "IconButtonMC";
	this.IconButtonMC.setTransform(22.55,38.25,2.66,2.5598,0,0,0,0.2,0.1);

	this.timeline.addTween(cjs.Tween.get(this.IconButtonMC).wait(20));

	// BG_Button
	this.ButtonMC = new lib.ButtonMC();
	this.ButtonMC.name = "ButtonMC";
	this.ButtonMC.setTransform(0,27,11.25,2.7998);

	this.timeline.addTween(cjs.Tween.get(this.ButtonMC).to({_off:true},9).wait(11));

	// Mask
	this.MaskMC = new lib.MaskMC();
	this.MaskMC.name = "MaskMC";
	this.MaskMC.setTransform(28.5,38.25,10.8025,2.56,0,0,0,0.6,0.1);
	this.MaskMC.alpha = 0.5;
	this.MaskMC._off = true;

	this.timeline.addTween(cjs.Tween.get(this.MaskMC).wait(9).to({_off:false},0).wait(11));

	// Dodd
	this.DoddMC = new lib.DoddMC();
	this.DoddMC.name = "DoddMC";
	this.DoddMC.setTransform(1068.05,67.7,0.5,0.5,0,0,0,60,60);

	this.timeline.addTween(cjs.Tween.get(this.DoddMC).wait(20));

	// Icon
	this.IconMC = new lib.IconMC();
	this.IconMC.name = "IconMC";
	this.IconMC.setTransform(162.5,168.5,1,1,0,0,0,104.5,104.5);

	this.timeline.addTween(cjs.Tween.get(this.IconMC).wait(20));

	// Text_title
	this.title = new cjs.Text("Sushi Syokunin", "60px 'Potta One'");
	this.title.name = "title";
	this.title.lineHeight = 89;
	this.title.lineWidth = 779;
	this.title.parent = this;
	this.title.setTransform(284.55,70.35);

	this.timeline.addTween(cjs.Tween.get(this.title).wait(20));

	// Text_cost
	this.cost = new cjs.Text("3.158,759", "60px 'Potta One'", "#C5253A");
	this.cost.name = "cost";
	this.cost.lineHeight = 89;
	this.cost.lineWidth = 636;
	this.cost.parent = this;
	this.cost.setTransform(427.6,158.25);

	this.timeline.addTween(cjs.Tween.get(this.cost).wait(20));

	// Sushi
	this.instance = new lib.sushiIcon();
	this.instance.setTransform(280,164);

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(20));

	// BG
	this.instance_1 = new lib.cellBG();
	this.instance_1.setTransform(0,13);

	this.timeline.addTween(cjs.Tween.get(this.instance_1).wait(20));

	this._renderFirstFrame();

}).prototype = p = new cjs.MovieClip();
p.nominalBounds = new cjs.Rectangle(0,13,1125,305);


(lib.SliderMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	this.isSingleFrame = false;
	// timeline functions:
	this.frame_0 = function() {
		if(this.isSingleFrame) {
			return;
		}
		if(this.totalFrames == 1) {
			this.isSingleFrame = true;
		}
		this.SetIcon = function(str) {
			this.SliderButtonMC.gotoAndStop(str);
		}
		this.SetValue = function(_value) {
			content.x = _value * (maxX - minX) + minX;
			mask.scaleX = content.x	/ maxX * 2;
			value.text = Math.round((content.x - minX) / (maxX - minX) * 100);
		}
		var callback;
		this.SetCallBack = function(_callback) {
			callback = _callback;
		}
		
		var content = this.SliderButtonMC;
		var value = this.value;
		var startX;
		var startScrollX;
		var isScrolling = false;
		var minX = 0 + 50;
		var maxX = 662 - 50;
		isScrolled = false;
		
		content.addEventListener("mousedown", startScroll);
		stage.addEventListener("stagemousemove", doScroll);
		stage.addEventListener("stagemouseup", endScroll);
		
		function startScroll(event) {
		    event.preventDefault();
		    isScrolling = true;
		    startX = getX(event);
		    startScrollX = content.x;
		    velocity = 0;
			isScrolled = false;
		}
			
		function doScroll(event) {
		    if (isScrolling) {
		        event.preventDefault();
		        var dx = getX(event) - startX;
		        content.x = startScrollX + dx;
		
		        if (content.x < minX) {
		            content.x = minX;
		        }
		        if (content.x > maxX) {
		            content.x = maxX;
		        }
				isScrolled = true;
			
				mask.scaleX = (content.x - minX) / (maxX - minX) * 2;
				value.text = Math.round((content.x - minX) / (maxX - minX) * 100);
		    }
		}
		
		function endScroll(event) {
		    isScrolling = false;
			if(callback)
				callback((content.x - minX) / (maxX - minX));
		}
		
		function getX(event) {
			var x;	
		    if (event.touches && event.touches.length > 0) {
		        x = event.touches[0].clientX;
		    }
		    x = event.stageX;	
			var pt = stage.globalToLocal(x, 0);
		    return pt.x   /   exportRoot.canvasScaleX;
		}
	}

	// actions tween:
	this.timeline.addTween(cjs.Tween.get(this).call(this.frame_0).wait(1));

	// Text
	this.value = new cjs.Text("100", "50px 'Potta One'", "#FFFFFF");
	this.value.name = "value";
	this.value.textAlign = "center";
	this.value.lineHeight = 72;
	this.value.lineWidth = 154;
	this.value.parent = this;
	this.value.setTransform(755.15,-36.7);

	this.timeline.addTween(cjs.Tween.get(this.value).wait(1));

	// Button
	this.SliderButtonMC = new lib.SliderButtonMC();
	this.SliderButtonMC.name = "SliderButtonMC";
	this.SliderButtonMC.setTransform(200,0);

	this.timeline.addTween(cjs.Tween.get(this.SliderButtonMC).wait(1));

	// Mask (mask)
	var mask = new cjs.Shape();
	mask._off = true;
	mask.graphics.p("EgztAH0IAAvnMBnbAAAIAAPng");

	// Gain
	this.instance = new lib.a4();
	this.instance.setTransform(0,-23);

	var maskedShapeInstanceList = [this.instance];

	for(var shapedInstanceItr = 0; shapedInstanceItr < maskedShapeInstanceList.length; shapedInstanceItr++) {
		maskedShapeInstanceList[shapedInstanceItr].mask = mask;
	}

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	// BG
	this.instance_1 = new lib.a1();
	this.instance_1.setTransform(695,-32);

	this.instance_2 = new lib.a5();
	this.instance_2.setTransform(0,-23);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.instance_2},{t:this.instance_1}]}).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.SliderMC, new cjs.Rectangle(0,-58,834.2,126), null);


(lib.ShopConfilmCell2MC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Icon_Button
	this.IconButtonMC = new lib.ButtonMC();
	this.IconButtonMC.name = "IconButtonMC";
	this.IconButtonMC.setTransform(0.6,0.6,3.0799,3.0799,0,0,0,0.2,0.2);

	this.timeline.addTween(cjs.Tween.get(this.IconButtonMC).wait(1));

	// Text
	this.amount = new cjs.Text("×100", "60px 'Potta One'", "#C5253A");
	this.amount.name = "amount";
	this.amount.textAlign = "center";
	this.amount.lineHeight = 89;
	this.amount.lineWidth = 304;
	this.amount.parent = this;
	this.amount.setTransform(154,219);

	this.timeline.addTween(cjs.Tween.get(this.amount).wait(1));

	// Icon
	this.instance = new lib.shop_sushi_icon();

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.ShopConfilmCell2MC, new cjs.Rectangle(0,0,308,308), null);


(lib.ShopConfilmCell1MC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Icon_Button
	this.IconButtonMC = new lib.ButtonMC();
	this.IconButtonMC.name = "IconButtonMC";
	this.IconButtonMC.setTransform(0.6,0.6,3.08,3.0799,0,0,0,0.2,0.2);

	this.timeline.addTween(cjs.Tween.get(this.IconButtonMC).wait(1));

	// text
	this.amount = new cjs.Text("×100", "60px 'Potta One'", "#C5253A");
	this.amount.name = "amount";
	this.amount.textAlign = "center";
	this.amount.lineHeight = 89;
	this.amount.lineWidth = 304;
	this.amount.parent = this;
	this.amount.setTransform(154,219);

	this.timeline.addTween(cjs.Tween.get(this.amount).wait(1));

	// Icon
	this.instance = new lib.shop_goldenSushi_icon();

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.ShopConfilmCell1MC, new cjs.Rectangle(0,0,308,308), null);


(lib.ShopCell3MC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {"Active":0,Purchased:9,Used:19};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// BG_Button
	this.ButtonMC = new lib.ButtonMC();
	this.ButtonMC.name = "ButtonMC";
	this.ButtonMC.setTransform(0,0,11.25,4.7799);

	this.timeline.addTween(cjs.Tween.get(this.ButtonMC).wait(30));

	// Active
	this.ShopActiveMC = new lib.ShopActiveMC();
	this.ShopActiveMC.name = "ShopActiveMC";
	this.ShopActiveMC.setTransform(550,205.5,1,1,0,0,0,550,205.5);
	this.ShopActiveMC._off = true;

	this.timeline.addTween(cjs.Tween.get(this.ShopActiveMC).wait(9).to({_off:false},0).wait(21));

	// Purchased
	this.instance = new lib._5();
	this.instance.setTransform(948,38);
	this.instance._off = true;

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(9).to({_off:false},0).to({_off:true},10).wait(11));

	// Icon
	this.IconMC = new lib.IconMC();
	this.IconMC.name = "IconMC";
	this.IconMC.setTransform(162.5,142.65,1,1,0,0,0,104.5,104.5);

	this.timeline.addTween(cjs.Tween.get(this.IconMC).wait(30));

	// Text_desciption
	this.desciption = new cjs.Text("オフライン時も寿司をたくさん提供できるようになります。", "50px 'Potta One'");
	this.desciption.name = "desciption";
	this.desciption.lineHeight = 74;
	this.desciption.lineWidth = 996;
	this.desciption.parent = this;
	this.desciption.setTransform(65,272);

	this.timeline.addTween(cjs.Tween.get(this.desciption).wait(30));

	// Text_title
	this.title = new cjs.Text("Sushi Syokunin", "60px 'Potta One'");
	this.title.name = "title";
	this.title.lineHeight = 89;
	this.title.lineWidth = 636;
	this.title.parent = this;
	this.title.setTransform(284.55,40.15);

	this.timeline.addTween(cjs.Tween.get(this.title).wait(30));

	// Text_price
	this.price = new cjs.Text("3.158,759", "60px 'Potta One'", "#C5253A");
	this.price.name = "price";
	this.price.lineHeight = 89;
	this.price.lineWidth = 496;
	this.price.parent = this;
	this.price.setTransform(424.55,156.25);

	this.timeline.addTween(cjs.Tween.get(this.price).wait(30));

	// Sushi
	this.instance_1 = new lib._20();
	this.instance_1.setTransform(283,166);

	this.timeline.addTween(cjs.Tween.get(this.instance_1).wait(30));

	// BG
	this.instance_2 = new lib.achievementDesciption();

	this.timeline.addTween(cjs.Tween.get(this.instance_2).wait(30));

	this._renderFirstFrame();

}).prototype = p = new cjs.MovieClip();
p.nominalBounds = new cjs.Rectangle(0,-1.3,1125,480);


(lib.ShopCell2MC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Icon_Button
	this.IconButtonMC = new lib.ButtonMC();
	this.IconButtonMC.name = "IconButtonMC";
	this.IconButtonMC.setTransform(0.6,0.6,3.0799,3.0799,0,0,0,0.2,0.2);

	this.timeline.addTween(cjs.Tween.get(this.IconButtonMC).wait(1));

	// Text
	this.amount = new cjs.Text("×100", "60px 'Potta One'", "#C5253A");
	this.amount.name = "amount";
	this.amount.textAlign = "center";
	this.amount.lineHeight = 89;
	this.amount.lineWidth = 304;
	this.amount.parent = this;
	this.amount.setTransform(154,219);

	this.price = new cjs.Text("1,000", "60px 'Potta One'", "#FFFFFF");
	this.price.name = "price";
	this.price.textAlign = "right";
	this.price.lineHeight = 89;
	this.price.lineWidth = 196;
	this.price.parent = this;
	this.price.setTransform(278,337);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.price},{t:this.amount}]}).wait(1));

	// Icon
	this.instance = new lib.shop_sushi_icon();

	this.instance_1 = new lib._17();
	this.instance_1.setTransform(5,320);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.instance_1},{t:this.instance}]}).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.ShopCell2MC, new cjs.Rectangle(0,0,308,448), null);


(lib.ShopCell1MC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Icon_Button
	this.IconButtonMC = new lib.ButtonMC();
	this.IconButtonMC.name = "IconButtonMC";
	this.IconButtonMC.setTransform(0.6,0.6,3.08,3.0799,0,0,0,0.2,0.2);

	this.timeline.addTween(cjs.Tween.get(this.IconButtonMC).wait(1));

	// text
	this.amount = new cjs.Text("×100", "60px 'Potta One'", "#C5253A");
	this.amount.name = "amount";
	this.amount.textAlign = "center";
	this.amount.lineHeight = 89;
	this.amount.lineWidth = 304;
	this.amount.parent = this;
	this.amount.setTransform(154,219);

	this.price = new cjs.Text("1,000", "60px 'Potta One'", "#FFFFFF");
	this.price.name = "price";
	this.price.textAlign = "center";
	this.price.lineHeight = 89;
	this.price.lineWidth = 296;
	this.price.parent = this;
	this.price.setTransform(155,318.55);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.price},{t:this.amount}]}).wait(1));

	// Icon
	this.instance = new lib.shop_goldenSushi_icon();

	this.instance_1 = new lib._18();
	this.instance_1.setTransform(5,320);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.instance_1},{t:this.instance}]}).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.ShopCell1MC, new cjs.Rectangle(0,0,308,448), null);


(lib.SushiMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	this.isSingleFrame = false;
	// timeline functions:
	this.frame_0 = function() {
		if(this.isSingleFrame) {
			return;
		}
		if(this.totalFrames == 1) {
			this.isSingleFrame = true;
		}
		//Layout
		this.bitmap;
		this.scaleX = this.parent.canvasScaleX;
		this.scaleY = this.parent.canvasScaleX;
		this.y = document.documentElement.clientHeight / 2;
		this.x = document.documentElement.clientWidth / 2;
		
		this.isActive = false;
		
		this.Click = function(evt)
		{
			var amount = main.touchSps;
			main.AddSushi(amount);
			main.totalClick++;
			
			var clip = new lib.DispNumMC();
			this.parent.addChild(clip);
			
			clip.num_O = new Outline(lib, clip.num, 3, "#FFFFFF", "#000000");	
			clip.num_O.text = "+" + FormatShortNumber(amount, 0, 0);	
			
			var pt = stage.globalToLocal(evt.stageX, evt.stageY);
			clip.x = pt.x + GetRandomInt(-200, 200) * this.parent.canvasScaleX;
			clip.y = pt.y + GetRandomInt(-150, 250) * this.parent.canvasScaleX;
			
			createjs.Tween.get(clip, { override: true })
				.to({ y: clip.y -50 }, 500, createjs.Ease.expoOut)
				.call(() => {
				this.parent.removeChild(clip);
				clip.num_O = null;
				clip = null;
		    });
		
			this.AddClickParticle(pt.x, pt.y);
		}
		
		this.AddClickParticle = function(x, y)
		{
			var particle = null;
			for (var i = 0; i < main.clickParticles.length; i++)
			{
				if(!main.clickParticles[i].visible)
				{
					particle = main.clickParticles[i];
					break;
				}
			}
		
			if(particle == null)
				return;
		
			particle.visible = true;
			particle.x = x;	
			particle.y = y;
			particle.rotation = Math.random() * 360;	
			particle.alpha = 1;
			particle.scaleX = this.parent.canvasScaleX;
			particle.scaleY = this.parent.canvasScaleX;
			
			var targetX = x + (Math.random() * 400 - 200);
			var targetY = y + (Math.random() * 100 + 200);
			var midY = y - (Math.random() * 100 + 50);
		
			createjs.Tween.get(particle)
				.to({ rotation: particle.rotation + (0.5 - Math.random()) * 300 }, 2000, createjs.Ease.linear);
		
			createjs.Tween.get(particle)
				.to({ x: targetX }, 2000, createjs.Ease.linear);
		
			createjs.Tween.get(particle)
				.wait(1500)
				.to({ alpha: 0 }, 500, createjs.Ease.linear);	
			
			createjs.Tween.get(particle)
				.to({ y: midY }, 800, createjs.Ease.quadOut)
				.to({ y: targetY}, 1200, createjs.Ease.quadIn)
				.call(() => {
					particle.visible = false;
			});
		}
		this.SushiImageMC.mouseEnabled = false;
		
		this.ButtonMC.on("mousedown", function(event) {
			if (this.parent.isActive) return; 
				this.parent.isActive = true;
			
			createjs.Tween.get(this.parent.SushiImageMC, { override: true })
				.to({ scaleX: 0.9, scaleY: 0.9 }, 250, createjs.Ease.elasticOut);
		});
		
		this.ButtonMC.on("click", function(evt) {
		
			if (this.parent.isActive)
			{
				this.parent.Click(evt);
				this.parent.isActive = false;
				main.PlaySE("click");
			}
			createjs.Tween.get(this.parent.SushiImageMC, { override: true })
				.to({ scaleX: 1.0, scaleY: 1.0 }, 250, createjs.Ease.elasticOut);
		
		});
		
		this.ButtonMC.on("mouseover", function(event) {
			createjs.Tween.get(this.parent.SushiImageMC, { override: true })
				.to({ scaleX: 1.1, scaleY: 1.1 }, 250, createjs.Ease.elasticOut);
		});
		
		this.ButtonMC.on("mouseout", function(event) {
			createjs.Tween.get(this.parent.SushiImageMC, { override: true })
				.to({ scaleX: 1.0, scaleY: 1.0 }, 250, createjs.Ease.elasticOut);
		});
	}

	// actions tween:
	this.timeline.addTween(cjs.Tween.get(this).call(this.frame_0).wait(1));

	// Image
	this.SushiImageMC = new lib.SushiImageMC();
	this.SushiImageMC.name = "SushiImageMC";
	this.SushiImageMC.setTransform(500,300,1,1,0,0,0,500,300);

	this.timeline.addTween(cjs.Tween.get(this.SushiImageMC).wait(1));

	// Button
	this.ButtonMC = new lib.ButtonMC();
	this.ButtonMC.name = "ButtonMC";
	this.ButtonMC.setTransform(498,298.8,10,6,0,0,0,49.8,49.8);

	this.timeline.addTween(cjs.Tween.get(this.ButtonMC).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.SushiMC, new cjs.Rectangle(0,0,1000,600), null);


(lib.InviteRewardDesciptionMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	this.isSingleFrame = false;
	// timeline functions:
	this.frame_0 = function() {
		if(this.isSingleFrame) {
			return;
		}
		if(this.totalFrames == 1) {
			this.isSingleFrame = true;
		}
		this.bitmap;
		this.scaleX = this.parent.canvasScaleX;
		this.scaleY = this.parent.canvasScaleX;
		this.y = document.documentElement.clientHeight / 2;
		this.x = document.documentElement.clientWidth / 2;
		this.visible = false;
		
		this.obj;
		
		this.stop();
		
		this.Close = function()
		{
			this.parent.MaskMC.removeEventListener("click", this._mask);
			this.parent.MaskMC.visible = false;
			
			createjs.Tween.get(this, { override: true })
			.to({ scaleX: 0, scaleY: 0 }, 250, createjs.Ease.backInOut)
			.call(() => {
				this.visible = false;
		    });	
			main.PlaySE("popup");
		} 
		this.CloseButtonMC.addEventListener("click", this.Close.bind(this));
		
		this.Open = function(_obj)
		{
			this.obj = _obj;
			
			this.visible = true;
			this.scaleX = 0;
			this.scaleY = 0;
			
			this._mask = this.parent.MaskMC.addEventListener("click", this.Mask.bind(this));
			this.parent.MaskMC.visible = true;	
			
			createjs.Tween.get(this, { override: true })
			.to({ scaleX: this.parent.canvasScaleX, scaleY: this.parent.canvasScaleX }, 250, createjs.Ease.backInOut);
		
			main.PlaySE("popup");
		
			if( this.bitmap != null)
			{
				this.removeChild(this.bitmap);
				this.bitmap == null;
			}
		
		//	this.title_O.text = this.obj.data["name"];
		//	this.desciption.text = this.obj.data["desciption"];
			this.gotoAndStop("type" + this.obj.data.type);
		
			switch (this.obj.data.type)
			{
				case 1:
					this.RewardMC.gotoAndStop("type1");
					break;
			}
		}
		
		this.Mask = function(){}
	}

	// actions tween:
	this.timeline.addTween(cjs.Tween.get(this).call(this.frame_0).wait(1));

	// Text
	this.title = new cjs.Text("回収する", "50px 'Potta One'");
	this.title.name = "title";
	this.title.textAlign = "center";
	this.title.lineHeight = 72;
	this.title.lineWidth = 1038;
	this.title.parent = this;
	this.title.setTransform(521,681.95);

	this.title_1 = new cjs.Text("招待報酬を獲得しました！", "50px 'Potta One'");
	this.title_1.name = "title_1";
	this.title_1.textAlign = "center";
	this.title_1.lineHeight = 72;
	this.title_1.lineWidth = 1038;
	this.title_1.parent = this;
	this.title_1.setTransform(521,130);

	this.RewardMC = new lib.RewardMC();
	this.RewardMC.name = "RewardMC";
	this.RewardMC.setTransform(515,444.5,1,1,0,0,0,452,76.5);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.RewardMC},{t:this.title_1},{t:this.title}]}).wait(1));

	// Button
	this.instance = new lib._2_1();
	this.instance.setTransform(263,637);

	this.CloseButtonMC = new lib.CloseButtonMC();
	this.CloseButtonMC.name = "CloseButtonMC";
	this.CloseButtonMC.setTransform(1028,16,1,1,0,0,0,61,61);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.CloseButtonMC},{t:this.instance}]}).wait(1));

	// BG
	this.instance_1 = new lib._6();

	this.timeline.addTween(cjs.Tween.get(this.instance_1).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.InviteRewardDesciptionMC, new cjs.Rectangle(0,-45,1089,934), null);


(lib.InviteDesciptionMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	this.isSingleFrame = false;
	// timeline functions:
	this.frame_0 = function() {
		if(this.isSingleFrame) {
			return;
		}
		if(this.totalFrames == 1) {
			this.isSingleFrame = true;
		}
		this.bitmap;
		this.scaleX = this.parent.canvasScaleX;
		this.scaleY = this.parent.canvasScaleX;
		this.y = document.documentElement.clientHeight / 2;
		this.x = document.documentElement.clientWidth / 2;
		this.visible = false;
		
		this.InviteList1MC.title.text = "1人招待する";
		this.InviteList2MC.title.text = "5人招待する";
		this.InviteList3MC.title.text = "10人招待する";
		this.InviteList4MC.title.text = "50人招待する";
		
		this.Close = function()
		{
			this.parent.MaskMC.removeEventListener("click", this._mask);
			this.parent.MaskMC.visible = false;
			
			createjs.Tween.get(this, { override: true })
			.to({ scaleX: 0, scaleY: 0 }, 250, createjs.Ease.backInOut)
			.call(() => {
				this.visible = false;
		    });
			main.PlaySE("popup");
		} 
		this.CloseButtonMC.addEventListener("click", this.Close.bind(this));
		
		this.Open = function()
		{
			this.visible = true;
			this.scaleX = 0;
			this.scaleY = 0;
			
			this._mask = this.parent.MaskMC.addEventListener("click", this.Mask.bind(this));
			this.parent.MaskMC.visible = true;	
			
			createjs.Tween.get(this, { override: true })
			.to({ scaleX: this.parent.canvasScaleX, scaleY: this.parent.canvasScaleX }, 250, createjs.Ease.backInOut);
		
			main.PlaySE("popup");
		
			this.invitationCount.text = main.invitationCount;
		
			if(main.invitationState < 1)
				this.InviteList1MC.gotoAndStop("NotAcquisition");
			else
				this.InviteList1MC.gotoAndStop("Acquisition");
		
			if(main.invitationState < 2)
				this.InviteList2MC.gotoAndStop("NotAcquisition");
			else
				this.InviteList2MC.gotoAndStop("Acquisition");
			
			if(main.invitationState < 3)
				this.InviteList3MC.gotoAndStop("NotAcquisition");
			else
				this.InviteList3MC.gotoAndStop("Acquisition");
			
			if(main.invitationState < 4)
				this.InviteList4MC.gotoAndStop("NotAcquisition");
			else
				this.InviteList4MC.gotoAndStop("Acquisition");
		}
		
		this.Mask = function(){} 
		
		/*
		this.State1 = function()
		{
			if(main.invitationState ==  0 && main.invitationCount >= 1)
			{
				this.parent.MessageMC.Open("GoludenSushiを10入手しました");
				main.invitationState = 1;
				main.goldenSushi += 10;
				this.invitationState1.text = "完了";
			}
		}
		this.invitationState1Button.addEventListener("click", this.State1.bind(this));
		
		this.State2 = function()
		{
			if(main.invitationState ==  1 && main.invitationCount >= 5)
			{
				this.parent.MessageMC.Open("GoludenSushiを10入手しました");
				main.invitationState = 2;
				main.goldenSushi += 10;
				this.invitationState2.text = "完了";
			}
		}
		this.invitationState2Button.addEventListener("click", this.State2.bind(this));
		
		this.State3 = function()
		{
			if(main.invitationState ==  2 && main.invitationCount >= 10)
			{
				this.parent.MessageMC.Open("GoludenSushiを10入手しました");
				main.invitationState = 3;
				main.goldenSushi += 10;
				this.invitationState3.text = "完了";
			}
		}
		this.invitationState3Button.addEventListener("click", this.State3.bind(this));
		
		this.State4 = function()
		{
			if(main.invitationState ==  3 && main.invitationCount >= 50)
			{
				this.parent.MessageMC.Open("GoludenSushiを10入手しました");
				main.invitationState = 4;
				main.goldenSushi += 10;
				this.invitationState4.text = "完了";
			}
		}
		this.invitationState4Button.addEventListener("click", this.State4.bind(this));
		*/
		this.Share = function()
		{
			if(Telegram.WebApp.initDataUnsafe.user !== undefined)
			{
				var url = "https://t.me/share/url?url=https://t.me/taro2077_bot?start=" + Telegram.WebApp.initDataUnsafe.user.id + "&text=寿司を作ろう";
				window.location.href = url;
			}
			else
				this.parent.MessageMC.Open("Sorry, only in the Telegram.");	
		
		} 
		this.ShareButtonMC.addEventListener("click", this.Share.bind(this));
		
		this.CopyCode = function()
		{
			if(Telegram.WebApp.initDataUnsafe.user !== undefined)
			{
				var url = "https://t.me/share/url?url=https://t.me/taro2077_bot?start=" + Telegram.WebApp.initDataUnsafe.user.id + "&text=寿司を作ろう";
				navigator.clipboard.writeText(url);
				Telegram.WebApp.showAlert("招待URLをクリップボードにコピーしました。");	
			}
			else
				this.parent.MessageMC.Open("Sorry, only in the Telegram.");	
		} 
		this.CopyCodeButtonMC.addEventListener("click", this.CopyCode.bind(this));
	}

	// actions tween:
	this.timeline.addTween(cjs.Tween.get(this).call(this.frame_0).wait(1));

	// AS
	this.text = new cjs.Text("ゲームに招待する", "50px 'Potta One'", "#FFFFFF");
	this.text.textAlign = "center";
	this.text.lineHeight = 72;
	this.text.parent = this;
	this.text.setTransform(512.95,1558.8);

	this.timeline.addTween(cjs.Tween.get(this.text).wait(1));

	// Button
	this.ShareButtonMC = new lib.ButtonMC();
	this.ShareButtonMC.name = "ShareButtonMC";
	this.ShareButtonMC.setTransform(503.5,1600,4.9999,1.7,0,0,0,49.5,50.1);

	this.CopyCodeButtonMC = new lib.ButtonMC();
	this.CopyCodeButtonMC.name = "CopyCodeButtonMC";
	this.CopyCodeButtonMC.setTransform(629.5,1765.2,4.9999,1,0,0,0,49.5,50);

	this.CloseButtonMC = new lib.CloseButtonMC();
	this.CloseButtonMC.name = "CloseButtonMC";
	this.CloseButtonMC.setTransform(1028,16,1,1,0,0,0,61,61);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.CloseButtonMC},{t:this.CopyCodeButtonMC},{t:this.ShareButtonMC}]}).wait(1));

	// Text
	this.InviteList4MC = new lib.InviteListMC();
	this.InviteList4MC.name = "InviteList4MC";
	this.InviteList4MC.setTransform(521,1080.3,1,1,0,0,0,452,76.5);

	this.InviteList3MC = new lib.InviteListMC();
	this.InviteList3MC.name = "InviteList3MC";
	this.InviteList3MC.setTransform(521,909.2,1,1,0,0,0,452,76.5);

	this.InviteList2MC = new lib.InviteListMC();
	this.InviteList2MC.name = "InviteList2MC";
	this.InviteList2MC.setTransform(521,738.2,1,1,0,0,0,452,76.5);

	this.InviteList1MC = new lib.InviteListMC();
	this.InviteList1MC.name = "InviteList1MC";
	this.InviteList1MC.setTransform(521,569.5,1,1,0,0,0,452,76.5);

	this.text_1 = new cjs.Text("招待コードをコピー", "50px 'Potta One'", "#C5253A");
	this.text_1.textAlign = "center";
	this.text_1.lineHeight = 72;
	this.text_1.parent = this;
	this.text_1.setTransform(624.2,1727);

	this.text_2 = new cjs.Text("または", "50px 'Potta One'");
	this.text_2.textAlign = "center";
	this.text_2.lineHeight = 72;
	this.text_2.parent = this;
	this.text_2.setTransform(317.1,1727);

	this.instance = new lib._4_1();
	this.instance.setTransform(234,1357);

	this.desciption = new cjs.Text("友達の報酬", "50px 'Potta One'", "#FFFFFF");
	this.desciption.name = "desciption";
	this.desciption.textAlign = "center";
	this.desciption.lineHeight = 72;
	this.desciption.lineWidth = 1038;
	this.desciption.parent = this;
	this.desciption.setTransform(521,1202.1);

	this.desciption_1 = new cjs.Text("あなたの報酬", "50px 'Potta One'", "#FFFFFF");
	this.desciption_1.name = "desciption_1";
	this.desciption_1.textAlign = "center";
	this.desciption_1.lineHeight = 72;
	this.desciption_1.lineWidth = 1038;
	this.desciption_1.parent = this;
	this.desciption_1.setTransform(521,376.65);

	this.desciption_2 = new cjs.Text("招待した人数", "50px 'Potta One'");
	this.desciption_2.name = "desciption_2";
	this.desciption_2.textAlign = "center";
	this.desciption_2.lineHeight = 72;
	this.desciption_2.parent = this;
	this.desciption_2.setTransform(406.1,242);

	this.desciption_3 = new cjs.Text("Invite your friends!", "70px 'Potta One'", "#FFFFFF");
	this.desciption_3.name = "desciption_3";
	this.desciption_3.textAlign = "center";
	this.desciption_3.lineHeight = 101;
	this.desciption_3.lineWidth = 1038;
	this.desciption_3.parent = this;
	this.desciption_3.setTransform(521,61);

	this.text_3 = new cjs.Text("×100 Million", "70px 'Potta One'", "#C5253A");
	this.text_3.lineHeight = 101;
	this.text_3.parent = this;
	this.text_3.setTransform(440.05,1345.9);

	this.invitationCount = new cjs.Text("000", "50px 'Potta One'", "#C5253A");
	this.invitationCount.name = "invitationCount";
	this.invitationCount.textAlign = "right";
	this.invitationCount.lineHeight = 72;
	this.invitationCount.parent = this;
	this.invitationCount.setTransform(815.2,242);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.invitationCount},{t:this.text_3},{t:this.desciption_3},{t:this.desciption_2},{t:this.desciption_1},{t:this.desciption},{t:this.instance},{t:this.text_2},{t:this.text_1},{t:this.InviteList1MC},{t:this.InviteList2MC},{t:this.InviteList3MC},{t:this.InviteList4MC}]}).wait(1));

	// Image
	this.instance_1 = new lib._3_1();
	this.instance_1.setTransform(69,1321);

	this.instance_2 = new lib._7();
	this.instance_2.setTransform(144,1188);

	this.instance_3 = new lib._7();
	this.instance_3.setTransform(144,367);

	this.instance_4 = new lib._2_1();
	this.instance_4.setTransform(250,1515);

	this.instance_5 = new lib.title();
	this.instance_5.setTransform(-36,50);

	this.shape = new cjs.Shape();
	this.shape.graphics.f().s("#C5253A").ss(10,0,1).p("EgjeAAAMBG9AAA");
	this.shape.setTransform(624.2,1801.4);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.shape},{t:this.instance_5},{t:this.instance_4},{t:this.instance_3},{t:this.instance_2},{t:this.instance_1}]}).wait(1));

	// BG
	this.instance_6 = new lib._1_1();

	this.timeline.addTween(cjs.Tween.get(this.instance_6).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.InviteDesciptionMC, new cjs.Rectangle(-36,-45,1125,1914), null);


(lib.InviteButtonMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Button
	this.ButtonMC = new lib.ButtonMC();
	this.ButtonMC.name = "ButtonMC";
	this.ButtonMC.setTransform(0,0,1.72,2.16);

	this.timeline.addTween(cjs.Tween.get(this.ButtonMC).wait(1));

	// レイヤー_1
	this.instance = new lib.invite();

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.InviteButtonMC, new cjs.Rectangle(0,0,172,216), null);


(lib.HeaderMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	this.isSingleFrame = false;
	// timeline functions:
	this.frame_0 = function() {
		if(this.isSingleFrame) {
			return;
		}
		if(this.totalFrames == 1) {
			this.isSingleFrame = true;
		}
		this.Sushi_O = new Outline(lib, this.Sushi, 5, "#FFFFFF", "#000000");
		this.Sps_O = new Outline(lib, this.Sps, 5, "#DC962D", "#000000");
	}

	// actions tween:
	this.timeline.addTween(cjs.Tween.get(this).call(this.frame_0).wait(1));

	// AS
	this.debug = new cjs.Text("jsHeapSizeLimit\njsHeapSizeLimit\njsHeapSizeLimit", "50px 'MS Gothic'", "#FFFFFF");
	this.debug.name = "debug";
	this.debug.lineHeight = 52;
	this.debug.lineWidth = 1104;
	this.debug.parent = this;
	this.debug.setTransform(2,280);

	this.timeline.addTween(cjs.Tween.get(this.debug).wait(1));

	// Text1
	this.Sushi = new cjs.Text("123.221 pieces", "90px 'Potta One'", "#FFFFFF");
	this.Sushi.name = "Sushi";
	this.Sushi.textAlign = "center";
	this.Sushi.lineHeight = 132;
	this.Sushi.lineWidth = 1121;
	this.Sushi.parent = this;
	this.Sushi.setTransform(562.5,12);

	this.timeline.addTween(cjs.Tween.get(this.Sushi).wait(1));

	// Text2
	this.Sps = new cjs.Text("per Second : 123,111 pieces", "50px 'Potta One'", "#DC962D");
	this.Sps.name = "Sps";
	this.Sps.textAlign = "center";
	this.Sps.lineHeight = 74;
	this.Sps.lineWidth = 1120;
	this.Sps.parent = this;
	this.Sps.setTransform(561.95,162);

	this.timeline.addTween(cjs.Tween.get(this.Sps).wait(1));

	// Debug
	this.text = new cjs.Text("設定", "50px 'MS Gothic'", "#FFFFFF");
	this.text.lineHeight = 52;
	this.text.lineWidth = 108;
	this.text.parent = this;
	this.text.setTransform(34,185);

	this.DebugButtonMC = new lib.ButtonMC();
	this.DebugButtonMC.name = "DebugButtonMC";
	this.DebugButtonMC.setTransform(1074.3,50,1,1,0,0,0,50,50);

	this.OptionButtonMC = new lib.ButtonMC();
	this.OptionButtonMC.name = "OptionButtonMC";
	this.OptionButtonMC.setTransform(88.15,210,1,1,0,0,0,50,50);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.OptionButtonMC},{t:this.DebugButtonMC},{t:this.text}]}).wait(1));

	// BG
	this.instance = new lib.header();

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.HeaderMC, new cjs.Rectangle(0,0,1125,436), null);


(lib.GeneratorCellMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {"Active":0,"Lock":9,Notice:19};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Icon_Button
	this.IconButtonMC = new lib.ButtonMC();
	this.IconButtonMC.name = "IconButtonMC";
	this.IconButtonMC.setTransform(22.55,38.25,2.66,2.5598,0,0,0,0.2,0.1);

	this.timeline.addTween(cjs.Tween.get(this.IconButtonMC).to({_off:true},19).wait(11));

	// BG_Button
	this.ButtonMC = new lib.ButtonMC();
	this.ButtonMC.name = "ButtonMC";
	this.ButtonMC.setTransform(0,27,11.25,2.7998);

	this.timeline.addTween(cjs.Tween.get(this.ButtonMC).to({_off:true},19).wait(11));

	// Mask
	this.MaskMC = new lib.MaskMC();
	this.MaskMC.name = "MaskMC";
	this.MaskMC.setTransform(28.5,38.25,10.8025,2.56,0,0,0,0.6,0.1);
	this.MaskMC.alpha = 0.5;
	this.MaskMC._off = true;

	this.timeline.addTween(cjs.Tween.get(this.MaskMC).wait(9).to({_off:false},0).wait(10).to({alpha:1},0).wait(11));

	// Dodd
	this.DoddMC = new lib.DoddMC();
	this.DoddMC.name = "DoddMC";
	this.DoddMC.setTransform(1067.8,68,0.5,0.5,0,0,0,60,60);

	this.timeline.addTween(cjs.Tween.get(this.DoddMC).wait(30));

	// レイヤー_8
	this.titleHatena = new cjs.Text("???", "60px 'Potta One'");
	this.titleHatena.name = "titleHatena";
	this.titleHatena.lineHeight = 89;
	this.titleHatena.lineWidth = 636;
	this.titleHatena.parent = this;
	this.titleHatena.setTransform(284.55,70.35);
	this.titleHatena._off = true;

	this.timeline.addTween(cjs.Tween.get(this.titleHatena).wait(19).to({_off:false},0).wait(11));

	// hatena
	this.instance = new lib._hatena();
	this.instance.setTransform(67,72,4,4);

	this.instance_1 = new lib.IconMC();
	this.instance_1.setTransform(162.5,168.5,1,1,0,0,0,104.5,104.5);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[]}).to({state:[{t:this.instance_1},{t:this.instance}]},19).wait(11));

	// Icon
	this.IconMC = new lib.IconMC();
	this.IconMC.name = "IconMC";
	this.IconMC.setTransform(162.5,168.5,1,1,0,0,0,104.5,104.5);

	this.timeline.addTween(cjs.Tween.get(this.IconMC).to({_off:true},19).wait(11));

	// Text_amount
	this.posession = new cjs.Text("100", "100px 'Potta One'");
	this.posession.name = "posession";
	this.posession.lineHeight = 147;
	this.posession.lineWidth = 193;
	this.posession.parent = this;
	this.posession.setTransform(869.3,89);

	this.timeline.addTween(cjs.Tween.get(this.posession).to({_off:true},9).wait(21));

	// Text_title
	this.title = new cjs.Text("Sushi Syokunin", "60px 'Potta One'");
	this.title.name = "title";
	this.title.lineHeight = 89;
	this.title.lineWidth = 636;
	this.title.parent = this;
	this.title.setTransform(284.55,70.35);

	this.timeline.addTween(cjs.Tween.get(this.title).to({_off:true},19).wait(11));

	// Text_cost
	this.cost = new cjs.Text("3.158,759", "60px 'Potta One'", "#C5253A");
	this.cost.name = "cost";
	this.cost.lineHeight = 89;
	this.cost.lineWidth = 496;
	this.cost.parent = this;
	this.cost.setTransform(427.6,158.25);

	this.timeline.addTween(cjs.Tween.get(this.cost).wait(30));

	// Sushi
	this.instance_2 = new lib.sushiIcon();
	this.instance_2.setTransform(280,164);

	this.timeline.addTween(cjs.Tween.get(this.instance_2).wait(30));

	// BG
	this.instance_3 = new lib.cellBG();
	this.instance_3.setTransform(0,13);

	this.timeline.addTween(cjs.Tween.get(this.instance_3).wait(30));

	this._renderFirstFrame();

}).prototype = p = new cjs.MovieClip();
p.nominalBounds = new cjs.Rectangle(0,13,1125,305);


(lib.DebugContentMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Text
	this.MemoryButtonMC = new lib.DebugMC();
	this.MemoryButtonMC.name = "MemoryButtonMC";
	this.MemoryButtonMC.setTransform(834.4,100,1,1,0,0,0,250,50);

	this.SpeedButtonMC = new lib.DebugMC();
	this.SpeedButtonMC.name = "SpeedButtonMC";
	this.SpeedButtonMC.setTransform(290,100,1,1,0,0,0,250,50);

	this.log = new cjs.Text("", "30px 'Potta One'", "#FFFFFF");
	this.log.name = "log";
	this.log.lineHeight = 45;
	this.log.lineWidth = 1121;
	this.log.parent = this;
	this.log.setTransform(2,304.05);

	this.ClearButtonMC = new lib.DebugMC();
	this.ClearButtonMC.name = "ClearButtonMC";
	this.ClearButtonMC.setTransform(290,228,1,1,0,0,0,250,50);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.ClearButtonMC},{t:this.log},{t:this.SpeedButtonMC},{t:this.MemoryButtonMC}]}).wait(1));

	// BG
	this.ContentBGMC = new lib.ButtonMC();
	this.ContentBGMC.name = "ContentBGMC";
	this.ContentBGMC.setTransform(0,0,11.25,0.9999);

	this.timeline.addTween(cjs.Tween.get(this.ContentBGMC).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.DebugContentMC, new cjs.Rectangle(0,0,1125,1558.4), null);


(lib.ConfigDesciptionMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	this.isSingleFrame = false;
	// timeline functions:
	this.frame_0 = function() {
		if(this.isSingleFrame) {
			return;
		}
		if(this.totalFrames == 1) {
			this.isSingleFrame = true;
		}
		this.bitmap;
		this.scaleX = this.parent.canvasScaleX;
		this.scaleY = this.parent.canvasScaleX;
		this.y = document.documentElement.clientHeight / 2;
		this.x = document.documentElement.clientWidth / 2;
		this.visible = false;
		
		this.stop();
		
		this.ChangeBGMVolume = function(value)
		{
			main.bgm = value;
			main.PlayBGM();
		} 
		
		this.ChangeSEVolume = function(value)
		{
			main.se = value;
		}
		
		this.Close = function()
		{
			this.parent.MaskMC.removeEventListener("click", this._mask);
			this.parent.MaskMC.visible = false;
			
			createjs.Tween.get(this, { override: true })
			.to({ scaleX: 0, scaleY: 0 }, 250, createjs.Ease.backInOut)
			.call(() => {
				this.visible = false;
		    });	
			main.PlaySE("popup");
			
			COOKIES.setCookie('bgm', main.bgm, 30);
			COOKIES.setCookie('se', main.se, 30);
		} 
		this.CloseButtonMC.addEventListener("click", this.Close.bind(this));
		
		this.Open = function()
		{
			this.visible = true;
			this.scaleX = 0;
			this.scaleY = 0;
			
			this._mask = this.parent.MaskMC.addEventListener("click", this.Mask.bind(this));
			this.parent.MaskMC.visible = true;	
			
			createjs.Tween.get(this, { override: true })
			.to({ scaleX: this.parent.canvasScaleX, scaleY: this.parent.canvasScaleX }, 250, createjs.Ease.backInOut);
		
			main.PlaySE("open");
		
			this.BGMSliderMC.SetValue(main.bgm);
			this.BGMSliderMC.SetIcon("BGM");
			this.BGMSliderMC.SetCallBack(this.ChangeBGMVolume);
		
			this.SESliderMC.SetValue(main.se);
			this.SESliderMC.SetIcon("SE");
			this.SESliderMC.SetCallBack(this.ChangeSEVolume);
		}
		
		this.Mask = function(){} 
		
		this.Save = async function()
		{
			main.SushiUpdate();
			exportRoot.MessageMC.Open("セーブ完了");
			
		} 
		this.SaveButtonMC.addEventListener("click", this.Save.bind(this));
	}

	// actions tween:
	this.timeline.addTween(cjs.Tween.get(this).call(this.frame_0).wait(1));

	// Text
	this.title = new cjs.Text("SE", "50px 'Potta One'");
	this.title.name = "title";
	this.title.textAlign = "center";
	this.title.lineHeight = 72;
	this.title.lineWidth = 146;
	this.title.parent = this;
	this.title.setTransform(103.9,958);

	this.desciption = new cjs.Text("Setting", "70px 'Potta One'", "#FFFFFF");
	this.desciption.name = "desciption";
	this.desciption.textAlign = "center";
	this.desciption.lineHeight = 101;
	this.desciption.lineWidth = 1038;
	this.desciption.parent = this;
	this.desciption.setTransform(521,61);

	this.title_1 = new cjs.Text("Save", "70px 'Potta One'", "#FFFFFF");
	this.title_1.name = "title_1";
	this.title_1.textAlign = "center";
	this.title_1.lineHeight = 101;
	this.title_1.lineWidth = 1038;
	this.title_1.parent = this;
	this.title_1.setTransform(521,307.95);

	this.title_2 = new cjs.Text("BGM", "50px 'Potta One'");
	this.title_2.name = "title_2";
	this.title_2.textAlign = "center";
	this.title_2.lineHeight = 72;
	this.title_2.lineWidth = 146;
	this.title_2.parent = this;
	this.title_2.setTransform(103.9,713.1);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.title_2},{t:this.title_1},{t:this.desciption},{t:this.title}]}).wait(1));

	// レイヤー_3
	this.SaveButtonMC = new lib.ButtonMC();
	this.SaveButtonMC.name = "SaveButtonMC";
	this.SaveButtonMC.setTransform(510.5,362.15,4.9999,1.7,0,0,0,49.5,50.1);

	this.timeline.addTween(cjs.Tween.get(this.SaveButtonMC).wait(1));

	// Button
	this.instance = new lib._2_1();
	this.instance.setTransform(263,277);

	this.CloseButtonMC = new lib.CloseButtonMC();
	this.CloseButtonMC.name = "CloseButtonMC";
	this.CloseButtonMC.setTransform(1028,16,1,1,0,0,0,61,61);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.CloseButtonMC},{t:this.instance}]}).wait(1));

	// BG
	this.BGMSliderMC = new lib.SliderMC();
	this.BGMSliderMC.name = "BGMSliderMC";
	this.BGMSliderMC.setTransform(188.9,753.1);

	this.SESliderMC = new lib.SliderMC();
	this.SESliderMC.name = "SESliderMC";
	this.SESliderMC.setTransform(188.9,992.4);

	this.instance_1 = new lib.title();
	this.instance_1.setTransform(-36,50);

	this.instance_2 = new lib.a6();

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.instance_2},{t:this.instance_1},{t:this.SESliderMC},{t:this.BGMSliderMC}]}).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.ConfigDesciptionMC, new cjs.Rectangle(-142.1,-45,1231.1,1236), null);


(lib.SushiBGScrollMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// BG3
	this.BG3MC = new lib.BG3MC();
	this.BG3MC.name = "BG3MC";

	this.timeline.addTween(cjs.Tween.get(this.BG3MC).wait(1));

	// BG2
	this.BG2MC = new lib.BG2MC();
	this.BG2MC.name = "BG2MC";

	this.timeline.addTween(cjs.Tween.get(this.BG2MC).wait(1));

	// BG1
	this.BG1MC = new lib.BG1MC();
	this.BG1MC.name = "BG1MC";

	this.timeline.addTween(cjs.Tween.get(this.BG1MC).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.SushiBGScrollMC, new cjs.Rectangle(0,-1124.9,1126,3374.9), null);


(lib.UpgradeButtonMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Image
	this.instance = new lib.upgradeButton();
	this.instance.setTransform(10,40);

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	// Button
	this.instance_1 = new lib.ButtonMC();
	this.instance_1.setTransform(140.6,150,2.8125,3,0,0,0,50,50);

	this.timeline.addTween(cjs.Tween.get(this.instance_1).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.UpgradeButtonMC, new cjs.Rectangle(0,0,281.3,300), null);


(lib.ShopButtonMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Image
	this.instance = new lib.shopButton();
	this.instance.setTransform(10,40);

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	// Button
	this.instance_1 = new lib.ButtonMC();
	this.instance_1.setTransform(140.6,150,2.8125,3,0,0,0,50,50);

	this.timeline.addTween(cjs.Tween.get(this.instance_1).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.ShopButtonMC, new cjs.Rectangle(0,0,281.3,300), null);


(lib.GeneratorButtonMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Image
	this.instance = new lib.generatorButton();
	this.instance.setTransform(10,40);

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	// Button
	this.instance_1 = new lib.ButtonMC();
	this.instance_1.setTransform(140.6,150,2.8125,3,0,0,0,50,50);

	this.timeline.addTween(cjs.Tween.get(this.instance_1).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.GeneratorButtonMC, new cjs.Rectangle(0,0,281.3,300), null);


(lib.AchievementButtonMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Image
	this.instance = new lib.achievementButton();
	this.instance.setTransform(10,40);

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	// Button
	this.instance_1 = new lib.ButtonMC();
	this.instance_1.setTransform(140.6,150,2.8125,3,0,0,0,50,50);

	this.timeline.addTween(cjs.Tween.get(this.instance_1).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.AchievementButtonMC, new cjs.Rectangle(0,0,281.3,300), null);


(lib.bgMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	this.isSingleFrame = false;
	// timeline functions:
	this.frame_0 = function() {
		if(this.isSingleFrame) {
			return;
		}
		if(this.totalFrames == 1) {
			this.isSingleFrame = true;
		}
		createjs.Tween.get(this.RadiationMC, { loop: true })
			.to({ rotation: 360 }, 50000);
	}

	// actions tween:
	this.timeline.addTween(cjs.Tween.get(this).call(this.frame_0).wait(1));

	// Scroll
	this.SushiBGScrollMC = new lib.SushiBGScrollMC();
	this.SushiBGScrollMC.name = "SushiBGScrollMC";

	this.timeline.addTween(cjs.Tween.get(this.SushiBGScrollMC).wait(1));

	// BG
	this.RadiationMC = new lib.RadiationMC();
	this.RadiationMC.name = "RadiationMC";
	this.RadiationMC.setTransform(563.75,1218,1,1,0,0,0,1218,1218);

	this.timeline.addTween(cjs.Tween.get(this.RadiationMC).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.bgMC, new cjs.Rectangle(-654.2,-1124.9,2436,3560.9), null);


(lib.AchievementDesciptionMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	this.isSingleFrame = false;
	// timeline functions:
	this.frame_0 = function() {
		if(this.isSingleFrame) {
			return;
		}
		if(this.totalFrames == 1) {
			this.isSingleFrame = true;
		}
		this.bitmap == null;
		this.scaleX = this.parent.canvasScaleX;
		this.scaleY = this.parent.canvasScaleX;
		//this.y = document.documentElement.clientHeight / 2;
		//this.y = ((2436 * this.parent.canvasScaleY -300 * this.parent.canvasScaleX -914 * this.parent.canvasScaleX)
		//		- (278 * this.parent.canvasScaleX)) / 2 + (278 * this.parent.canvasScaleX);
		this.y = ((2436 * this.parent.canvasScaleY -300 * this.parent.canvasScaleX -914 * this.parent.canvasScaleX)
				- (278 * this.parent.canvasScaleX)) / 2 + (278 * this.parent.canvasScaleX);
		this.x = document.documentElement.clientWidth / 2;
		this.visible = false;
		
		this.title_O = new Outline(lib, this.title, 5, "#000000", "#FFFFFF");
		this.obj;
		
		this.Close = function()
		{
			//this.parent.MaskMC.removeEventListener("click", this._close);
			//this.parent.MaskMC.visible = false;
			this.ButtonMC.removeEventListener("click", this._close);	
			this.obj.achievementClip.AchievementActiveMC.visible = false;
			
			createjs.Tween.get(this, { override: true })
			.to({ scaleX: 0, scaleY: 0 }, 250, createjs.Ease.backInOut)
			.call(() => {
				this.visible = false;
		    });
			main.PlaySE("popup");
		} 
		
		this.Open = function(_obj)
		{
			this.obj = _obj;
			
			this.visible = true;
			this.scaleX = 0;
			this.scaleY = 0;
			
			//this._close = this.parent.MaskMC.addEventListener("click", this.Close.bind(this));
			//this.parent.MaskMC.visible = true;
			this._close = this.ButtonMC.addEventListener("click", this.Close.bind(this));	
			
			createjs.Tween.get(this, { override: true })
			.to({ scaleX: this.parent.canvasScaleX, scaleY: this.parent.canvasScaleX }, 250, createjs.Ease.backInOut);
		
			if( this.bitmap != null)
			{
				this.removeChild(this.bitmap);
				this.bitmap == null;
			}
		
			//アイコン生成
			this.bitmap = new createjs.Bitmap("images/Icon/" + this.obj.dir + "/" + this.obj.id + ".png");
			this.addChild(this.bitmap);
			this.bitmap.x = 65;
			this.bitmap.y = 45;
			this.bitmap.scaleX = 193 / this.bitmap.image.width;
			this.bitmap.scaleY = 193 / this.bitmap.image.height;
		
			this.title_O.text = this.obj.name;
			this.description.text = this.obj.description;
			
			SetWrapText(this.description);	
		}
	}

	// actions tween:
	this.timeline.addTween(cjs.Tween.get(this).call(this.frame_0).wait(1));

	// Button
	this.ButtonMC = new lib.ButtonMC();
	this.ButtonMC.name = "ButtonMC";
	this.ButtonMC.setTransform(562.5,239.55,11.2502,4.8001,0,0,0,50,49.9);

	this.timeline.addTween(cjs.Tween.get(this.ButtonMC).wait(1));

	// IconBG
	this.instance = new lib.iconFrame();
	this.instance.setTransform(57,38);

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	// Text_title
	this.title = new cjs.Text("Sushi Syokunin", "60px 'Potta One'");
	this.title.name = "title";
	this.title.lineHeight = 87;
	this.title.lineWidth = 779;
	this.title.parent = this;
	this.title.setTransform(281.7,43.15);

	this.timeline.addTween(cjs.Tween.get(this.title).wait(1));

	// Text
	this.description = new cjs.Text("「押すだけで寿司が出てくる。\nたまにネタとシャリが逆さまですが。」", "50px 'Potta One'");
	this.description.name = "description";
	this.description.lineHeight = 72;
	this.description.lineWidth = 975;
	this.description.parent = this;
	this.description.setTransform(78,272.75);

	this.timeline.addTween(cjs.Tween.get(this.description).wait(1));

	// BG
	this.instance_1 = new lib.achievementDesciption();

	this.shape = new cjs.Shape();
	this.shape.graphics.f().s("#00CC33").ss(1,1,1).p("EhSBgXbMCkDAAAMAAAAu3MikDAAAg");
	this.shape.setTransform(565.05,188);

	this.shape_1 = new cjs.Shape();
	this.shape_1.graphics.f("#FF0000").s().p("EhSBAXcMAAAgu3MCkDAAAMAAAAu3g");
	this.shape_1.setTransform(565.05,188);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.shape_1},{t:this.shape},{t:this.instance_1}]}).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.AchievementDesciptionMC, new cjs.Rectangle(0,0,1125,480), null);


(lib.AchievementCellMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {"Active":0,"Lock":9};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Icon_Button
	this.IconButtonMC = new lib.ButtonMC();
	this.IconButtonMC.name = "IconButtonMC";
	this.IconButtonMC.setTransform(0.4,0.4,2.0898,2.0899,0,0,0,0.2,0.2);

	this.timeline.addTween(cjs.Tween.get(this.IconButtonMC).to({_off:true},9).wait(11));

	// hatena
	this.instance = new lib.hatena();
	this.instance._off = true;

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(9).to({_off:false},0).wait(11));

	// Active
	this.AchievementActiveMC = new lib.AchievementActiveMC();
	this.AchievementActiveMC.name = "AchievementActiveMC";
	this.AchievementActiveMC.setTransform(104.5,104.5,0.9544,0.9543,0,0,0,109.5,109.5);

	this.timeline.addTween(cjs.Tween.get(this.AchievementActiveMC).to({_off:true},9).wait(11));

	// BG_Button
	this.ButtonMC = new lib.ButtonMC();
	this.ButtonMC.name = "ButtonMC";
	this.ButtonMC.setTransform(0,0,2.0898,2.0899);

	this.timeline.addTween(cjs.Tween.get(this.ButtonMC).to({_off:true},9).wait(11));

	// Dodd
	this.DoddMC = new lib.DoddMC();
	this.DoddMC.name = "DoddMC";
	this.DoddMC.setTransform(179,30,0.5,0.5,0,0,0,60,60);

	this.timeline.addTween(cjs.Tween.get(this.DoddMC).to({_off:true},9).wait(11));

	// Icon
	this.IconMC = new lib.IconMC();
	this.IconMC.name = "IconMC";
	this.IconMC.setTransform(104.5,104.5,1,1,0,0,0,104.5,104.5);

	this.timeline.addTween(cjs.Tween.get(this.IconMC).to({_off:true},9).wait(11));

	this._renderFirstFrame();

}).prototype = p = new cjs.MovieClip();
p.nominalBounds = new cjs.Rectangle(-2.4,-2.4,213.8,213.8);


(lib.UpgradeContentMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Cell
	this.UpgradeCellMC = new lib.UpgradeCellMC();
	this.UpgradeCellMC.name = "UpgradeCellMC";

	this.timeline.addTween(cjs.Tween.get(this.UpgradeCellMC).wait(1));

	// BG
	this.ContentBGMC = new lib.ButtonMC();
	this.ContentBGMC.name = "ContentBGMC";
	this.ContentBGMC.setTransform(0,0,11.25,0.9999);

	this.timeline.addTween(cjs.Tween.get(this.ContentBGMC).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.UpgradeContentMC, new cjs.Rectangle(0,0,1125,318), null);


(lib.ShopDesciptionMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {"type1":9,"type2":19,"type4":30,"type3":40};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// timeline functions:
	this.frame_0 = function() {
		this.bitmap;
		this.scaleX = this.parent.canvasScaleX;
		this.scaleY = this.parent.canvasScaleX;
		this.y = document.documentElement.clientHeight / 2;
		this.x = document.documentElement.clientWidth / 2;
		this.visible = false;
		
		this.title_O = new Outline(lib, this.title, 5, "#000000", "#FFFFFF");
		this.obj;
		
		this.stop();
		
		this.Mask = function(){} 
		
		this.Close = function()
		{
			this.parent.MaskMC.removeEventListener("click", this._mask);
			this.parent.MaskMC.visible = false;
			
			createjs.Tween.get(this, { override: true })
			.to({ scaleX: 0, scaleY: 0 }, 250, createjs.Ease.backInOut)
			.call(() => {
				this.visible = false;
		    });	
			main.PlaySE("popup");
		} 
		this.CloseButtonMC.addEventListener("click", this.Close.bind(this));
		
		this.Open = function(_obj)
		{
			this.obj = _obj;
			
			this.visible = true;
			this.scaleX = 0;
			this.scaleY = 0;
			
			this._mask = this.parent.MaskMC.addEventListener("click", this.Mask.bind(this));
			this.parent.MaskMC.visible = true;	
			
			createjs.Tween.get(this, { override: true })
			.to({ scaleX: this.parent.canvasScaleX, scaleY: this.parent.canvasScaleX }, 250, createjs.Ease.backInOut);
		
			main.PlaySE("popup");
		
			if( this.bitmap != null)
			{
				this.removeChild(this.bitmap);
				this.bitmap == null;
			}
		/*
			//アイコン生成
			this.bitmap = new createjs.Bitmap("images/Icon/" + this.obj.dir + "/" + this.obj.data["icon"] + ".png");
			this.addChild(this.bitmap);
			this.bitmap.x = 50;
			this.bitmap.y = 190;
			this.bitmap.scaleX = 209 / this.bitmap.image.width;
			this.bitmap.scaleY = 209 / this.bitmap.image.height;
		*/
		
			this.title_O.text = this.obj.name;
			//this.desciption.text = this.obj.data["desciption"];
			this.description.text = "Todo:ショップのdescriptionが欲しいです";
			SetWrapText(this.desciption);
			this.gotoAndStop("type" + this.obj.type);
			
			switch (this.obj.type)
			{
				case 1:
					//this.regY = 1145 / 2;
					this.ShopConfilmCell1MC.amount.text = "×" + this.obj.amount.toLocaleString();
					this.ShopType1ButtonMC.price.text = this.obj.price.toLocaleString();
					break;
				case 2:
					this.ShopConfilmCell2MC.amount.text = "×" + this.obj.amount.toLocaleString();
					if(this.obj.price > main.goldenSushi)
					{
						this.ShopType2ButtonMC.price.text = this.obj.price.toLocaleString();
						this.ShopType2ButtonMC.gotoAndStop("Shortage");
					}
					else
					{
						this.ShopType2ButtonMC.gotoAndStop("Active");
						this.ShopType2ButtonMC.price.text = this.obj.price.toLocaleString();
					}
					break;
				case 3:
					this.detail.text = this.obj.data["detail"];
					SetWrapText(this.detail);
					if(this.obj.isPurchase)
					{
						this.ShopType3ButtonMC.gotoAndStop("Selected");	
					}
					else if(this.obj.data.price > main.goldenSushi)
					{
						this.ShopType3ButtonMC.gotoAndStop("Shortage");
						//this.ShopType3ButtonMC.price.text = this.obj.data["price"] + "(所持" + main.goldenSushi + ")";
						this.ShopType3ButtonMC.price.text = this.obj.data["price"].toLocaleString();
					}
					else
					{
						this.ShopType3ButtonMC.gotoAndStop("Active");
						this.ShopType3ButtonMC.price.text = this.obj.data["price"].toLocaleString();
					}
					break;
				case 4:
					this.detail.text = this.obj.data["detail"];
					SetWrapText(this.detail);
					if(main.skinId == this.obj.data.id)
					{
						this.ShopType4ButtonMC.gotoAndStop("Selected");
					}	
					else if(this.obj.isPurchase)
					{
						this.ShopType4ButtonMC.gotoAndStop("NotSelected");
					}
					else if(this.obj.data.price > main.goldenSushi)
					{
						this.ShopType4ButtonMC.gotoAndStop("Shortage");	
						//this.ShopType4ButtonMC.price.text = this.obj.data["price"] + "(所持" + main.goldenSushi + ")";
						this.ShopType4ButtonMC.price.text = this.obj.data["price"].toLocaleString();
					}
					else
					{
						this.ShopType4ButtonMC.gotoAndStop("NotPurchased");
						this.ShopType4ButtonMC.price.text = this.obj.data["price"].toLocaleString();
					}
					break;
			}
		}
		
		this.SubmitType1 = async function()
		{
			this.parent.Mask3MC.visible = true;
		
			var isSuccess = false;
			
		    try {
				console.log("API.ゴールデン寿司を購入");
				var data = await main.API_Request({
					url: '/market/golden-sushi/' + this.obj.id + '/purchase',
					method: 'POST',
					maxAttempts: 3
				});
			
				main.log(data.paymentUrl);
			
		        window.Telegram.WebApp.openInvoice(data.paymentUrl, (status) => {
		            main.log("Payment status : " + status);
		            switch(status) {
		                case "paid":
							main.log("支払い完了");
							isSuccess = true;
		                    break;
		                case "cancelled":
							this.parent.MessageMC.Open("Cancelled");					
		                    break;
		                case "failed":
							this.parent.MessageMC.Open("Payment failed");
		                    break;
		                default:
							this.parent.MessageMC.Open("Unknown payment status");
		            }
		        });	
		    } catch (error) {
				this.parent.MessageMC.Open(error.message);
				main.log(error.message);
		    }
		
			if(isSuccess)
			{
				console.log("API.ユーザ情報取得");
		        API_userData = await main.API_Request({
		            url: '/user/me',
					maxAttempts: 3
		        });
		
				main.goldenSushi = Number(API_userData["user"].currentGoldSushiCount);
				main.totalGoldenSushi = Number(API_userData["user"].totalGoldSushiCount);
				this.parent.ShopPanelMC.ContentMC.goldenSushi.text = main.goldenSushi;
			}
		
			this.parent.Mask3MC.visible = false;
			this.Close();
		}
		this.ShopType1ButtonMC.addEventListener("click", this.SubmitType1.bind(this));
		
		this.SubmitType2 = async function()
		{
			if(this.obj.price > main.goldenSushi)
				return;
			
			this.parent.Mask3MC.visible = true;
		
			if(main.sushiAdd > 0)
			{
				console.log("API.クリックで得た寿司を保存");
				await main.API_Request({
					url: '/sushi/add',
					method: 'POST',
					maxAttempts: 3,
					data: {
						amount: main.sushiAdd
					}
				});	
				main.sushiAdd = 0;
			}
		
		    try {
				console.log("API.寿司を購入");
				await main.API_Request({
					url: '/market/sushi/' + this.obj.id + '/purchase',
					method: 'POST',
					maxAttempts: 3,
				});
		    } catch (error) {
				this.parent.MessageMC.Open("購入に失敗しました");
				this.parent.Mask3MC.visible = false;
				this.Close();
				return;
		    }
			
			console.log("API.自身のユーザー情報を得る");
			API_userData = await main.API_Request({
				url: '/user/me',
				maxAttempts: 3
			});
			
			main.sushi = Number(API_userData["user"].currentSushiCount);
			main.totalSushi = Number(API_userData["user"].totalSushiCount);
			main.goldenSushi = Number(API_userData["user"].currentGoldSushiCount);
			this.parent.ShopPanelMC.ContentMC.goldenSushi.text = main.goldenSushi;
			main.SushiDisplayUdates();
			this.parent.MessageMC.Open( this.obj.name + "を受け取りました");
		
			this.parent.Mask3MC.visible = false;
			this.Close();
		} 
		this.ShopType2ButtonMC.addEventListener("click", this.SubmitType2.bind(this));
		
		this.SubmitType3 = function()
		{
			if(this.obj.data.price > main.goldenSushi)
				return;
			
			//todo
			if(this.obj.isPurchase)
				return;
			
			this.obj.isPurchase = true;
			this.obj.clip.ShopActiveMC.visible = true;
			this.obj.clip.gotoAndStop("Used");
			this.parent.MessageMC.Open( this.obj.data.name + "を入手しました");	
			this.Close();
		} 
		this.ShopType3ButtonMC.addEventListener("click", this.SubmitType3.bind(this));
		
		this.SubmitType4 = function()
		{
			if(this.obj.data.price > main.goldenSushi)
				return;
		
			if(main.skinId == this.obj.data.id)
				return;	
			
			if(this.obj.isPurchase)
			{
				main.skinId = this.obj.data.id;
				this.parent.MessageMC.Open(this.obj.data.name + "を設定しました");	
			}
			else
			{
				this.obj.isPurchase = true;
				this.obj.clip.gotoAndStop("Purchased");
				this.parent.MessageMC.Open(this.obj.data.name + "を入手しました");	
			}
			for (var i = 0; i < main.shops.length; i++)
			{
				if(main.shops[i].data.type != 4) continue;
				main.shops[i].clip.ShopActiveMC.visible = (main.shops[i].data.id == main.skinId) ? true: false;
			}
			this.Close();
		} 
		this.ShopType4ButtonMC.addEventListener("click", this.SubmitType4.bind(this));
	}

	// actions tween:
	this.timeline.addTween(cjs.Tween.get(this).call(this.frame_0).wait(51));

	// Button
	this.CloseButtonMC = new lib.CloseButtonMC();
	this.CloseButtonMC.name = "CloseButtonMC";
	this.CloseButtonMC.setTransform(1028,16,1,1,0,0,0,61,61);

	this.timeline.addTween(cjs.Tween.get(this.CloseButtonMC).wait(51));

	// レイヤー_2
	this.ShopConfilmCell1MC = new lib.ShopConfilmCell1MC();
	this.ShopConfilmCell1MC.name = "ShopConfilmCell1MC";
	this.ShopConfilmCell1MC.setTransform(49.95,191.95,0.6786,0.6786);

	this.ShopConfilmCell2MC = new lib.ShopConfilmCell2MC();
	this.ShopConfilmCell2MC.name = "ShopConfilmCell2MC";
	this.ShopConfilmCell2MC.setTransform(50,192,0.6786,0.6786);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[]}).to({state:[{t:this.ShopConfilmCell1MC}]},9).to({state:[{t:this.ShopConfilmCell2MC}]},10).to({state:[]},11).wait(21));

	// SubmitButton
	this.ShopType1ButtonMC = new lib.ShopType1ButtonMC();
	this.ShopType1ButtonMC.name = "ShopType1ButtonMC";
	this.ShopType1ButtonMC.setTransform(517,800,1,1,0,0,0,258,87);

	this.ShopType2ButtonMC = new lib.ShopType2ButtonMC();
	this.ShopType2ButtonMC.name = "ShopType2ButtonMC";
	this.ShopType2ButtonMC.setTransform(517,801,1,1,0,0,0,258,88);

	this.ShopType4ButtonMC = new lib.ShopType4ButtonMC();
	this.ShopType4ButtonMC.name = "ShopType4ButtonMC";
	this.ShopType4ButtonMC.setTransform(517,801,1,1,0,0,0,258,88);

	this.ShopType3ButtonMC = new lib.ShopType3ButtonMC();
	this.ShopType3ButtonMC.name = "ShopType3ButtonMC";
	this.ShopType3ButtonMC.setTransform(517,1178,1,1,0,0,0,258,88);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[]}).to({state:[{t:this.ShopType1ButtonMC}]},9).to({state:[{t:this.ShopType2ButtonMC}]},10).to({state:[{t:this.ShopType4ButtonMC}]},11).to({state:[{t:this.ShopType3ButtonMC}]},10).wait(11));

	// IconBG
	this.instance = new lib.iconFrame();
	this.instance.setTransform(50,192);

	this.timeline.addTween(cjs.Tween.get(this.instance).to({_off:true},9).wait(42));

	// Text_desciption
	this.text = new cjs.Text("性能", "60px 'Potta One'", "#FFFFFF");
	this.text.lineHeight = 87;
	this.text.parent = this;
	this.text.setTransform(102.15,642.7);

	this.detail = new cjs.Text("1時間あたりのSpS（Sushi per Second）の5%\n1時間経過後、提供力が10分の1まで減少\n最大24時間稼働します", "40px 'Potta One'");
	this.detail.name = "detail";
	this.detail.lineHeight = 60;
	this.detail.lineWidth = 910;
	this.detail.parent = this;
	this.detail.setTransform(68.05,748.2);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[]}).to({state:[{t:this.detail},{t:this.text}]},40).wait(11));

	// Text_title
	this.title = new cjs.Text("Sushi Syokunin", "60px 'Potta One'");
	this.title.name = "title";
	this.title.lineHeight = 87;
	this.title.lineWidth = 716;
	this.title.parent = this;
	this.title.setTransform(277.05,194);

	this.timeline.addTween(cjs.Tween.get(this.title).wait(51));

	// Text
	this.description = new cjs.Text("「押すだけで寿司が出てくる。\nたまにネタとシャリが逆さまですが。」", "50px 'Potta One'");
	this.description.name = "description";
	this.description.lineHeight = 72;
	this.description.lineWidth = 901;
	this.description.parent = this;
	this.description.setTransform(64,448.35);

	this.desciption = new cjs.Text("Confilm", "70px 'Potta One'", "#FFFFFF");
	this.desciption.name = "desciption";
	this.desciption.textAlign = "center";
	this.desciption.lineHeight = 101;
	this.desciption.lineWidth = 1038;
	this.desciption.parent = this;
	this.desciption.setTransform(521,61);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.desciption},{t:this.description}]}).wait(51));

	// BG
	this.instance_1 = new lib._3();

	this.instance_2 = new lib._1();

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.instance_1}]}).to({state:[{t:this.instance_2}]},40).wait(11));

	this._renderFirstFrame();

}).prototype = p = new cjs.MovieClip();
p.nominalBounds = new cjs.Rectangle(0,-45,1089,1402);


(lib.ShopContentMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Text
	this.SkinTitleMC = new lib.ShopSubTitleMC();
	this.SkinTitleMC.name = "SkinTitleMC";
	this.SkinTitleMC.setTransform(0,2206.55);

	this.RoboTitleMC = new lib.ShopSubTitleMC();
	this.RoboTitleMC.name = "RoboTitleMC";
	this.RoboTitleMC.setTransform(0,1498.3);

	this.GoldenSushiTitleMC = new lib.ShopSubTitleMC();
	this.GoldenSushiTitleMC.name = "GoldenSushiTitleMC";
	this.GoldenSushiTitleMC.setTransform(0,200);

	this.SushiTitleMC = new lib.ShopSubTitleMC();
	this.SushiTitleMC.name = "SushiTitleMC";
	this.SushiTitleMC.setTransform(0,850);

	this.goldenSushiTitle = new cjs.Text("Shop", "70px 'Potta One'", "#FFFFFF");
	this.goldenSushiTitle.name = "goldenSushiTitle";
	this.goldenSushiTitle.textAlign = "center";
	this.goldenSushiTitle.lineHeight = 103;
	this.goldenSushiTitle.lineWidth = 1121;
	this.goldenSushiTitle.parent = this;
	this.goldenSushiTitle.setTransform(562.5,56);

	this.goldenSushi = new cjs.Text("11111", "50px 'Potta One'", "#FFFFFF");
	this.goldenSushi.name = "goldenSushi";
	this.goldenSushi.textAlign = "right";
	this.goldenSushi.lineHeight = 74;
	this.goldenSushi.lineWidth = 194;
	this.goldenSushi.parent = this;
	this.goldenSushi.setTransform(1059.6,218);

	this.ShopCell2MC = new lib.ShopCell2MC();
	this.ShopCell2MC.name = "ShopCell2MC";
	this.ShopCell2MC.setTransform(50,1013.75);

	this.ShopCell3MC = new lib.ShopCell3MC();
	this.ShopCell3MC.name = "ShopCell3MC";
	this.ShopCell3MC.setTransform(0,1667.6);

	this.ShopCell1MC = new lib.ShopCell1MC();
	this.ShopCell1MC.name = "ShopCell1MC";
	this.ShopCell1MC.setTransform(50,340.9);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.ShopCell1MC},{t:this.ShopCell3MC},{t:this.ShopCell2MC},{t:this.goldenSushi},{t:this.goldenSushiTitle},{t:this.SushiTitleMC},{t:this.GoldenSushiTitleMC},{t:this.RoboTitleMC},{t:this.SkinTitleMC}]}).wait(1));

	// Image
	this.instance = new lib.goldenSushiBG();
	this.instance.setTransform(713,209);

	this.instance_1 = new lib.title();
	this.instance_1.setTransform(0,48);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.instance_1},{t:this.instance}]}).wait(1));

	// BG
	this.ContentBGMC = new lib.ButtonMC();
	this.ContentBGMC.name = "ContentBGMC";
	this.ContentBGMC.setTransform(0,0,11.25,0.9999);

	this.timeline.addTween(cjs.Tween.get(this.ContentBGMC).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.ShopContentMC, new cjs.Rectangle(0,0,1125,2310.6), null);


(lib.GeneratorContentMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Cell
	this.GeneratorCellMC = new lib.GeneratorCellMC();
	this.GeneratorCellMC.name = "GeneratorCellMC";

	this.timeline.addTween(cjs.Tween.get(this.GeneratorCellMC).wait(1));

	// ScrollButton
	this.ContentBGMC = new lib.ButtonMC();
	this.ContentBGMC.name = "ContentBGMC";
	this.ContentBGMC.setTransform(0,0,11.25,0.9999);

	this.timeline.addTween(cjs.Tween.get(this.ContentBGMC).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.GeneratorContentMC, new cjs.Rectangle(0,0,1125,318), null);


(lib.DebugPanelMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	this.isSingleFrame = false;
	// timeline functions:
	this.frame_0 = function() {
		if(this.isSingleFrame) {
			return;
		}
		if(this.totalFrames == 1) {
			this.isSingleFrame = true;
		}
		this.ScrollMC.content = this.ContentMC;
		
		this.Create = function() 
		{
			//////////////////////////////////////
			//
			var posY = 100;
		
		
			posY += 50;
			this.ScrollMC.SetFullSize(posY);
		}
		
		this.Reset = function() 
		{
		
			this.Create();
		}
		
		this.Open =  function() 
		{
			main.PlaySE("open");
			this.Reset();
			this.ScrollMC.Open();
		}
		
		this.Close =  function() 
		{
			this.ScrollMC.Close();
		}
	}

	// actions tween:
	this.timeline.addTween(cjs.Tween.get(this).call(this.frame_0).wait(1));

	// AS
	this.ScrollMC = new lib.ScrollMC();
	this.ScrollMC.name = "ScrollMC";
	this.ScrollMC.setTransform(-75,25,1,1,0,0,0,25,25);

	this.timeline.addTween(cjs.Tween.get(this.ScrollMC).wait(1));

	// Mask (mask)
	var mask = new cjs.Shape();
	mask._off = true;
	mask.graphics.p("EhX4HUwMAAAupfMCvxAAAMAAAOpfg");
	mask.setTransform(562.5,3040.7);

	// Cell
	this.ContentMC = new lib.DebugContentMC();
	this.ContentMC.name = "ContentMC";

	var maskedShapeInstanceList = [this.ContentMC];

	for(var shapedInstanceItr = 0; shapedInstanceItr < maskedShapeInstanceList.length; shapedInstanceItr++) {
		maskedShapeInstanceList[shapedInstanceItr].mask = mask;
	}

	this.timeline.addTween(cjs.Tween.get(this.ContentMC).wait(1));

	// BG
	this.shape = new cjs.Shape();
	this.shape.graphics.f().s("#00CC33").ss(5,1,1).p("EhX4jqXMCvxAAAMAAAHUvMivxAAAg");
	this.shape.setTransform(562.5,1500);

	this.shape_1 = new cjs.Shape();
	this.shape_1.graphics.f("#3399FF").s().p("EhX4DqYMAAAnUvMCvxAAAMAAAHUvg");
	this.shape_1.setTransform(562.5,1500);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.shape_1},{t:this.shape}]}).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.DebugPanelMC, new cjs.Rectangle(-100.5,-2.5,1228,3005), null);


(lib.FooterMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Badge
	this.GeneratorDoddMC = new lib.DoddMC();
	this.GeneratorDoddMC.name = "GeneratorDoddMC";
	this.GeneratorDoddMC.setTransform(236.3,75.1,0.5,0.5,0,0,0,60.1,60);

	this.UpgradeDoddMC = new lib.DoddMC();
	this.UpgradeDoddMC.name = "UpgradeDoddMC";
	this.UpgradeDoddMC.setTransform(516.8,75.95,0.5,0.5,0,0,0,60,60);

	this.AchievementBadgeMC = new lib.BadgeMC();
	this.AchievementBadgeMC.name = "AchievementBadgeMC";
	this.AchievementBadgeMC.setTransform(1073.55,74.1,1,1,0,0,0,60,60);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.AchievementBadgeMC},{t:this.UpgradeDoddMC},{t:this.GeneratorDoddMC}]}).wait(1));

	// Button
	this.AchievementButtonMC = new lib.AchievementButtonMC();
	this.AchievementButtonMC.name = "AchievementButtonMC";
	this.AchievementButtonMC.setTransform(843.75,0);

	this.ShopButtonMC = new lib.ShopButtonMC();
	this.ShopButtonMC.name = "ShopButtonMC";
	this.ShopButtonMC.setTransform(562.5,0);

	this.UpgradeButtonMC = new lib.UpgradeButtonMC();
	this.UpgradeButtonMC.name = "UpgradeButtonMC";
	this.UpgradeButtonMC.setTransform(281.25,0);

	this.GeneratorButtonMC = new lib.GeneratorButtonMC();
	this.GeneratorButtonMC.name = "GeneratorButtonMC";

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.GeneratorButtonMC},{t:this.UpgradeButtonMC},{t:this.ShopButtonMC},{t:this.AchievementButtonMC}]}).wait(1));

	// BG
	this.instance = new lib.footer();

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.FooterMC, new cjs.Rectangle(0,0,1133.6,300), null);


(lib.AchievementContentMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Text
	this.detail_totalClick = new cjs.Text("234,432回", "50px 'Potta One'");
	this.detail_totalClick.name = "detail_totalClick";
	this.detail_totalClick.textAlign = "right";
	this.detail_totalClick.lineHeight = 74;
	this.detail_totalClick.lineWidth = 496;
	this.detail_totalClick.parent = this;
	this.detail_totalClick.setTransform(998,704.35);

	this.detail_touchSps = new cjs.Text("125", "50px 'Potta One'");
	this.detail_touchSps.name = "detail_touchSps";
	this.detail_touchSps.textAlign = "right";
	this.detail_touchSps.lineHeight = 74;
	this.detail_touchSps.lineWidth = 496;
	this.detail_touchSps.parent = this;
	this.detail_touchSps.setTransform(998,614.5);

	this.detail_gameStart = new cjs.Text("7日, 1時間前", "50px 'Potta One'");
	this.detail_gameStart.name = "detail_gameStart";
	this.detail_gameStart.textAlign = "right";
	this.detail_gameStart.lineHeight = 74;
	this.detail_gameStart.lineWidth = 496;
	this.detail_gameStart.parent = this;
	this.detail_gameStart.setTransform(998,523.95);

	this.detail_generatorNum = new cjs.Text("23", "50px 'Potta One'");
	this.detail_generatorNum.name = "detail_generatorNum";
	this.detail_generatorNum.textAlign = "right";
	this.detail_generatorNum.lineHeight = 74;
	this.detail_generatorNum.lineWidth = 496;
	this.detail_generatorNum.parent = this;
	this.detail_generatorNum.setTransform(998,432.65);

	this.detail_totalSushi = new cjs.Text("5.999 billion", "50px 'Potta One'");
	this.detail_totalSushi.name = "detail_totalSushi";
	this.detail_totalSushi.textAlign = "right";
	this.detail_totalSushi.lineHeight = 74;
	this.detail_totalSushi.lineWidth = 496;
	this.detail_totalSushi.parent = this;
	this.detail_totalSushi.setTransform(998,341.95);

	this.detail_sushi = new cjs.Text("5.999 billion", "50px 'Potta One'");
	this.detail_sushi.name = "detail_sushi";
	this.detail_sushi.textAlign = "right";
	this.detail_sushi.lineHeight = 74;
	this.detail_sushi.lineWidth = 496;
	this.detail_sushi.parent = this;
	this.detail_sushi.setTransform(998,250.7);

	this.text = new cjs.Text("タップ", "50px 'Potta One'");
	this.text.lineHeight = 74;
	this.text.parent = this;
	this.text.setTransform(182,704.35);

	this.text_1 = new cjs.Text("1タップあたりの寿司提供数", "50px 'Potta One'");
	this.text_1.lineHeight = 74;
	this.text_1.parent = this;
	this.text_1.setTransform(182,614.5);

	this.text_2 = new cjs.Text("ゲーム開始", "50px 'Potta One'");
	this.text_2.lineHeight = 74;
	this.text_2.parent = this;
	this.text_2.setTransform(182,523.95);

	this.text_3 = new cjs.Text("施設数", "50px 'Potta One'");
	this.text_3.lineHeight = 74;
	this.text_3.parent = this;
	this.text_3.setTransform(182,432.65);

	this.text_4 = new cjs.Text("寿司生産数", "50px 'Potta One'");
	this.text_4.lineHeight = 74;
	this.text_4.parent = this;
	this.text_4.setTransform(182,341.95);

	this.text_5 = new cjs.Text("提供中の寿司", "50px 'Potta One'");
	this.text_5.lineHeight = 74;
	this.text_5.parent = this;
	this.text_5.setTransform(182,250.7);

	this.detail = new cjs.Text("Achievement", "70px 'Potta One'", "#FFFFFF");
	this.detail.name = "detail";
	this.detail.textAlign = "center";
	this.detail.lineHeight = 103;
	this.detail.lineWidth = 1121;
	this.detail.parent = this;
	this.detail.setTransform(562.5,56);

	this.AchievementCellMC = new lib.AchievementCellMC();
	this.AchievementCellMC.name = "AchievementCellMC";
	this.AchievementCellMC.setTransform(82.2,1282.65);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.AchievementCellMC},{t:this.detail},{t:this.text_5},{t:this.text_4},{t:this.text_3},{t:this.text_2},{t:this.text_1},{t:this.text},{t:this.detail_sushi},{t:this.detail_totalSushi},{t:this.detail_generatorNum},{t:this.detail_gameStart},{t:this.detail_touchSps},{t:this.detail_totalClick}]}).wait(1));

	// Image
	this.instance = new lib.title();
	this.instance.setTransform(0,48);

	this.AchievementTitleMC = new lib.AchievementSubTitleMC();
	this.AchievementTitleMC.name = "AchievementTitleMC";
	this.AchievementTitleMC.setTransform(0,1100.05);

	this.UpgradeTitleMC = new lib.AchievementSubTitleMC();
	this.UpgradeTitleMC.name = "UpgradeTitleMC";
	this.UpgradeTitleMC.setTransform(0,954.55);

	this.instance_1 = new lib.achievementDetailBG();
	this.instance_1.setTransform(56,198);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.instance_1},{t:this.UpgradeTitleMC},{t:this.AchievementTitleMC},{t:this.instance}]}).wait(1));

	// BG
	this.ContentBGMC = new lib.ButtonMC();
	this.ContentBGMC.name = "ContentBGMC";
	this.ContentBGMC.setTransform(0,0,11.25,0.9999);

	this.timeline.addTween(cjs.Tween.get(this.ContentBGMC).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.AchievementContentMC, new cjs.Rectangle(0,0,1125,10000), null);


(lib.UpgradePanelMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	this.isSingleFrame = false;
	// timeline functions:
	this.frame_0 = function() {
		if(this.isSingleFrame) {
			return;
		}
		if(this.totalFrames == 1) {
			this.isSingleFrame = true;
		}
		this.ContentMC.UpgradeCellMC.visible = false;
		this.ScrollMC.content = this.ContentMC;
		this._Tick;
		
		this.OpenDesciption = function (upgrade)
		{
			if (this.ScrollMC.isScrolled())
			return;
		
			this.parent.UpgradeDesciptionMC.Open(upgrade);
			upgrade.clip.DoddMC.visible = false;
		}
		
		this.AddUpgrade = function (upgrade)
		{
			if (this.ScrollMC.isScrolled())
				return;
			main.BuyUpgrade(upgrade);
		}
		
		this.Create = function() 
		{
			for (let i = 0; i < main.upgradeStore.length; i++)
			{
				let upgrade = main.upgradeStore[i];
				
				let clip = new lib.UpgradeCellMC();
				this.ContentMC.addChild(clip);
				//clip.gotoAndStop("On");
				clip.title.text = upgrade.name;
				clip.title_O = new Outline(lib, clip.title, 5, "#000000", "#FFFFFF");
				clip.cost.text = FormatNumber(upgrade.price, 1, 0);
				clip.cost_O = new Outline(lib, clip.cost, 5, "#C5253A", "#FFFFFF");				
				
				clip.x = 0;
				clip.y = 0 + 280 * i;
				upgrade.clip = clip;
				
				clip.IconButtonMC.addEventListener("click", function() {
					this.OpenDesciption.call(this, upgrade);
				}.bind(this));	
				clip.ButtonMC.addEventListener("click", function() {
					this.AddUpgrade.call(this, upgrade);
				}.bind(this));	
		
				//アイコン生成
				let bitmap = new createjs.Bitmap("images/Icon/Upgrade/" + upgrade.id + ".png");
				clip.IconMC.addChild(bitmap);
				bitmap.x = 10;
				bitmap.y = 10;
				bitmap.scaleX = 193 / 48;
				bitmap.scaleY = 193 / 48;
				bitmap.mouseEnabled = false;
			
				upgrade.clip.DoddMC.visible = upgrade.doddState == 2 ? true : false;
			}	
		}
		
		this.Reset = function() 
		{
			for (let i = 0; i < main.upgrades.length; i++)
			{
				main.upgrades[i].clip = null;
			}
			this.ContentMC.removeAllChildren();
			this.Create();
		}
		
		this.Open =  function() 
		{
			main.PlaySE("open");
			
			if(main.upgradeNotification)
			{
				main.upgradeNotification = false;
				this.parent.FooterMC.UpgradeDoddMC.visible = false;
			}
		
			this.Reset();
			this.ScrollMC.Open();
			this._Tick = createjs.Ticker.addEventListener("tick", this.Tick.bind(this));
		}
		
		this.Close =  function() 
		{
			this.ScrollMC.Close();
			createjs.Ticker.removeEventListener("tick", this._Tick);
			
			for (let i = 0; i < main.upgradeStore.length; i++)
			{
				let upgrade = main.upgradeStore[i];
				if(upgrade.doddState == 2)
					upgrade.doddState = 3;
			}	
		}
		
		this.Tick = function(event)
		{
			if(main.upgradeNotification)
			{
				main.upgradeNotification = false;
				this.parent.FooterMC.UpgradeDoddMC.visible = false;
				this.Reset();
			}
			
			for (let i = 0; i < main.upgradeStore.length; i++)
			{
				let upgrade = main.upgradeStore[i];
				
				if(main.sushi >= upgrade.price)
				{
					upgrade.clip.gotoAndStop("Active");
					upgrade.clip.cost_O.color ="#00FF00";
				}
				else
				{
					upgrade.clip.gotoAndStop("Lock");
					upgrade.clip.cost_O.color ="#C5253A";
				}
			}
			this.ScrollMC.count = main.upgradeStore.length;
			this.ScrollMC.Reload();
		}
	}

	// actions tween:
	this.timeline.addTween(cjs.Tween.get(this).call(this.frame_0).wait(1));

	// AS
	this.ScrollMC = new lib.ScrollMC();
	this.ScrollMC.name = "ScrollMC";
	this.ScrollMC.setTransform(-75,25,1,1,0,0,0,25,25);

	this.timeline.addTween(cjs.Tween.get(this.ScrollMC).wait(1));

	// Mask (mask)
	var mask = new cjs.Shape();
	mask._off = true;
	mask.graphics.p("EhX4BEIMAAAiIPMCvxAAAMAAACIPg");
	mask.setTransform(562.5,476.7);

	// Cell
	this.ContentMC = new lib.UpgradeContentMC();
	this.ContentMC.name = "ContentMC";

	var maskedShapeInstanceList = [this.ContentMC];

	for(var shapedInstanceItr = 0; shapedInstanceItr < maskedShapeInstanceList.length; shapedInstanceItr++) {
		maskedShapeInstanceList[shapedInstanceItr].mask = mask;
	}

	this.timeline.addTween(cjs.Tween.get(this.ContentMC).wait(1));

	// BG
	this.instance = new lib.panel();

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.UpgradePanelMC, new cjs.Rectangle(-100.5,-0.5,1225.5,985.5), null);


(lib.ShopPanelMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	this.isSingleFrame = false;
	// timeline functions:
	this.frame_0 = function() {
		if(this.isSingleFrame) {
			return;
		}
		if(this.totalFrames == 1) {
			this.isSingleFrame = true;
		}
		this.ContentMC.ShopCell1MC.visible = false;
		this.ContentMC.ShopCell2MC.visible = false;
		this.ContentMC.ShopCell3MC.visible = false;
		this.ScrollMC.content = this.ContentMC;
		
		this.OpenDesciption = function (data)
		{
		    if (!this.ScrollMC.isScrolled()) {
		        this.parent.ShopDesciptionMC.Open(data);
		    }
		}
		
		this.Create = function() 
		{
			//////////////////////////////////////
			//GoldenSushi
			let posY = 200;
			this.ContentMC.GoldenSushiTitleMC.y = posY;
			this.ContentMC.GoldenSushiTitleMC.title.text = "Golden Sushi";
			this.ContentMC.goldenSushi.text = main.goldenSushi;
			posY += 130;
			
			let goldenSushiCount = 0; 
			for (let i = 0; i < main.goldenSushiShops.length; i++)
			{
				let goldenSushiShop = main.goldenSushiShops[i];
				
				let clip = new lib.ShopCell1MC();
				this.ContentMC.addChild(clip);
				goldenSushiShop.clip = clip;
				clip.x = 50 + 355 * (goldenSushiCount % 3);
				clip.y = posY + 350 * Math.floor(goldenSushiCount / 3);
				
				clip.IconButtonMC.addEventListener("click", function() {
					this.OpenDesciption.call(this, goldenSushiShop);
				}.bind(this));
			
				clip.price.text = goldenSushiShop.price.toLocaleString();
				clip.amount.text = "×" + goldenSushiShop.amount.toLocaleString();		
		
				clip.gotoAndStop("Active");
				goldenSushiCount++;
			}
		
			posY += 350 * Math.ceil(goldenSushiCount / 3);
		
			//////////////////////////////////////
			//Sushi
			posY += 130;
			this.ContentMC.SushiTitleMC.y = posY;
			this.ContentMC.SushiTitleMC.title.text = "Sushi";
			posY += 130;
			
			let sushiCount = 0; 
			for (let i = 0; i < main.sushiShops.length; i++)
			{
				let sushiShop = main.sushiShops[i];
				
				let clip = new lib.ShopCell2MC();
				this.ContentMC.addChild(clip);
				sushiShop.clip = clip;
				clip.x = 50 + 355 * (sushiCount % 3);
				clip.y = posY + 350 * Math.floor(sushiCount / 3);
				
				clip.IconButtonMC.addEventListener("click", function() {
					this.OpenDesciption.call(this, sushiShop);
				}.bind(this));
				
				clip.price.text = sushiShop.price.toLocaleString();
				clip.amount.text = "×" + sushiShop.amount.toLocaleString();		
				
				clip.gotoAndStop("Active");
				sushiCount++;
			}
		
			posY += 350 * Math.ceil(sushiCount / 3);
		
			//////////////////////////////////////
			//Robo
			posY += 130;
			this.ContentMC.RoboTitleMC.y = posY;
			this.ContentMC.RoboTitleMC.title.text = "オンライン寿司ロボ";
			posY += 130;
		
			let roboCount = 0; 
			for (let i = 0; i < main.shops.length; i++)
			{
				if(main.shops[i].data.type != 3) continue;
				let shop = main.shops[i];
				
				let clip = new lib.ShopCell3MC();
				this.ContentMC.addChild(clip);
				clip.ShopActiveMC.visible = (shop.data.id == main.skinId) ? true: false;
				clip.title_O = new Outline(lib, clip.title, 5, "#000000", "#FFFFFF");		
				clip.title_O.text = shop.data.name;
				clip.price_O = new Outline(lib, clip.price, 5, "#C5253A", "#FFFFFF");		
				clip.price_O.text = shop.data.price.toLocaleString();
				clip.desciption.text = shop.data.desciption;
				SetWrapText(clip.desciption);
				shop.clip = clip;
				clip.x = 0;
				clip.y = posY + 480 * roboCount;
				
				clip.ButtonMC.addEventListener("click", function() {
					this.OpenDesciption.call(this, shop);
				}.bind(this));
				
				//アイコン生成
				let bitmap = new createjs.Bitmap("images/Icon/"+ shop.dir + "/" + shop.data["icon"] + ".png");
				clip.IconMC.addChild(bitmap);
				bitmap.x = 0;
				bitmap.y = 0;
				bitmap.scaleX = 1;
				bitmap.scaleY = 1;
				bitmap.mouseEnabled = false;		
				if(shop.isPurchase)
					clip.gotoAndStop("Used");
				else
					clip.gotoAndStop("Active");
				
				roboCount++;
			}
		
			posY += 480 * roboCount;
		
			//////////////////////////////////////
			//Skin
			posY += 20;
			this.ContentMC.SkinTitleMC.y = posY;
			this.ContentMC.SkinTitleMC.title.text = "見た目をカスタマイズ";
			posY += 130;
			
			let skinCount = 0; 
			for (let i = 0; i < main.shops.length; i++)
			{
				if(main.shops[i].data.type != 4) continue;
				let shop = main.shops[i];
				
				let clip = new lib.ShopCell3MC();
				this.ContentMC.addChild(clip);
				clip.title_O = new Outline(lib, clip.title, 5, "#000000", "#FFFFFF");		
				clip.title_O.text = shop.data.name;
				clip.price_O = new Outline(lib, clip.price, 5, "#C5253A", "#FFFFFF");		
				clip.price_O.text = shop.data.price.toLocaleString();
				clip.desciption.text = shop.data.desciption;
				SetWrapText(clip.desciption);
				clip.ShopActiveMC.visible = (shop.data.id == main.skinId) ? true: false;
				shop.clip = clip;
				clip.x = 0;
				clip.y = posY + 480 * skinCount;
				
				clip.ButtonMC.addEventListener("click", function() {
					this.OpenDesciption.call(this, shop);
				}.bind(this));
				
				//アイコン生成
				let bitmap = new createjs.Bitmap("images/Icon/"+ shop.dir + "/" + shop.data["icon"] + ".png");
				clip.IconMC.addChild(bitmap);
				bitmap.x = 0;
				bitmap.y = 0;
				bitmap.scaleX = 1;
				bitmap.scaleY = 1;
				bitmap.mouseEnabled = false;		
				
				if(shop.isPurchase)
					clip.gotoAndStop("Purchased");
				else
					clip.gotoAndStop("Active");
				
				skinCount++;
			}
		
			posY += 480 * skinCount;
		
			//////////////////////////////////////
		
			posY += 50;
			this.ScrollMC.SetFullSize(posY);
		}
		
		this.Reset = function() 
		{
			for (let i = 0; i < main.shops.length; i++)
			{
				let shop = main.shops[i];
				this.ContentMC.removeChild(shop.clip);
				shop.clip = null;
			}
			this.Create();
		}
		
		this.Open =  function() 
		{
			main.PlaySE("open");
			this.Reset();
			this.ScrollMC.Open();
		}
		
		this.Close =  function() 
		{
			this.ScrollMC.Close();
		}
	}

	// actions tween:
	this.timeline.addTween(cjs.Tween.get(this).call(this.frame_0).wait(1));

	// AS
	this.ScrollMC = new lib.ScrollMC();
	this.ScrollMC.name = "ScrollMC";
	this.ScrollMC.setTransform(-75,25,1,1,0,0,0,25,25);

	this.timeline.addTween(cjs.Tween.get(this.ScrollMC).wait(1));

	// Mask (mask)
	var mask = new cjs.Shape();
	mask._off = true;
	mask.graphics.p("EhX4HUwMAAAupfMCvxAAAMAAAOpfg");
	mask.setTransform(562.5,3040.7);

	// Cell
	this.ContentMC = new lib.ShopContentMC();
	this.ContentMC.name = "ContentMC";

	var maskedShapeInstanceList = [this.ContentMC];

	for(var shapedInstanceItr = 0; shapedInstanceItr < maskedShapeInstanceList.length; shapedInstanceItr++) {
		maskedShapeInstanceList[shapedInstanceItr].mask = mask;
	}

	this.timeline.addTween(cjs.Tween.get(this.ContentMC).wait(1));

	// BG
	this.instance = new lib.bg();

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.ShopPanelMC, new cjs.Rectangle(-100.5,-0.5,1225.5,2436.5), null);


(lib.GeneratorPanelMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	this.isSingleFrame = false;
	// timeline functions:
	this.frame_0 = function() {
		if(this.isSingleFrame) {
			return;
		}
		if(this.totalFrames == 1) {
			this.isSingleFrame = true;
		}
		this.ContentMC.GeneratorCellMC.visible = false;
		this.ScrollMC.content = this.ContentMC;
		this._Tick;
		
		this.OpenDesciption = function (generator)
		{
			if (this.ScrollMC.isScrolled())
				return;
			
			this.parent.GeneratorDesciptionMC.Open(generator);
			generator.clip.DoddMC.visible = false;
			generator.doddState = 3;
		}
		
		this.AddGenerator = function (generator)
		{
			if (this.ScrollMC.isScrolled())
				return;
			
			main.BuyGenerator(generator);
			generator.clip.DoddMC.visible = false;
			generator.doddState = 3;
		}
		
		this.Create = function() 
		{
			for (let i = 0; i < main.generators.length; i++)
			{
				let generator = main.generators[i];
				
				let clip = new lib.GeneratorCellMC ();
				this.ContentMC.addChild(clip);
				clip.title_O = new Outline(lib, clip.title, 5, "#000000", "#FFFFFF");
				clip.title_O.text = generator.name;
				clip.titleHatena_O = new Outline(lib, clip.titleHatena, 5, "#000000", "#FFFFFF");
				clip.cost.text = FormatNumber(generator.storedCost, 1, 0);
				clip.cost_O = new Outline(lib, clip.cost, 5, "#C5253A", "#FFFFFF");
				clip.cost_O.text = FormatNumber(generator.storedCost, 1, 0);
				clip.posession.text = generator.posession;
				clip.x = 0;
				clip.y = 0 + 280 * i;
				generator.clip = clip;
			
				clip.IconButtonMC.addEventListener("click", function() {
					this.OpenDesciption.call(this, generator);
				}.bind(this));	
				clip.ButtonMC.addEventListener("click", function() {
					this.AddGenerator.call(this, generator);
				}.bind(this));	
		
				//アイコン生成
				let bitmap = new createjs.Bitmap("images/Icon/" + generator.dir + "/" + generator.id + ".png");
				clip.IconMC.addChild(bitmap);
				bitmap.x = 10;
				bitmap.y = 10;
				bitmap.scaleX = 193 / 64;
				bitmap.scaleY = 193 / 64;
				bitmap.mouseEnabled = false;
			
				generator.clip.DoddMC.visible = generator.doddState == 2 ? true : false;
			}
		}
		
		this.Open = function() 
		{
			main.PlaySE("open");
			
			if(main.generatorNotification)
			{
				main.generatorNotification = false;
				this.parent.FooterMC.GeneratorDoddMC.visible = false;
				
				for (let i = 0; i < main.generators.length; i++)
				{
					let generator = main.generators[i];
					generator.clip.DoddMC.visible = generator.doddState == 2 ? true : false;
				}
			}
		
			this.ScrollMC.Open();
			this._Tick = createjs.Ticker.addEventListener("tick", this.Tick.bind(this));	
		}
		
		this.Close =  function() 
		{
			this.ScrollMC.Close();
			createjs.Ticker.removeEventListener("tick", this._Tick);
		
			for (let i = 0; i < main.generators.length; i++)
			{
				let generator = main.generators[i];
				if(generator.doddState == 2)
				{
					generator.doddState = 3;
					generator.clip.DoddMC.visible = false;
				}
			}
		}
		
		this.Tick = function(event)
		{
			if(main.generatorNotification)
			{
				//タブの通知の削除
				main.generatorNotification = false;
				this.parent.FooterMC.GeneratorDoddMC.visible = false;
				for (let i = 0; i < main.generators.length; i++)
				{
					//一覧の通知の削除
					let generator = main.generators[i];
					generator.clip.DoddMC.visible = generator.doddState == 2 ? true : false;
				}
			}
		
			let dispCount = 0;	
			let lastLocked = 0;
			for (let i = 0; i < main.generators.length; i++)
			{
				let generator = main.generators[i];
				
				generator.clip.visible = true;	
				
				if (generator.posession > 0)
				{
					//購入済み
					generator.clip.gotoAndStop("Active");
					lastLocked = 0;
					dispCount++;
				}
				else if((main.sushi >= generator.availableSushiCount || generator.available ) && lastLocked == 0)
				{
					//購入可能
					generator.clip.gotoAndStop("Lock");
					dispCount++;
					lastLocked++;
				}
				else
				{
					if(lastLocked == 0)
					{
						//不明
						generator.clip.gotoAndStop("Notice");
						dispCount++;
					}
					else
					{
						generator.clip.visible = false;	
					}
					lastLocked++;
				}
				
				if(main.sushi >= generator.storedCost)
					generator.clip.cost_O.color = "#00FF00";
				else
					generator.clip.cost_O.color = "#C5253A";
			
			}
			this.ScrollMC.count = dispCount;
			this.ScrollMC.Reload();
		}
	}

	// actions tween:
	this.timeline.addTween(cjs.Tween.get(this).call(this.frame_0).wait(1));

	// AS
	this.ScrollMC = new lib.ScrollMC();
	this.ScrollMC.name = "ScrollMC";
	this.ScrollMC.setTransform(-75,25,1,1,0,0,0,25,25);

	this.timeline.addTween(cjs.Tween.get(this.ScrollMC).wait(1));

	// Mask (mask)
	var mask = new cjs.Shape();
	mask._off = true;
	mask.graphics.p("EhX4BEIMAAAiIPMCvxAAAMAAACIPg");
	mask.setTransform(562.5,476.7);

	// Cell
	this.ContentMC = new lib.GeneratorContentMC();
	this.ContentMC.name = "ContentMC";

	var maskedShapeInstanceList = [this.ContentMC];

	for(var shapedInstanceItr = 0; shapedInstanceItr < maskedShapeInstanceList.length; shapedInstanceItr++) {
		maskedShapeInstanceList[shapedInstanceItr].mask = mask;
	}

	this.timeline.addTween(cjs.Tween.get(this.ContentMC).wait(1));

	// BG
	this.instance = new lib.panel();

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.GeneratorPanelMC, new cjs.Rectangle(-100.5,-0.5,1225.5,985.5), null);


(lib.AchievementPanelMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	this.isSingleFrame = false;
	// timeline functions:
	this.frame_0 = function() {
		if(this.isSingleFrame) {
			return;
		}
		if(this.totalFrames == 1) {
			this.isSingleFrame = true;
		}
		this.ContentMC.AchievementCellMC.visible = false;
		this.ScrollMC.content = this.ContentMC;
		
		this.OpenDesciption = function (data)
		{
		    if (!this.ScrollMC.isScrolled()) {
				
				if(this.parent.AchievementDesciptionMC.visible)
				{
					if(this.parent.AchievementDesciptionMC.obj.id == data.id)
					{
						this.parent.AchievementDesciptionMC.Close();
						return;
					}
				}
				
		        this.parent.AchievementDesciptionMC.Open(data);
				main.PlaySE("popup");
				if(data.isAchievementUnread)
				{
					main.RemoveAchievement();
					data.isAchievementUnread = false;
					data.achievementClip.DoddMC.visible =  false;
				}
			
				for (let i = 0; i < main.achievements.length; i++)
				{
					main.achievements[i].achievementClip.AchievementActiveMC.visible = false;
				}
		
				for (let i = 0; i < main.upgrades.length; i++)
				{
					if(main.upgrades[i].achievementClip == null) continue;
						main.upgrades[i].achievementClip.AchievementActiveMC.visible = false;
				}
		
				data.achievementClip.AchievementActiveMC.visible = true;
			}
		}
		
		this.Create = function() 
		{
			//////////////////////////////////////
			//アップグレード
			let posY = 880;
			this.ContentMC.UpgradeTitleMC.y = posY;
			posY += 130;
			
			let upgradeCount = 0; 
			for (let i = 0; i < main.upgrades.length; i++)
			{
				let upgrade = main.upgrades[i];
				
				if(!upgrade.posession)
					continue;
				
				let clip = new lib.AchievementCellMC();
				this.ContentMC.addChild(clip);
				upgrade.achievementClip = clip;
				clip.x = 80 + 250 * (upgradeCount % 4);
				clip.y = posY + 250 * Math.floor(upgradeCount / 4);
				
				clip.IconButtonMC.addEventListener("click", function() {
					this.OpenDesciption.call(this, upgrade);
				}.bind(this));
				
				//アイコン生成
				let bitmap = new createjs.Bitmap("images/Icon/Upgrade/" + upgrade.id + ".png");
				clip.IconMC.addChild(bitmap);
				bitmap.x = 10;
				bitmap.y = 10;
				bitmap.scaleX = 193 / 48;
				bitmap.scaleY = 193 / 48;
				bitmap.mouseEnabled = false;		
				
				clip.gotoAndStop("Active");
				clip.DoddMC.visible =  upgrade.isAchievementUnread;
				clip.AchievementActiveMC.visible = false;
				upgradeCount++;
			}
		
			this.ContentMC.UpgradeTitleMC.title.text = "アップグレード";
			this.ContentMC.UpgradeTitleMC.count.text = (upgradeCount/main.upgrades.length).toFixed(2) + "%"
				+ "(" + upgradeCount + "/" + main.upgrades.length +")";
		
			posY += 250 * Math.ceil(upgradeCount / 4);
		
			//////////////////////////////////////
			//アチーブメント
			posY += 0;
			this.ContentMC.AchievementTitleMC.y = posY;
			posY += 130;
		
			let achievementCount = 0; 
			for (let i = 0; i < main.achievements.length; i++)
			{
				let achievement = main.achievements[i];
				
				let clip = new lib.AchievementCellMC();
				this.ContentMC.addChild(clip);
				achievement.achievementClip = clip;
				clip.x = 80 + 250 * (i % 4);
				clip.y = posY + 250 * Math.floor(i / 4);
		
				clip.IconButtonMC.addEventListener("click", function() {
					this.OpenDesciption.call(this, achievement);
				}.bind(this));
				
				//アイコン生成
				let bitmap = new createjs.Bitmap("images/Icon/Achievement/" + achievement.data["icon"] + ".png");
				clip.IconMC.addChild(bitmap);
				bitmap.x = 10;
				bitmap.y = 10;
				bitmap.scaleX = 193 / 64;
				bitmap.scaleY = 193 / 64;
				bitmap.mouseEnabled = false;		
				
				if(achievement.unlock)
				{
					achievementCount++;
					clip.gotoAndStop("Active");
				}
				else
				{
					clip.gotoAndStop("Lock");
				}
				clip.DoddMC.visible =  achievement.isAchievementUnread;
				clip.AchievementActiveMC.visible = false;
			}
		
			this.ContentMC.AchievementTitleMC.title.text = "アチーブメント";
			this.ContentMC.AchievementTitleMC.count.text = (achievementCount/main.achievements.length).toFixed(2) + "%"
				+ "(" + achievementCount + "/" + main.achievements.length +")";
		
			posY += 250 * Math.ceil(main.achievements.length / 4);
		
			//this.ScrollMC.SetFullSize(posY);
			this.ScrollMC.SetSize(posY);
		}
		
		this.Reset = function() 
		{
			for (let i = 0; i < main.achievements.length; i++)
			{
				let achievement = main.achievements[i];
				this.ContentMC.removeChild(achievement.achievementClip);
				achievement.achievementClip = null;
			}
		
			for (let i = 0; i < main.upgrades.length; i++)
			{
				if(main.upgrades[i].achievementClip === null) continue;		
				let upgrade = main.upgrades[i];
				this.ContentMC.removeChild(upgrade.achievementClip);
				upgrade.achievementClip = null;
			}
			this.Create();
		}
		
		this.TimeAgo = function(dateString) {
		    const now = new Date(); // 現在の日時
		    const past = new Date(dateString); // 過去の日時
		
		    const diffMs = now - past; // ミリ秒での差分
		    const diffSeconds = Math.floor(diffMs / 1000);
		    const diffMinutes = Math.floor(diffSeconds / 60);
		    const diffHours = Math.floor(diffMinutes / 60);
		    const diffDays = Math.floor(diffHours / 24);
		
		    if (diffDays > 0) {
		        return `${diffDays}日, ${diffHours % 24}時間前`;
		    } else if (diffHours > 0) {
		        return `${diffHours}時間, ${diffMinutes % 60}分前`;
		    } else if (diffMinutes > 0) {
		        return `${diffMinutes}分前`;
		    } else {
		        return `${diffSeconds}秒前`;
		    }
		}
		
		this.Detail = function() 
		{
			let generatorNum = 0;
			for (let i = 0; i < main.generators.length; i++)
				generatorNum += main.generators[i].posession;
		
			this.ContentMC.detail_sushi.text = FormatNumber(main.sushi, 1, 0);
			this.ContentMC.detail_totalSushi.text = FormatNumber(main.totalSushi, 1, 0);
			this.ContentMC.detail_generatorNum.text = FormatNumber(generatorNum, 1, 0);
			this.ContentMC.detail_gameStart.text = this.TimeAgo(main.createdAt);
			this.ContentMC.detail_touchSps.text = FormatNumber(main.touchSps, 1, 0);
			this.ContentMC.detail_totalClick.text = FormatNumber(main.totalClick, 1, 0);
		}
		
		this.Open =  function() 
		{
			main.PlaySE("open");
			this.Detail();
			this.Reset();
			this.ScrollMC.Open();
			this._Tick = createjs.Ticker.addEventListener("tick", this.Tick.bind(this));
		}
		
		this.Close =  function() 
		{
			this.ScrollMC.Close();
			createjs.Ticker.removeEventListener("tick", this._Tick);	
		}
		
		this.Tick = function(event)
		{
			this.Detail();
		}
	}

	// actions tween:
	this.timeline.addTween(cjs.Tween.get(this).call(this.frame_0).wait(1));

	// AS
	this.ScrollMC = new lib.ScrollMC();
	this.ScrollMC.name = "ScrollMC";
	this.ScrollMC.setTransform(-75,25,1,1,0,0,0,25,25);

	this.timeline.addTween(cjs.Tween.get(this.ScrollMC).wait(1));

	// Mask (mask)
	var mask = new cjs.Shape();
	mask._off = true;
	mask.graphics.p("EhX4HUwMAAAupfMCvxAAAMAAAOpfg");
	mask.setTransform(562.5,3040.7);

	// Cell
	this.ContentMC = new lib.AchievementContentMC();
	this.ContentMC.name = "ContentMC";

	var maskedShapeInstanceList = [this.ContentMC];

	for(var shapedInstanceItr = 0; shapedInstanceItr < maskedShapeInstanceList.length; shapedInstanceItr++) {
		maskedShapeInstanceList[shapedInstanceItr].mask = mask;
	}

	this.timeline.addTween(cjs.Tween.get(this.ContentMC).wait(1));

	// BG
	this.instance = new lib.panel();

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.AchievementPanelMC, new cjs.Rectangle(-100.5,-2.5,1228,3005), null);


// stage content:
(lib.index = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = false; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	this.actionFrames = [0];
	this.isSingleFrame = false;
	// timeline functions:
	this.frame_0 = function() {
		if(this.isSingleFrame) {
			return;
		}
		if(this.totalFrames == 1) {
			this.isSingleFrame = true;
		}
		//////////////////////////////////////////////////////////
		//Data
		class Generator
		{
		    constructor()
			{
				//this.data;
				this.category = 1;
				this.clip = null;
				this.dir = "Generator";
				
				//this.amount = 0;
				this.totalSushies = 0;
				this.storedTotalSps = 0;
		
				this.upgrades = [];
				
				this.isNotification = false;		//通知を表示したか
				this.doddState = 0;					//0:初期、1:表示、2:バッジ表示、3:バッジ削除済み
				
				this.available = false;
				this.availableSushiCount = 0;
				this.description = "";
				this.id = 0;
				this.name = "";
				this.posession = 0;
				this.power = 0;
				this.basePrice = 0;
				this.nextPrice = 0;
				this.priceScalingFactor = 0;
				
				this.storedCost = 0;	//計算済み価格
				this.storedSps = 0;		//ジェネレーター生産量
				
		    }
		
			CalculateSps = function()
			{
				let mult = 1;
				for (let i = 0; i < this.upgrades.length; i++)
				{
					let upgrade = this.upgrades[i];
					if(!upgrade.available)
						continue;
					mult *= upgrade.operationValue;
				}
				this.storedSps = this.power * mult * main.global_multiplier;
			}
		
			//コストの計算
			CalculateCost = function()
			{
				this.storedCost = Math.ceil(this.basePrice * Math.pow(this.priceScalingFactor, this.posession));
			}
		}
		
		class Upgrade
		{
		    constructor()
			{
				this.category = 2;
				this.clip = null;
				this.achievementClip = null;
				this.dir = "Upgrade";
		
				//this.amount = 0;
				
				this.isNotification = false;
				this.doddState = 0;
				this.isAchievementUnread = true;
				
				
				this.available = false;
				this.availableHasGeneratorCount = 0;
				this.availableHasGeneratorMstId = 0;
				this.availableSushiCount = 0;
				this.description = "";
				this.id = 0;
				this.name = "";
				this.operationType = 0;
				this.operationValue = 0;
				this.posession = false;
				this.price = 0;
				this.targetGeneratorMstId = 0;
				this.targetType = 0;
		    }
		}
		
		class Shop
		{
		    constructor()
			{
				this.data;
				this.category = 4;
				this.clip = null;
				this.dir = "Shop";
				this.isPurchase = false;//購入済みか
		    }
		}
		
		class GoldenSushiShop
		{
		    constructor()
			{
				this.category = 4;
				this.clip = null;
				this.dir = "Shop";
				
				this.id = 0;
				this.name = "";
				this.amount = 0;
				this.price = 0;
				this.type = 1;
		    }
		}
		
		class SushiShop
		{
		    constructor()
			{
				this.category = 4;
				this.clip = null;
				this.dir = "Shop";
				
				this.id = 0;
				this.name = "";
				this.amount = 0;
				this.price = 0;
				this.type = 2;
		    }
		}
		
		class Achievement
		{
		    constructor()
			{
				this.data;
				this.category = 3;
				this.achievementClip = null;
				this.dir = "Achievement";
				this.unlock = false;
		
				this.isNotification = false;
				this.doddState = 0;
				this.isAchievementUnread = true;
				
				
				
		
				this.id = 0;
				this.name = "";
				this.description = "";
				
		    }
		}
		
		class Notification
		{
		    constructor()
			{
				this.message;
				this.image;
		    }
		}
		
		class Main
		{
		    constructor()
			{
		        this.sushi = 0;				//所持寿司
		        this.totalSushi = 0;		//生成寿司
				this.sushiPs = 0;			//一秒間当たりの寿司
				this.sushiAdd = 0;			//サーバとの差分
				this.sushiDebt = 0;			//
				this.fractionSps = 0;		//小数点以下の寿司
				this.touchSps = 0			//クリック当たりの寿司
				this.totalClick = 0;		//トータルクリック数
				this.goldenSushi = 0;		//ゴールデン寿司
				this.totalGoldenSushi = 0;	//トータルゴールデン寿司
				this.priceIncrease = 1.15;	//価格の上昇率
				this.skinId = 0;			//スキンId
				this.invitationCount = 49;	//招待数
				this.invitationState = 0;	//招待報酬 0:未受取、1:1人、2:5人、3:10人、4:50人
				this.createdAt = "";		//ゲーム開始日時
				
				this.global_multiplier = 1;
				this.click_cps_boost = 1;
				//////////////////////////////////////////////////////////
				this.bgm = 0.25;
				this.se = 0.8;
				this.bgm_instance = null;
				
				//////////////////////////////////////////////////////////
				//アップグレード
				this.upgradeStore = [];
				this.upgrades = [];	
				this.upgradeNum = 0;
				this.upgradeNotification = false;
				
				//////////////////////////////////////////////////////////
				//ジェネレーター
				this.generators = [];
				this.generatorNum = 0;
				this.generatorNotification = false;
				//////////////////////////////////////////////////////////
				//ショップ
				this.shops = [];
				for (var i = 0; i < shopData.length; i++)
				{
					var	shop = new Shop();
					shop.data = shopData[i];	
					this.shops.push(shop);
				}
				//////////////////////////////////////////////////////////
				//ショップ
				this.sushiShops = [];
				this.goldenSushiShops = [];
				//////////////////////////////////////////////////////////
				//実績
				this.achievements = [];
				for (var i = 0; i < achievementData.length; i++)
				{
					var	achievement = new Achievement();
					achievement.data = achievementData[i];
					
		achievement.id = achievement.data.id;
		achievement.name = achievement.data.name;
		achievement.description = achievement.data.description;		
					
					
					this.achievements.push(achievement);
				}
				this.achievementNotificationNum = 0;
				
				//////////////////////////////////////////////////////////
				//Tick
				this.fps1LastTickTime = 0;
				this.fps2LastTickTime = 0;
				this.fps3LastTickTime = -60;
				this.fps1Count = 0;
				this.fps2Count = 0;
				this.fps3Count = 0;
				this.bgLastTickTime = 0;
			
				//////////////////////////////////////////////////////////
				//パーティクル
				this.bgParticles = [];
				for (let i = 0; i < 50; i++)
				{
					let clip = new lib.SushiEffectMC();
					exportRoot.BgMC.addChild(clip);
					this.bgParticles.push(clip);
					clip.visible = false;
				}
				this.clickParticles = [];
				for (let i = 0; i < 30; i++)
				{
					let clip = new lib.SushiEffectMC();
					exportRoot.addChild(clip);
					this.clickParticles.push(clip);
					clip.visible = false;
				}
			
				//////////////////////////////////////////////////////////
				//通知
				this.notifications = [];
			
				//////////////////////////////////////////////////////////
				//Debug
				this.Debug_isSpeed = false;
				this.Debug_isMemory = false;
				this.Debug_isSound = true;
				this.Debug_isBGM = true;
		    }
		}
		
		main = new Main();
		//////////////////////////////////////////////////////////
		//Game
		//寿司の追加
		main.AddSushi = function(value) 
		{
			if(this.Debug_isSpeed)
				value = value * 1000;
			
			this.sushi += value;
			this.totalSushi += value;
			this.sushiAdd += value;
			this.SushiDisplayUdates();
			this.AddBGParticle();
		}
		
		//寿司の消費、生産合計に影響しない
		main.UseSushi = function(value) 
		{
			this.sushi -= value;
			//this.sushiAdd -= value;
			this.SushiDisplayUdates();
		}
		
		//所持寿司の表示更新
		main.SushiDisplayUdates = function() 
		{
			exportRoot.HeaderMC.Sushi_O.text = FormatNumber(main.sushi, 1, 2) + " pieces";
		}
		
		//クリック生産量の更新
		main.TouchSps = function()
		{
			var mult = 1;
			var add = 1;
			
			for (var i = 0; i < this.upgrades.length; i++)
			{
				var upgrade = this.upgrades[i];
				if(!upgrade.posession)
					continue;
			
				switch (upgrade.operationType)
				{
					case 1:
						mult *= upgrade.operationValue;
						break;
					case 2:
						add += upgrade.operationValue;
						break;
					default:
						continue;
				}
			}
			return (add * mult + main.sushiPs * main.click_cps_boost) * main.global_multiplier;
		}
		
		//自動生産の更新
		main.CalculateGains = function()
		{
			this.sushiPs = 0;
			for (var i = 0; i < this.generators.length; i++)
			{
				var generator = this.generators[i];
				generator.CalculateSps();
				generator.storedTotalSps = generator.posession * generator.storedSps;
				this.sushiPs += generator.storedTotalSps;
			}
			exportRoot.HeaderMC.Sps_O.text = "per Second : " + FormatNumber(this.sushiPs, 1, 2) + " pieces";
		}
		
		//ジェネレータの購入
		main.BuyGenerator = async function(generator)
		{
			if(this.sushi < generator.storedCost)
				return;
			
			//----------------------------------------------
			//仮想的に購入
			this.buyGeneratorTask++;
			this.UseSushi(generator.storedCost);
			generator.posession++;
			generator.CalculateCost();
			main.CalculateGains();
			main.touchSps = main.TouchSps();
			generator.clip.cost_O.text = FormatNumber(generator.storedCost, 1, 0);
			generator.clip.posession.text = generator.posession;
			
		//todo
		this.generatorNum++;
		this.CheckAchievement_Generator();
			
			main.PlaySE("generator");
			//----------------------------------------------
			//購入
			try {
				console.log("API.現在の寿司の更新");
				//寿司の差分を更新
				await main.API_Request({
					url: '/sushi/add',
					method: 'POST',
					data: {
						amount: this.sushiAdd
					}
				});
				this.sushiAdd = 0;
			
				console.log("API.ジェネレーター購入");
				//ジェネレーター購入
				await main.API_Request({
					url: '/generator/' + generator.id + '/purchase',
					method: 'POST'
				});
			} catch (error) {
					console.error("ジェネレーター購入エラー", error);
				
					exportRoot.Mask3MC.visible = true;
				
					console.log("API.自身のユーザー情報を得る");
					API_userData = await main.API_Request({
						url: '/user/me'
					});
		
					console.log("API.ジェネレーター取得");
					API_generatorsData = await main.API_Request({
						url: '/generator'
					});
				
					for (var i = 0; i < API_generatorsData["items"].length; i++)
					{
						let _generator = main.generators[i];
						_generator.available = API_generatorsData["items"][i].available;
						_generator.posession = Number(API_generatorsData["items"][i].posession);
						_generator.basePrice = Number(API_generatorsData["items"][i].basePrice);
						_generator.nextPrice = Number(API_generatorsData["items"][i].nextPrice);
						_generator.clip.cost_O.text = FormatNumber(_generator.storedCost, 1, 0);
						_generator.clip.posession.text = _generator.posession;
					}			
				
					main.touchSps = Number(API_userData.sushiPerClick);
					main.sushi = Number(API_userData["user"].currentSushiCount);
					main.totalSushi = Number(API_userData["user"].totalSushiCount);
					main.SushiDisplayUdates();
				
					exportRoot.Mask3MC.visible = false;
					exportRoot.MessageMC.Open( "通信エラーです");
			}
		
		}
		
		//ジェネレーターの価格更新
		main.CalculateGeneratorCost = function()
		{
			for (var i = 0; i < this.generators.length; i++)
			{
				this.generators[i].CalculateCost();
			}
		}
		
		//アップグレードの購入
		main.BuyUpgrade = async function(upgrade)
		{
			if(this.sushi < upgrade.price)
				return;
		
			//----------------------------------------------
			//仮想的に購入
			this.UseSushi(upgrade.price);
			upgrade.posession = true;
			this.CalculateGains();
			this.RebuildStore();
			this.touchSps = this.TouchSps();
			exportRoot.UpgradePanelMC.Reset();
			
		//todo
		this.upgradeNum++;
		this.AddAchievement();
		this.CheckAchievement_Generator();
			
			main.PlaySE("generator");
			//----------------------------------------------
			//購入
			try {
				console.log("API.現在の寿司の更新");
				//寿司の差分を更新
				await main.API_Request({
					url: '/sushi/add',
					method: 'POST',
					data: {
						amount: this.sushiAdd
					}
				});
				this.sushiAdd = 0;
			
				console.log("API.アップグレード購入");
				//ジェネレーター購入
				await main.API_Request({
					url: '/upgrade/' + upgrade.id + '/purchase',
					method: 'POST'
				});
			} catch (error) {
				console.error("アップグレード購入エラー", error);
			
				exportRoot.Mask3MC.visible = true;
			
				console.log("API.自身のユーザー情報を得る");
				API_userData = await main.API_Request({
					url: '/user/me'
				});
		
				this.touchSps = Number(API_userData.sushiPerClick);
				this.sushi = Number(API_userData["user"].currentSushiCount);
				this.totalSushi = Number(API_userData["user"].totalSushiCount);
				this.SushiDisplayUdates();
				this.CalculateGains();
				this.RebuildStore();
				this.touchSps = this.TouchSps();
				exportRoot.Mask3MC.visible = false;
				exportRoot.MessageMC.Open( "通信エラーです");
			}
		
			try {
				console.log("API.アップグレード取得");
				API_upgradesData = await main.API_Request({
					url: '/upgrade'
				});
			
				for (let i = 0; i < API_upgradesData["items"].length; i++)
				{
					let _upgrade = this.upgrades[i];
					_upgrade.available = API_upgradesData["items"][i].available;
					_upgrade.posession = API_upgradesData["items"][i].posession;
				}
				this.RebuildStore();
			} catch (error) { }
		}
		
		main.RebuildGenerator = function()
		{
			for (var i = 0; i < main.generators.length; i++)
			{
				var generator = main.generators[i];
				if(main.sushi >= generator.availableSushiCount)
				{
					//0:初期、1:表示、2:バッジ表示、3:バッジ削除済み
					if(generator.posession > 0)
					{
						generator.doddState = 3;
						
					}
					else if(generator.doddState == 0)
					{
						generator.doddState = 2;
						this.generatorNotification = true;
						exportRoot.FooterMC.GeneratorDoddMC.visible = true;				
					}
				}
			}
		}
		
		main.GetGenerator = function(id)
		{
			for (var i = 0; i < main.generators.length; i++)
			{
				if(main.generators[i].id == id)
					return main.generators[i];
			}
		}
		
		main.RebuildStore = function()
		{
			//var isRebuild = false;
			this.upgradeStore = [];
			for (let i = 0; i < this.upgrades.length; i++)
			{
				let upgrade = this.upgrades[i];
				/*
				//ジェネレーターの所持数による開放
				if(upgrade.availableHasGeneratorMstId > 0)
				{
					if(upgrade.availableHasGeneratorCount > main.GetGenerator(upgrade.availableHasGeneratorMstId).posession)
						continue;
				}
			
				//生成寿司数による解放
				if(upgrade.availableSushiCount > main.totalSushi)
					continue;
		
				//条件を満たせた場合の処理する
				this.upgradeStore.push(upgrade);
					
				//0:初期、1:表示、2:バッジ表示、3:バッジ削除済み
				if(upgrade.doddState == 0)
				{
					upgrade.doddState = 1;
					isRebuild = true;
				}
				
				if(upgrade.doddState == 1 && main.sushi >= upgrade.price)
				{
					upgrade.doddState = 2;
					this.upgradeNotification = true;
					exportRoot.FooterMC.UpgradeDoddMC.visible = true;
				}
				*/
				
				if(!upgrade.available)
					continue;
				
				if(upgrade.posession)
					continue;
				
				
		
			
							
				
				this.upgradeStore.push(upgrade);
			}
		
			//if(isRebuild && !this.upgradeNotification)
			//	exportRoot.UpgradePanelMC.Reset();
		}
		
		//寿司の同期
		main.SushiUpdate = async function()
		{
			try {
				console.log("API.現在の寿司の更新");
				await main.API_Request({
					url: '/sushi/add',
					method: 'POST',
					data: {
						amount: this.sushiAdd
					}
				});	
				this.sushiAdd = 0;
			} catch (error) {
				console.error("現在の寿司の更新エラー", error);
			}
		}
		
		main.MainTick = function(event)
		{
			//todoオフライン時の処理が入ってないよ！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！
			
			this.fps1Count += event.delta;
			if (this.fps1Count >= 1000 / 1)
			{
				//delta
				var now = createjs.Ticker.getTime() * 0.001;
				var delta = now - this.fps1LastTickTime;
				this.fps1LastTickTime = now;
				this.fps1Count = 0;
				
				this.CalculateGains();
				this.RebuildStore();
				this.BGScroll();
				this.RebuildGenerator();
				this.Debug_Memory();
			}
			
			this.fps2Count += event.delta;
			if (this.fps2Count >= 1000 / 10)
			{
				//delta
				var now = createjs.Ticker.getTime() * 0.001;
				var delta = now - this.fps2LastTickTime;
				this.fps2LastTickTime = now;
				this.fps2Count = 0;
				
				for (var i = 0; i < this.generators.length; i++)
				{
					this.generators[i].totalSushies += this.generators[i].storedTotalSps * delta;
				}
		
				var ammount = this.sushiPs * delta + this.fractionSps;
				this.fractionSps = ammount - Math.floor(ammount);
				ammount -= this.fractionSps;
		
				if(ammount > 0)
					this.AddSushi(ammount);
			}
		
			{
				let now = createjs.Ticker.getTime() * 0.001;
				if (now - this.fps3LastTickTime >= 60)
				{
					this.fps3LastTickTime = now;
					console.log("API.最新ログイン日時を更新");
					main.API_Request({
						url: '/user/online',
						method: 'POST'
					});
					//todoオートセーブは切ってあるよ！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！
					//main.SushiUpdate();
				}
		
			}
		}
		//////////////////////////////////////////////////////////
		//Debug
		this.DebugPanelMC.ContentMC.SpeedButtonMC.on("click", function(evt) {
			main.Debug_isSpeed = !main.Debug_isSpeed;
			this.status.text = main.Debug_isSpeed ? "AddSushi*100" : "Normal";
			COOKIES.setCookie('debug_speed', main.Debug_isSpeed ? "1" : "0", 30);
		});
		
		this.DebugPanelMC.ContentMC.MemoryButtonMC.on("click", function(evt) {
			main.Debug_isMemory = !main.Debug_isMemory;
			this.status.text = main.Debug_isMemory ? "ViewMemory" : "HiddenMemory";
			COOKIES.setCookie('debug_memory', main.Debug_isMemory ? "1" : "0", 30);
		});
		
		main.Debug_Init = function()
		{
			this.Debug_isSpeed = COOKIES.getCookie('debug_speed') == "1";
			exportRoot.DebugPanelMC.ContentMC.SpeedButtonMC.status.text = main.Debug_isSpeed ? "AddSushi*100" : "Normal";
		
			this.Debug_isMemory = COOKIES.getCookie('debug_memory') == "1";
			exportRoot.DebugPanelMC.ContentMC.MemoryButtonMC.status.text = main.Debug_isMemory ? "ViewMemory" : "HiddenMemory";
		}
		
		main.Debug_Memory = function()
		{
			if(this.Debug_isMemory)
			{
				exportRoot.HeaderMC.debug.visible = true;
				exportRoot.HeaderMC.debug.text = "使用可能 : ";
				exportRoot.HeaderMC.debug.text += performance.memory.jsHeapSizeLimit.toLocaleString();
				exportRoot.HeaderMC.debug.text += "\n";
				exportRoot.HeaderMC.debug.text += "割り当て : ";
				exportRoot.HeaderMC.debug.text += performance.memory.totalJSHeapSize.toLocaleString();
				exportRoot.HeaderMC.debug.text += "\n";
				exportRoot.HeaderMC.debug.text += "使用中 : ";
				exportRoot.HeaderMC.debug.text += performance.memory.usedJSHeapSize.toLocaleString();
			}
			else
			{
				exportRoot.HeaderMC.debug.visible = false;
			}
		}
		
		////////////////////////
		
		this.DebugPanelMC.ContentMC.ClearButtonMC.status.text = "Clear";
		this.DebugPanelMC.ContentMC.ClearButtonMC.on("click", function(evt) {
			exportRoot.DebugPanelMC.ContentMC.log.text = "";
		});
		main.log = function(str)
		{
			exportRoot.DebugPanelMC.ContentMC.log.text += str + "\n";
		}
		
		if(isMobile())
		{
			window.onerror = function(message, source, lineno, colno, error) {
				main.log(`Error: ${message}\nLine: ${lineno}`);
				return true;
			};
		
			window.addEventListener('unhandledrejection', function(event) {
				main.log(`Unhandled Promise Rejection: ${event.reason}`);
			});
		}
		//////////////////////////////////////////////////////////
		//Layout
		//1125 * 2436
		this.canvasScaleX = document.documentElement.clientWidth / 1125;
		this.canvasScaleY = document.documentElement.clientHeight / 2436;
		
		this.BgMC.scaleX = this.canvasScaleX;
		this.BgMC.scaleY = this.canvasScaleY;
		
		this.HeaderMC.scaleX = this.canvasScaleX;
		this.HeaderMC.scaleY = this.canvasScaleX;
		
		this.FooterMC.scaleX = this.canvasScaleX;
		this.FooterMC.scaleY = this.canvasScaleX;
		this.FooterMC.y = 2436 * this.canvasScaleY;
		
		this.UpperBGMC.scaleX = this.canvasScaleX;
		this.UpperBGMC.scaleY = this.canvasScaleX;
		
		this.UnderBGMC.scaleX = this.canvasScaleX;
		this.UnderBGMC.scaleY = this.canvasScaleX;
		this.UnderBGMC.y = 2436 * this.canvasScaleY;
		
		this.MaskMC.visible = false;
		this.Mask2MC.visible = false;
		this.Mask3MC.visible = false;
		this.Block = function(){}
		this.Mask3MC.addEventListener("click", this.Block.bind(this));
		
		this.FooterMC.AchievementBadgeMC.visible = false;
		this.FooterMC.GeneratorDoddMC.visible = false;
		this.FooterMC.UpgradeDoddMC.visible = false;
		
		this.BgMC.SushiBGScrollMC.BG1MC.visible = false;
		this.BgMC.SushiBGScrollMC.BG2MC.visible = false;
		this.BgMC.SushiBGScrollMC.BG3MC.visible = false;
		
		this.InviteButtonMC.scaleX = this.canvasScaleX;
		this.InviteButtonMC.scaleY = this.canvasScaleX;
		this.InviteButtonMC.x = 920 * this.canvasScaleX;
		this.InviteButtonMC.y = 300 * this.canvasScaleX;
		
		this.LodingMC.scaleX = this.canvasScaleX;
		this.LodingMC.scaleY = this.canvasScaleY;
		
		this.LodingMC.addEventListener("click", function() {
			console.log("Click LodingMC");
		}.bind(this));
		//////////////////////////////////////////////////////////
		//Effect
		main.AddBGParticle = function()
		{
			var now = createjs.Ticker.getTime() * 0.001;
			if(this.bgLastTickTime + 0.1 < now)
				this.bgLastTickTime = now;
			else
				return;
			
			var particle = null;
			for (var i = 0; i < this.bgParticles.length; i++)
			{
				if(!this.bgParticles[i].visible)
				{
					particle = this.bgParticles[i];
					break;
				}
			}
		
			if(particle == null)
				return;
		
			particle.visible = true;
			particle.x = Math.random() * 1125;	
			particle.y = 200;
			particle.rotation = Math.random() * 360;	
			particle.alpha = 1;
			
			document.documentElement.clientWidth / 1125;
			createjs.Tween.get(particle)
				.to({ y: 2535 * 0.9, rotation : particle.rotation + (0.5 - Math.random()) * 300}, 6000, createjs.Ease.linear)
				.call(() => {
				particle.visible = false;
		    });
		
			if (this.sushiPs < 50)
			{
				createjs.Tween.get(particle)
					.wait(3500)
					.to({alpha : 0}, 2500, createjs.Ease.linear);
			}
			//linear,sineIn
		}
		
		main.BGScroll = function()
		{
			if (this.sushiPs >= 1000)
			{
				exportRoot.BgMC.SushiBGScrollMC.BG1MC.visible = false;
				exportRoot.BgMC.SushiBGScrollMC.BG2MC.visible = false;
				exportRoot.BgMC.SushiBGScrollMC.BG3MC.visible = true;
			}		
			else if (this.sushiPs >= 500)
			{
				exportRoot.BgMC.SushiBGScrollMC.BG1MC.visible = false;
				exportRoot.BgMC.SushiBGScrollMC.BG2MC.visible = true;
				exportRoot.BgMC.SushiBGScrollMC.BG3MC.visible = false;
			}
			else if (this.sushiPs >= 50)
			{
				exportRoot.BgMC.SushiBGScrollMC.BG1MC.visible = true;
				exportRoot.BgMC.SushiBGScrollMC.BG2MC.visible = false;
				exportRoot.BgMC.SushiBGScrollMC.BG3MC.visible = false;
			}
		}
		
		main.InitBGScroll = function()
		{
			exportRoot.BgMC.SushiBGScrollMC.y = 0;
			createjs.Tween.get(exportRoot.BgMC.SushiBGScrollMC, {loop: true})
			.to({ y: (1125 * 1.0) }, 3500, createjs.Ease.linear);	
		}
		
		//////////////////////////////////////////////////////////
		//BGM
		var bgm = COOKIES.getCookie('bgm');
		main.bgm = (bgm =="") ? main.bgm : Number(bgm);
		COOKIES.setCookie('bgm', main.bgm, 30);
		
		var se = COOKIES.getCookie('se');
		main.se = (se =="") ? main.se : Number(se);
		COOKIES.setCookie('se', main.se, 30);
		
		function resumeAudioContext(event)
		{
			window.removeEventListener('click', resumeAudioContext);
			window.removeEventListener('touchstart', resumeAudioContext);
			main.PlayBGM();
		}
		window.addEventListener('click', resumeAudioContext);
		window.addEventListener('touchstart', resumeAudioContext);
		
		main.PlayBGM = function()
		{
			if(this.bgm > 0)
			{
				if(main.bgm_instance === null)
					main.bgm_instance = createjs.Sound.play("bgm", {'interrupt':createjs.Sound.INTERRUPT_EARLY,  'loop': -1, 'volume': this.bgm});
				else
					main.bgm_instance.volume = this.bgm;
			}
			else
			{
				if(main.bgm_instance !== null)
					main.bgm_instance.volume = 0;
			}
		}
		
		main.PlaySE = function(id)
		{
			if(this.se > 0)
				createjs.Sound.play(id, {'interrupt':createjs.Sound.INTERRUPT_EARLY,  'loop': 0, 'volume': this.se});
		}
		//////////////////////////////////////////////////////////
		//Achievement
		main.AddAchievement = function(achievement)
		{
			this.achievementNotificationNum++;
			exportRoot.FooterMC.AchievementBadgeMC.visible = true;
			exportRoot.FooterMC.AchievementBadgeMC.notification.text = this.achievementNotificationNum;
		}
		
		main.RemoveAchievement = function()
		{
			this.achievementNotificationNum--;
			if(this.achievementNotificationNum <= 0)
				exportRoot.FooterMC.AchievementBadgeMC.visible = false;
			exportRoot.FooterMC.AchievementBadgeMC.notification.text = this.achievementNotificationNum;
		}
		
		//実績、ジェネレーター・アップグレード
		main.CheckAchievement_Generator = function(generator)
		{
			for (var i = 0; i < this.achievements.length; i++)
			{
				var achievement = this.achievements[i];
				if(achievement.unlock == true) continue;
				switch (achievement.data.type)
				{
					case 1://ジェネレーターの数
						if(!(this.generatorNum >= achievement.data.conditions1)) continue;
						break;
					case 2://アップグレードの数
						if(!(this.upgradeNum >= achievement.data.conditions1)) continue;
						break;
					case 3://アップグレードとジェネレーターの数
						if(!(this.upgradeNum >= achievement.data.conditions1 && this.generatorNum >= achievement.data.conditions1
						)) continue;
						break;
					default:
						continue;
				}
				achievement.unlock = true;
			
				this.AddNotification("実績が解除されました\n" + achievement.description ,"images/Icon/" + achievement.dir + "/" + achievement.id + ".png");
				this.AddAchievement(achievement);
			}
		}
		//////////////////////////////////////////////////////////
		//Panel
		
		//Layout
		this.page = 0;
		this.GeneratorPanelMC.visible = false;
		this.UpgradePanelMC.visible = false;
		this.ShopPanelMC.visible = false;
		this.AchievementPanelMC.visible = false;
		
		//GeneratorPanel
		this.FooterMC.GeneratorButtonMC.addEventListener("click", ClickHandler_GeneratorPanelOpen.bind(this));
		function ClickHandler_GeneratorPanelOpen()
		{
			this.PanelOpen(1);
		}
		this.GeneratorPanelMC.scaleX = this.canvasScaleX;
		this.GeneratorPanelMC.scaleY = this.canvasScaleX;
		this.GeneratorPanelMC.x = 0;
		this.GeneratorPanelMC.y = 2436 * this.canvasScaleY -300 * this.canvasScaleX + 914 * this.canvasScaleX;
		this.GeneratorPanelMC.visible = false;	
		
		//UpgradePanel
		this.FooterMC.UpgradeButtonMC.addEventListener("click", ClickHandler_UpgradePanelOpen.bind(this));
		function ClickHandler_UpgradePanelOpen()
		{
			this.PanelOpen(2);
		}
		this.UpgradePanelMC.scaleX = this.canvasScaleX;
		this.UpgradePanelMC.scaleY = this.canvasScaleX;
		this.UpgradePanelMC.x = 0;
		this.UpgradePanelMC.y = 2436 * this.canvasScaleY -300 * this.canvasScaleX;
		this.UpgradePanelMC.visible = false;	
		
		//ShopPanel
		this.FooterMC.ShopButtonMC.addEventListener("click", ClickHandler_ShopPanelOpen.bind(this));
		function ClickHandler_ShopPanelOpen()
		{
			this.PanelOpen(3);
		}
		this.ShopPanelMC.scaleX = this.canvasScaleX;
		this.ShopPanelMC.scaleY = this.canvasScaleX;
		this.ShopPanelMC.x = 0;
		this.ShopPanelMC.y = 2436 * this.canvasScaleY -300 * this.canvasScaleX;
		this.ShopPanelMC.visible = false;	
		
		//AchievementPanel
		this.FooterMC.AchievementButtonMC.addEventListener("click", ClickHandler_AchievementPanelOpen.bind(this));
		function ClickHandler_AchievementPanelOpen()
		{
			this.PanelOpen(4);
		}
		this.AchievementPanelMC.scaleX = this.canvasScaleX;
		this.AchievementPanelMC.scaleY = this.canvasScaleX;
		this.AchievementPanelMC.x = 0;
		this.AchievementPanelMC.y = 2436 * this.canvasScaleY -300 * this.canvasScaleX;
		this.AchievementPanelMC.visible = false;	
		
		//DebugPanel
		this.HeaderMC.DebugButtonMC.addEventListener("click", ClickHandler_DebugPanelOpen.bind(this));
		function ClickHandler_DebugPanelOpen()
		{
			this.PanelOpen(5);
		}
		this.DebugPanelMC.scaleX = this.canvasScaleX;
		this.DebugPanelMC.scaleY = this.canvasScaleX;
		this.DebugPanelMC.x = 0;
		this.DebugPanelMC.y = 2436 * this.canvasScaleY -300 * this.canvasScaleX;
		this.DebugPanelMC.visible = false;	
		
		this.PanelOpen = function (_page)
		{
			switch (this.page)
			{
				case 1:
					this.Close(this.GeneratorPanelMC);
					this.GeneratorPanelMC.Close();
					break;
				case 2:
					this.Close(this.UpgradePanelMC);
					this.UpgradePanelMC.Close();
					break;
				case 3:
					this.Close(this.ShopPanelMC);
					this.ShopPanelMC.Close();
					break;
				case 4:
					this.Close(this.AchievementPanelMC);
					this.AchievementPanelMC.Close();
					if(this.AchievementDesciptionMC	.visible)
						this.AchievementDesciptionMC.Close();
					break;
				case 5:
					this.Close(this.DebugPanelMC);
					this.DebugPanelMC.Close();
					break;
		    }	
		
			if(this.page != _page)
			{
				switch (_page)
				{
					case 1:
						this.Open(this.GeneratorPanelMC, false);
						this.GeneratorPanelMC.Open();
						break;
					case 2:
						this.Open(this.UpgradePanelMC, false);
						this.UpgradePanelMC.Open();
						break;
					case 3:
						this.Open(this.ShopPanelMC, true);
						this.ShopPanelMC.Open();
						break;
					case 4:
						this.Open(this.AchievementPanelMC, false);
						this.AchievementPanelMC.Open();
						break;
					case 5:
						this.Open(this.DebugPanelMC, true);
						this.DebugPanelMC.Open();
						break;
				}
				this.page = _page;
		    }
			else
			{
				this.page = 0;
			}
		}
		
		this.Close = function (_targetMC)
		{
			//パネルの移動
			createjs.Tween.get(_targetMC, { override: true })
			.to({ x: 0, y: 2436 * this.canvasScaleY -300 * this.canvasScaleX + 914 * this.canvasScaleX }, 250, createjs.Ease.backInOut)
			.call(() => {
				_targetMC.visible = false;
		    });
		
			//寿司の移動
			createjs.Tween.get(this.SushiMC, { override: true })
			.to({ y: document.documentElement.clientHeight / 2 }, 250, createjs.Ease.cubicInOut);
		
			//背景も動かす場合
			//createjs.Tween.get(this.BgMC, { override: true })
			//.to({ y: 0 }, 250, createjs.Ease.backInOut);
		}
		
		this.Open = function (_targetMC, isFull)
		{
			//初期位置
			_targetMC.y =  2436 * this.canvasScaleY -300 * this.canvasScaleX + 914 * this.canvasScaleX;
			_targetMC.visible = true;	
			
			if(isFull)
			{
				//パネルの移動
				var y = (914 * this.canvasScaleX) + (278 * this.canvasScaleX);		
				createjs.Tween.get(_targetMC, { override: true })
				.to({ x: 0, y: y }, 250, createjs.Ease.bounceOut);
			}
			else
			{
				//パネルの移動
				createjs.Tween.get(_targetMC, { override: true })
					.to({ x: 0, y: 2436 * this.canvasScaleY -300 * this.canvasScaleX }, 250, createjs.Ease.bounceOut);
			
				//寿司の移動
				var y = ((2436 * this.canvasScaleY -300 * this.canvasScaleX -914 * this.canvasScaleX)
					- (278 * this.canvasScaleX)) / 2 + (278 * this.canvasScaleX);
				createjs.Tween.get(this.SushiMC, { override: true })
				.to({ y: y }, 250, createjs.Ease.cubicInOut);
			}
		
			//背景も動かす場合
			//createjs.Tween.get(this.BgMC, { override: true })
			//.to({ y: y - document.documentElement.clientHeight / 2 }, 250, createjs.Ease.expoOut);
		}
		
		//////////////////////////////////////////////////////////////////
		//Invite
		this.InviteButtonMC.addEventListener("click", ClickHandler_InviteOpen.bind(this));
		function ClickHandler_InviteOpen()
		{
			this.InviteDesciptionMC.Open();
		}
		
		//////////////////////////////////////////////////////////
		//Option
		this.HeaderMC.OptionButtonMC.addEventListener("click", ClickHandler_OptionPanelOpen.bind(this));
		function ClickHandler_OptionPanelOpen()
		{
			this.ConfigDesciptionMC.Open();
		}
		//////////////////////////////////////////////////////////
		//Notification
		//this.NotificationMC.message_O = new Outline(lib, exportRoot.NotificationMC.message, 5, "#000000", "#FFFFFF");
		this.NotificationMC.bitmap = null;
		exportRoot.NotificationMC.visible = false;
		
		this.NotificationMC.scaleX = this.canvasScaleX;
		this.NotificationMC.scaleY = this.canvasScaleX;
		this.NotificationMC.x = 0;
		this.NotificationMC.y = 0 * this.canvasScaleY;
		
		main.AddNotification = function(messsage, image)
		{
			var notification = new Notification();
			notification.message = messsage;
			notification.image = image;
			
			this.notifications.push(notification);
			
			if(!exportRoot.NotificationMC.visible)
				this.CreateNotification();
		}
		
		main.RemoveNotification = function()
		{
			this.notifications.shift();
			exportRoot.NotificationMC.visible = false;
			
			if(this.notifications.length > 0)
				this.CreateNotification();
		}
		
		main.CreateNotification = function()
		{
			exportRoot.NotificationMC.visible = true;
			exportRoot.NotificationMC.y = -300 * exportRoot.canvasScaleY;
			exportRoot.NotificationMC.alpha = 1;
			
			createjs.Tween.get(exportRoot.NotificationMC, { override: true })
				.to({ x: 0, y : 0}, 500, createjs.Ease.quadOut)//quadOut quadIn
				.wait(1500)
				.to({ alpha: 0 }, 500, createjs.Ease.linear)
				.call(() => {
					this.RemoveNotification();
				});
		
			//exportRoot.NotificationMC.message_O.text = this.notifications[0].message;
			exportRoot.NotificationMC.message.text = this.notifications[0].message;
			//SetWrapOutlineText(exportRoot.NotificationMC.message_O);		
			
			if( exportRoot.NotificationMC.bitmap != null)
			{
				exportRoot.NotificationMC.removeChild(exportRoot.NotificationMC.bitmap);
				exportRoot.NotificationMC.bitmap == null;
			}	
			
			//アイコン生成
			exportRoot.NotificationMC.bitmap = new createjs.Bitmap(this.notifications[0].image);
			exportRoot.NotificationMC.addChild(exportRoot.NotificationMC.bitmap);
			exportRoot.NotificationMC.bitmap.x = 72;
			exportRoot.NotificationMC.bitmap.y = 55;
			exportRoot.NotificationMC.bitmap.scaleX = 208 / 64;
			exportRoot.NotificationMC.bitmap.scaleY = 208 / 64;
		}
		//////////////////////////////////////////////////////////
		//API
		var authorization = window.Telegram.WebApp.initData;
		if(!isMobile())
			authorization = "query_id=AAHjfQgwAwAAAON9CDDlFPkV&user=%7B%22id%22%3A7248313827%2C%22first_name%22%3A%22NEETStyle%22%2C%22last_name%22%3A%22%22%2C%22language_code%22%3A%22ja%22%2C%22allows_write_to_pm%22%3Atrue%7D&auth_date=1726546734&hash=ef00201ae2db1cd90e423aefc1574db5a33fa814815be426f5d9ad1a96f25b4a";
		var api_host = "https://clicker-api.tomoya-ishisaka.workers.dev";
		
		main.API_Request = function(options) {
		    const fullUrl = api_host + options.url;
		    const maxAttempts = options.maxAttempts || 3;
		    let attempts = 0;
		
		    // $.ajaxをPromise化する関数
		    function ajaxPromise(finalOptions) {
		        return new Promise(function(resolve, reject) {
		            $.ajax({
		                ...finalOptions,
		                success: function(response) {
		                    resolve(response);
		                },
		                error: function(jqXHR, textStatus, errorThrown) {
		                    if (textStatus === "timeout") {
		                        reject({ reason: "timeout", jqXHR }); // タイムアウトの場合
		                    } else {
		                        reject({ reason: "other", jqXHR });  // タイムアウト以外
		                    }
		                }
		            });
		        });
		    }
		
		    return new Promise(async function(resolve, reject) {
		        const requestWithRetry = async () => {
		            while (attempts < maxAttempts) {
		                attempts++;
		                try {
		                    var defaultOptions = {
		                        method: 'GET',
		                        dataType: 'json',
		                        contentType: 'application/json',
		                        headers: {
		                            'Authorization': authorization
		                        }
		                    };
		                    var finalOptions = $.extend({}, defaultOptions, options);
		                    finalOptions.url = api_host + options.url;
		
		                    if (options.data) {
		                        finalOptions.data = JSON.stringify(options.data);
		                    }
		
		                    // $.ajaxのPromise化された結果をawaitで待機
		                    const response = await ajaxPromise(finalOptions);
		                    resolve(response);  // 成功した場合はPromiseを解決
		                    return;  // 成功したらループを抜ける
		                } catch (error) {
		                    if (error.reason === "timeout") {
		                        console.log(`試行 ${attempts} 回目失敗: タイムアウト`);
		                    } else {
		                        // タイムアウト以外のエラーは即座に失敗とする
		                        reject(`APIリクエストが失敗しました。エラー: ${error.jqXHR.statusText}`);
		                        return;
		                    }
		
		                    if (attempts >= maxAttempts) {
		                        reject(`APIリクエストが${maxAttempts}回失敗しました。エラー: タイムアウト`);
		                        return;
		                    }
		
		                    // タイムアウトの場合のみ1秒間待機して再試行
		                    await new Promise(resolve => setTimeout(resolve, 1000));
		                }
		            }
		        };
		
		        await requestWithRetry();
		    });
		}
		
		//////////////////////////////////////////////////////////
		//Init
		var API_userData;
		var API_generatorsData;
		var API_upgradesData;
		var API_sushiShopData;
		var API_goldenSushiShopData;
		
		this.fetchSequentialAPIs = async function()
		{
		    try {
				console.log("API.ジェネレーター取得");
		        API_generatorsData = await main.API_Request({
		            url: '/generator'
		        });
				console.log(API_generatorsData);
			
				console.log("API.アップグレード取得");
		        API_upgradesData = await main.API_Request({
		            url: '/upgrade'
		        });
				console.log(API_upgradesData);
			
				console.log("API.寿司ショップ取得");
		        API_sushiShopData = await main.API_Request({
		            url: '/market/sushi'
		        });
				console.log(API_sushiShopData);
			
				console.log("API.金寿司ショップ取得");
		        API_goldenSushiShopData = await main.API_Request({
		            url: '/market/golden-sushi'
		        });
				console.log(API_goldenSushiShopData);
			
		    } catch (error) {
		        console.error("todo:初期データロード", error);
		    }
		}
		
		//ユーザ認証
		this.UserAuthentication = async function()
		{
		    try {
				console.log("API.ユーザ情報取得");
		        API_userData = await main.API_Request({
		            url: '/user/me'
		        });
				console.log(API_userData);
		    } catch (error) {
				try {
					console.log("API.新規ユーザ登録");
					await main.API_Request({
						url: '/user/register',
						method: 'POST',
						data: {
							referralCode: null
						}
					});
					console.log("API.ユーザ情報取得");
					API_userData = await main.API_Request({
						url: '/user/me'
					});
					console.log(API_userData);
				} catch (recoveryError) {
					this.MessageMC.Open( "please wait a while and try again.");
				}
		    }
		}
		
		this.Run = async function()
		{
			await this.fetchSequentialAPIs();
			
			//////////////////////////////////////////////////////////
			//ユーザデータ
			main.touchSps = Number(API_userData.sushiPerClick);
			main.sushi = Number(API_userData["user"].currentSushiCount);
			main.goldenSushi = Number(API_userData["user"].currentGoldSushiCount);
			main.totalSushi = Number(API_userData["user"].totalSushiCount);
			main.totalGoldenSushi = Number(API_userData["user"].totalGoldSushiCount);
			main.createdAt = API_userData["user"].createdAt;
		
			//////////////////////////////////////////////////////////
			//アップグレード
			for (let i = 0; i < API_upgradesData["items"].length; i++)
			{
				var	upgrade = new Upgrade();
				upgrade.available = API_upgradesData["items"][i].available;
				upgrade.availableHasGeneratorCount = Number(API_upgradesData["items"][i].availableHasGeneratorCount);
				upgrade.availableHasGeneratorMstId = Number(API_upgradesData["items"][i].availableHasGeneratorMstId);
				upgrade.availableSushiCount = Number(API_upgradesData["items"][i].availableSushiCount);
				upgrade.description = API_upgradesData["items"][i].description;
				upgrade.id = Number(API_upgradesData["items"][i].id);
				upgrade.name = API_upgradesData["items"][i].name;
				upgrade.operationType = Number(API_upgradesData["items"][i].operationType);
				upgrade.operationValue = Number(API_upgradesData["items"][i].operationValue);
				upgrade.posession = API_upgradesData["items"][i].posession;
				upgrade.price = Number(API_upgradesData["items"][i].price);
				upgrade.targetGeneratorMstId = Number(API_upgradesData["items"][i].targetGeneratorMstId);
				upgrade.targetType = Number(API_upgradesData["items"][i].targetType);
				main.upgrades.push(upgrade);
			}
		
			//////////////////////////////////////////////////////////
			//ジェネレーター
			for (let i = 0; i < API_generatorsData["items"].length; i++)
			{
				var	generator = new Generator();
				generator.id = Number(API_generatorsData["items"][i].id);
				generator.available = API_generatorsData["items"][i].available;
				generator.availableSushiCount = Number(API_generatorsData["items"][i].availableSushiCount);	
				generator.description =  API_generatorsData["items"][i].description;
				generator.name = API_generatorsData["items"][i].name;
				generator.posession = Number(API_generatorsData["items"][i].posession);
				generator.power = Number(API_generatorsData["items"][i].power);
				generator.basePrice = Number(API_generatorsData["items"][i].basePrice);
				generator.nextPrice = Number(API_generatorsData["items"][i].nextPrice);
				generator.priceScalingFactor = Number(API_generatorsData["items"][i].priceScalingFactor);
				for (let s = 0; s < main.upgrades.length; s++)
				{
					if(main.upgrades[s].targetGeneratorMstId === null)
						continue;
					
					if(generator.id == main.upgrades[s].targetGeneratorMstId)
						generator.upgrades.push(main.upgrades[s]);
				}
				generator.CalculateSps();
				main.generators.push(generator);
			}
		
			//////////////////////////////////////////////////////////
			//寿司ショップ
			for (let i = 0; i < API_sushiShopData["items"].length; i++)
			{
				var	sushiShop = new SushiShop();
				sushiShop.id = Number(API_sushiShopData["items"][i].id);
				sushiShop.name = API_sushiShopData["items"][i].name;
				sushiShop.amount = Number(API_sushiShopData["items"][i].amount);	
				sushiShop.price =  Number(API_sushiShopData["items"][i].price);
				main.sushiShops.push(sushiShop);
			}
		
			//////////////////////////////////////////////////////////
			//金寿司ショップ
			for (let i = 0; i < API_goldenSushiShopData["items"].length; i++)
			{
				var	goldenSushiShop = new GoldenSushiShop();
				goldenSushiShop.id = Number(API_goldenSushiShopData["items"][i].id);
				goldenSushiShop.name = API_goldenSushiShopData["items"][i].name;
				goldenSushiShop.amount = Number(API_goldenSushiShopData["items"][i].amount);	
				goldenSushiShop.price =  Number(API_goldenSushiShopData["items"][i].price);
				main.goldenSushiShops.push(goldenSushiShop);
			}
		
			//////////////////////////////////////////////////////////
			//イニシャライズ
			if (createjs.Touch.isSupported())
				createjs.Touch.enable(stage);
			 
			stage.enableMouseOver(20); 
			main.CalculateGeneratorCost();	//ジェネレータの価格の更新
			main.RebuildGenerator();		//ジェネレータ一覧の更新
			main.CalculateGains();			//SushiPSの計算
			main.RebuildStore();			//ショップの一覧の更新
			main.InitBGScroll();			//背景のイニシャライズ
			main.Debug_Init();				//デバッグのイニシャライズ
			main.BGScroll();				//背景の更新
			main.Debug_Memory();			//デバッグ更新
			main.SushiDisplayUdates();		//所持寿司の表示更新
			this.GeneratorPanelMC.Create();
			this.UpgradePanelMC.Create();
			//this.AchievementPanelMC.Create();
			createjs.Ticker.addEventListener("tick", main.MainTick.bind(main));	
			this.LodingMC.visible = false;
			
			hiddenLoadingScreen();
		}
		
		this.RunApp = async function()
		{
		    await this.UserAuthentication();
			if(API_userData !== undefined)
				this.Run();
		}
		
		this.RunApp();
		
		//this.LodingMC.visible = false;
		//hiddenLoadingScreen();
	}

	// actions tween:
	this.timeline.addTween(cjs.Tween.get(this).call(this.frame_0).wait(1));

	// Game
	this.instance = new lib.ContainerMC();
	this.instance.setTransform(-641,-307.85);

	this.SushiEffectMC = new lib.SushiEffectMC();
	this.SushiEffectMC.name = "SushiEffectMC";
	this.SushiEffectMC.setTransform(-386.2,-191.3);

	this.instance_1 = new lib.DispNumMC();
	this.instance_1.setTransform(-473.75,-72.25);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.instance_1},{t:this.SushiEffectMC},{t:this.instance}]}).wait(1));

	// Message
	this.MessageMC = new lib.MessageMC();
	this.MessageMC.name = "MessageMC";
	this.MessageMC.setTransform(-2536.45,2052.1,1,1,0,0,0,562.5,103);

	this.NotificationMC = new lib.NotificationMC();
	this.NotificationMC.name = "NotificationMC";
	this.NotificationMC.setTransform(-3098.95,2207.2);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.NotificationMC},{t:this.MessageMC}]}).wait(1));

	// Loding
	this.LodingMC = new lib.LodingMC();
	this.LodingMC.name = "LodingMC";

	this.timeline.addTween(cjs.Tween.get(this.LodingMC).wait(1));

	// Mask3
	this.Mask3MC = new lib.MaskMC();
	this.Mask3MC.name = "Mask3MC";
	this.Mask3MC.setTransform(563,1218,50.0005,50.0005,0,0,0,50,50);

	this.timeline.addTween(cjs.Tween.get(this.Mask3MC).wait(1));

	// Mask2
	this.Mask2MC = new lib.MaskMC();
	this.Mask2MC.name = "Mask2MC";
	this.Mask2MC.setTransform(563,1218,50.0005,50.0005,0,0,0,50,50);

	this.timeline.addTween(cjs.Tween.get(this.Mask2MC).wait(1));

	// Desciption
	this.ConfigDesciptionMC = new lib.ConfigDesciptionMC();
	this.ConfigDesciptionMC.name = "ConfigDesciptionMC";
	this.ConfigDesciptionMC.setTransform(1672.4,-1819.4,1,1,0,0,0,521,595.5);

	this.InviteRewardDesciptionMC = new lib.InviteRewardDesciptionMC();
	this.InviteRewardDesciptionMC.name = "InviteRewardDesciptionMC";
	this.InviteRewardDesciptionMC.setTransform(-2504.95,-1852.45,1,1,0,0,0,521,492.5);

	this.InviteDesciptionMC = new lib.InviteDesciptionMC();
	this.InviteDesciptionMC.name = "InviteDesciptionMC";
	this.InviteDesciptionMC.setTransform(-1405.2,-1418.35,1,1,0,0,0,526.5,934.5);

	this.AchievementDesciptionMC = new lib.AchievementDesciptionMC();
	this.AchievementDesciptionMC.name = "AchievementDesciptionMC";
	this.AchievementDesciptionMC.setTransform(-2536.45,1594.3,1,1,0,0,0,562.5,240);

	this.ShopDesciptionMC = new lib.ShopDesciptionMC();
	this.ShopDesciptionMC.name = "ShopDesciptionMC";
	this.ShopDesciptionMC.setTransform(-1409.7,1330.2,1,1,0,0,0,522,572.5);

	this.UpgradeDesciptionMC = new lib.UpgradeDesciptionMC();
	this.UpgradeDesciptionMC.name = "UpgradeDesciptionMC";
	this.UpgradeDesciptionMC.setTransform(-1409.7,185.2,1,1,0,0,0,522,572.5);

	this.GeneratorDesciptionMC = new lib.GeneratorDesciptionMC();
	this.GeneratorDesciptionMC.name = "GeneratorDesciptionMC";
	this.GeneratorDesciptionMC.setTransform(-2453.7,185.2,1,1,0,0,0,522,572.5);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.GeneratorDesciptionMC},{t:this.UpgradeDesciptionMC},{t:this.ShopDesciptionMC},{t:this.AchievementDesciptionMC},{t:this.InviteDesciptionMC},{t:this.InviteRewardDesciptionMC},{t:this.ConfigDesciptionMC}]}).wait(1));

	// Mask
	this.MaskMC = new lib.MaskMC();
	this.MaskMC.name = "MaskMC";
	this.MaskMC.setTransform(563,1218,50.0005,50.0005,0,0,0,50,50);

	this.timeline.addTween(cjs.Tween.get(this.MaskMC).wait(1));

	// Menu
	this.HeaderMC = new lib.HeaderMC();
	this.HeaderMC.name = "HeaderMC";

	this.FooterMC = new lib.FooterMC();
	this.FooterMC.name = "FooterMC";
	this.FooterMC.setTransform(0,2436,1,1,0,0,0,0,300);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.FooterMC},{t:this.HeaderMC}]}).wait(1));

	// Panel
	this.DebugPanelMC = new lib.DebugPanelMC();
	this.DebugPanelMC.name = "DebugPanelMC";
	this.DebugPanelMC.setTransform(2368.2,3588,1,1,0,0,0,0,913);

	this.ShopPanelMC = new lib.ShopPanelMC();
	this.ShopPanelMC.name = "ShopPanelMC";
	this.ShopPanelMC.setTransform(-286.4,3588,1,1,0,0,0,2,913);

	this.AchievementPanelMC = new lib.AchievementPanelMC();
	this.AchievementPanelMC.name = "AchievementPanelMC";
	this.AchievementPanelMC.setTransform(972.55,3588,1,1,0,0,0,-0.8,913);

	this.UpgradePanelMC = new lib.UpgradePanelMC();
	this.UpgradePanelMC.name = "UpgradePanelMC";
	this.UpgradePanelMC.setTransform(-1790.7,3588,1,1,0,0,0,0,913);

	this.GeneratorPanelMC = new lib.GeneratorPanelMC();
	this.GeneratorPanelMC.name = "GeneratorPanelMC";
	this.GeneratorPanelMC.setTransform(-3098.95,3588,1,1,0,0,0,0,913);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.GeneratorPanelMC},{t:this.UpgradePanelMC},{t:this.AchievementPanelMC},{t:this.ShopPanelMC},{t:this.DebugPanelMC}]}).wait(1));

	// Invite
	this.InviteButtonMC = new lib.InviteButtonMC();
	this.InviteButtonMC.name = "InviteButtonMC";
	this.InviteButtonMC.setTransform(920,300);

	this.timeline.addTween(cjs.Tween.get(this.InviteButtonMC).wait(1));

	// Sushi
	this.SushiMC = new lib.SushiMC();
	this.SushiMC.name = "SushiMC";
	this.SushiMC.setTransform(563,1218,1,1,0,0,0,500,300);

	this.timeline.addTween(cjs.Tween.get(this.SushiMC).wait(1));

	// BG
	this.UpperBGMC = new lib.UpperBGMC();
	this.UpperBGMC.name = "UpperBGMC";

	this.UnderBGMC = new lib.UnderBGMC();
	this.UnderBGMC.name = "UnderBGMC";
	this.UnderBGMC.setTransform(0,2436,1,1,0,0,0,0,509);

	this.BgMC = new lib.bgMC();
	this.BgMC.name = "BgMC";

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.BgMC},{t:this.UnderBGMC},{t:this.UpperBGMC}]}).wait(1));

	this._renderFirstFrame();

}).prototype = p = new lib.AnMovieClip();
p.nominalBounds = new cjs.Rectangle(-2636.9,-1241.9,6132.6,9957.6);
// library properties:
lib.properties = {
	id: '969C0F3DFF839440AC4059700CCE57F9',
	width: 1125,
	height: 2436,
	fps: 30,
	color: "#FF0000",
	opacity: 1.00,
	manifest: [
		{src:"images/index_atlas_1.png", id:"index_atlas_1"}
	],
	preloads: []
};



// bootstrap callback support:

(lib.Stage = function(canvas) {
	createjs.Stage.call(this, canvas);
}).prototype = p = new createjs.Stage();

p.setAutoPlay = function(autoPlay) {
	this.tickEnabled = autoPlay;
}
p.play = function() { this.tickEnabled = true; this.getChildAt(0).gotoAndPlay(this.getTimelinePosition()) }
p.stop = function(ms) { if(ms) this.seek(ms); this.tickEnabled = false; }
p.seek = function(ms) { this.tickEnabled = true; this.getChildAt(0).gotoAndStop(lib.properties.fps * ms / 1000); }
p.getDuration = function() { return this.getChildAt(0).totalFrames / lib.properties.fps * 1000; }

p.getTimelinePosition = function() { return this.getChildAt(0).currentFrame / lib.properties.fps * 1000; }

an.bootcompsLoaded = an.bootcompsLoaded || [];
if(!an.bootstrapListeners) {
	an.bootstrapListeners=[];
}

an.bootstrapCallback=function(fnCallback) {
	an.bootstrapListeners.push(fnCallback);
	if(an.bootcompsLoaded.length > 0) {
		for(var i=0; i<an.bootcompsLoaded.length; ++i) {
			fnCallback(an.bootcompsLoaded[i]);
		}
	}
};

an.compositions = an.compositions || {};
an.compositions['969C0F3DFF839440AC4059700CCE57F9'] = {
	getStage: function() { return exportRoot.stage; },
	getLibrary: function() { return lib; },
	getSpriteSheet: function() { return ss; },
	getImages: function() { return img; }
};

an.compositionLoaded = function(id) {
	an.bootcompsLoaded.push(id);
	for(var j=0; j<an.bootstrapListeners.length; j++) {
		an.bootstrapListeners[j](id);
	}
}

an.getComposition = function(id) {
	return an.compositions[id];
}


an.makeResponsive = function(isResp, respDim, isScale, scaleType, domContainers) {		
	var lastW, lastH, lastS=1;		
	window.addEventListener('resize', resizeCanvas);		
	resizeCanvas();		
	function resizeCanvas() {			
		var w = lib.properties.width, h = lib.properties.height;			
		var iw = window.innerWidth, ih=window.innerHeight;			
		var pRatio = window.devicePixelRatio || 1, xRatio=iw/w, yRatio=ih/h, sRatio=1;			
		if(isResp) {                
			if((respDim=='width'&&lastW==iw) || (respDim=='height'&&lastH==ih)) {                    
				sRatio = lastS;                
			}				
			else if(!isScale) {					
				if(iw<w || ih<h)						
					sRatio = Math.min(xRatio, yRatio);				
			}				
			else if(scaleType==1) {					
				sRatio = Math.min(xRatio, yRatio);				
			}				
			else if(scaleType==2) {					
				sRatio = Math.max(xRatio, yRatio);				
			}			
		}
		domContainers[0].width = w * pRatio * sRatio;			
		domContainers[0].height = h * pRatio * sRatio;
		domContainers.forEach(function(container) {				
			container.style.width = w * sRatio + 'px';				
			container.style.height = h * sRatio + 'px';			
		});
		stage.scaleX = pRatio*sRatio;			
		stage.scaleY = pRatio*sRatio;
		lastW = iw; lastH = ih; lastS = sRatio;            
		stage.tickOnUpdate = false;            
		stage.update();            
		stage.tickOnUpdate = true;		
	}
}
an.handleSoundStreamOnTick = function(event) {
	if(!event.paused){
		var stageChild = stage.getChildAt(0);
		if(!stageChild.paused || stageChild.ignorePause){
			stageChild.syncStreamSounds();
		}
	}
}
an.handleFilterCache = function(event) {
	if(!event.paused){
		var target = event.target;
		if(target){
			if(target.filterCacheList){
				for(var index = 0; index < target.filterCacheList.length ; index++){
					var cacheInst = target.filterCacheList[index];
					if((cacheInst.startFrame <= target.currentFrame) && (target.currentFrame <= cacheInst.endFrame)){
						cacheInst.instance.cache(cacheInst.x, cacheInst.y, cacheInst.w, cacheInst.h);
					}
				}
			}
		}
	}
}


})(createjs = createjs||{}, AdobeAn = AdobeAn||{});
var createjs, AdobeAn;