(function (cjs, an) {

var p; // shortcut to reference prototypes
var lib={};var ss={};var img={};
lib.ssMetadata = [
		{name:"index_atlas_1", frames: [[3565,0,1042,1869],[5736,2041,516,176],[3269,2888,516,176],[5736,1453,904,153],[3787,2888,516,176],[6256,1893,148,89],[6440,1853,115,115],[6557,1885,118,66],[5736,2340,1042,889],[5736,2219,754,101],[8043,1136,120,65],[7865,1810,116,126],[7983,1823,116,126],[7234,2967,662,46],[4305,2972,662,46],[6697,0,1042,1191],[1015,2438,1125,478],[0,2438,1013,636],[2438,0,1125,2436],[0,0,2436,2436],[1015,2918,542,104],[6288,1608,374,91],[5736,1861,518,178],[5653,1227,1039,224],[7741,1810,122,122],[5736,1608,550,251],[6697,1193,1042,1145],[8043,1592,130,229],[7741,0,300,300],[7741,302,300,300],[7741,1208,214,190],[8043,1002,139,132],[7957,1208,214,190],[6288,1701,150,190],[7741,1400,214,190],[7957,1400,214,190],[2142,2802,1125,206],[7741,1934,102,63],[8101,1823,87,70],[7741,604,300,300],[7741,906,300,300],[6592,1701,90,90],[6592,1793,90,90],[4609,2526,1104,319],[4609,1539,1125,985],[2142,2438,1038,362],[7741,1592,300,128],[7741,1722,300,86],[4609,0,1042,1537],[5653,0,1042,1225],[3565,1871,1042,1015],[6780,2967,452,99],[1559,2918,542,104],[6440,1701,150,150],[4609,2847,1125,123],[8043,0,50,1000],[6780,2340,1042,625],[8095,0,50,1000]]}
];


(lib.AnMovieClip = function(){
	this.actionFrames = [];
	this.ignorePause = false;
	this.gotoAndPlay = function(positionOrLabel){
		cjs.MovieClip.prototype.gotoAndPlay.call(this,positionOrLabel);
	}
	this.play = function(){
		cjs.MovieClip.prototype.play.call(this);
	}
	this.gotoAndStop = function(positionOrLabel){
		cjs.MovieClip.prototype.gotoAndStop.call(this,positionOrLabel);
	}
	this.stop = function(){
		cjs.MovieClip.prototype.stop.call(this);
	}
}).prototype = p = new cjs.MovieClip();
// symbols:



(lib._1 = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(0);
}).prototype = p = new cjs.Sprite();



(lib._2 = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(1);
}).prototype = p = new cjs.Sprite();



(lib._2_1 = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(2);
}).prototype = p = new cjs.Sprite();



(lib._3 = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(3);
}).prototype = p = new cjs.Sprite();



(lib._4 = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(4);
}).prototype = p = new cjs.Sprite();



(lib._4_1 = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(5);
}).prototype = p = new cjs.Sprite();



(lib._5 = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(6);
}).prototype = p = new cjs.Sprite();



(lib._5_1 = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(7);
}).prototype = p = new cjs.Sprite();



(lib._6 = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(8);
}).prototype = p = new cjs.Sprite();



(lib._7 = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(9);
}).prototype = p = new cjs.Sprite();



(lib.a1 = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(10);
}).prototype = p = new cjs.Sprite();



(lib.a2 = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(11);
}).prototype = p = new cjs.Sprite();



(lib.a3 = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(12);
}).prototype = p = new cjs.Sprite();



(lib.a4 = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(13);
}).prototype = p = new cjs.Sprite();



(lib.a5 = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(14);
}).prototype = p = new cjs.Sprite();



(lib.a6 = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(15);
}).prototype = p = new cjs.Sprite();



(lib.achievementDesciption = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(16);
}).prototype = p = new cjs.Sprite();



(lib.achievementDetailBG = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(17);
}).prototype = p = new cjs.Sprite();



(lib.bg = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(18);
}).prototype = p = new cjs.Sprite();



(lib.bg1 = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(19);
}).prototype = p = new cjs.Sprite();



(lib.bg1_1 = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(20);
}).prototype = p = new cjs.Sprite();



(lib.bg2 = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(21);
}).prototype = p = new cjs.Sprite();



(lib.button_false = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(22);
}).prototype = p = new cjs.Sprite();



(lib.cell_bg1 = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(23);
}).prototype = p = new cjs.Sprite();



(lib.close = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(24);
}).prototype = p = new cjs.Sprite();



(lib.footerBG2 = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(25);
}).prototype = p = new cjs.Sprite();



(lib.generator_bg = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(26);
}).prototype = p = new cjs.Sprite();



(lib.header2 = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(27);
}).prototype = p = new cjs.Sprite();



(lib.icon_golden = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(28);
}).prototype = p = new cjs.Sprite();



(lib.icon_sushi = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(29);
}).prototype = p = new cjs.Sprite();



(lib.menu_achievement_button = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(30);
}).prototype = p = new cjs.Sprite();



(lib.menu_config_button = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(31);
}).prototype = p = new cjs.Sprite();



(lib.menu_generator_button = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(32);
}).prototype = p = new cjs.Sprite();



(lib.menu_invite = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(33);
}).prototype = p = new cjs.Sprite();



(lib.menu_shop_button = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(34);
}).prototype = p = new cjs.Sprite();



(lib.menu_upgrade_button = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(35);
}).prototype = p = new cjs.Sprite();



(lib.messageBG = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(36);
}).prototype = p = new cjs.Sprite();



(lib.mini_golden = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(37);
}).prototype = p = new cjs.Sprite();



(lib.mini_sushi = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(38);
}).prototype = p = new cjs.Sprite();



(lib.not = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(39);
}).prototype = p = new cjs.Sprite();



(lib.not2 = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(40);
}).prototype = p = new cjs.Sprite();



(lib.notification1 = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(41);
}).prototype = p = new cjs.Sprite();



(lib.notification2 = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(42);
}).prototype = p = new cjs.Sprite();



(lib.NotificationBG = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(43);
}).prototype = p = new cjs.Sprite();



(lib.panel = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(44);
}).prototype = p = new cjs.Sprite();



(lib.shop_bg = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(45);
}).prototype = p = new cjs.Sprite();



(lib.shop_label2 = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(46);
}).prototype = p = new cjs.Sprite();



(lib.shop_label3 = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(47);
}).prototype = p = new cjs.Sprite();



(lib.shop_roboto_bg = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(48);
}).prototype = p = new cjs.Sprite();



(lib.shop_skin_bg = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(49);
}).prototype = p = new cjs.Sprite();



(lib.shop_sushi_bg = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(50);
}).prototype = p = new cjs.Sprite();



(lib.subTile2 = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(51);
}).prototype = p = new cjs.Sprite();



(lib.subTitle = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(52);
}).prototype = p = new cjs.Sprite();



(lib.sushiMini = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(53);
}).prototype = p = new cjs.Sprite();



(lib.title = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(54);
}).prototype = p = new cjs.Sprite();



(lib.underBG2 = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(55);
}).prototype = p = new cjs.Sprite();



(lib.upgrade_bg = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(56);
}).prototype = p = new cjs.Sprite();



(lib.upperBG2 = function() {
	this.initialize(ss["index_atlas_1"]);
	this.gotoAndStop(57);
}).prototype = p = new cjs.Sprite();
// helper functions:

function mc_symbol_clone() {
	var clone = this._cloneProps(new this.constructor(this.mode, this.startPosition, this.loop, this.reversed));
	clone.gotoAndStop(this.currentFrame);
	clone.paused = this.paused;
	clone.framerate = this.framerate;
	return clone;
}

function getMCSymbolPrototype(symbol, nominalBounds, frameBounds) {
	var prototype = cjs.extend(symbol, cjs.MovieClip);
	prototype.clone = mc_symbol_clone;
	prototype.nominalBounds = nominalBounds;
	prototype.frameBounds = frameBounds;
	return prototype;
	}


(lib.UpgradeDesciptionMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	this.isSingleFrame = false;
	// timeline functions:
	this.frame_0 = function() {
		if(this.isSingleFrame) {
			return;
		}
		if(this.totalFrames == 1) {
			this.isSingleFrame = true;
		}
		this.resizeCanvas = function() {
			this.scaleX = this.parent.canvasScaleX;
			this.scaleY = this.parent.canvasScaleX;
			this.x = lib.properties.width / 2;
			this.y = lib.properties.height / 2;
		}
		window.addEventListener('resize', this.resizeCanvas.bind(this));	
		this.resizeCanvas();
		this.bitmap = null;
		this.visible = false;
		
		//this.title_O = new Outline(lib, this.title, 5, "#000000", "#FFFFFF");
		this.obj;
		
		this.Close = function()
		{
			this.parent.MaskMC.removeEventListener("click", this._close);
			this.parent.MaskMC.visible = false;
		
			createjs.Tween.get(this, { override: true })
			.to({ scaleX: 0, scaleY: 0 }, 250, createjs.Ease.backInOut)
			.call(() => {
				this.visible = false;
		    });
			main.PlaySE("popup");
		} 
		
		this.Open = function(_obj)
		{
			this.obj = _obj;
			
			this.visible = true;
			this.scaleX = 0;
			this.scaleY = 0;
			
			this._close = this.parent.MaskMC.addEventListener("click", this.Close.bind(this));
			this.parent.MaskMC.visible = true;
			
			createjs.Tween.get(this, { override: true })
			.to({ scaleX: this.parent.canvasScaleX, scaleY: this.parent.canvasScaleX }, 250, createjs.Ease.backInOut);
		
			main.PlaySE("popup");
		
			if( this.bitmap != null)
			{
				this.removeChild(this.bitmap);
				this.bitmap == null;
			}
			
			//アイコン生成
			//this.bitmap = new createjs.Bitmap("images/upgrade/upgrade_" + this.obj.id.toString().padStart(2, '0') + ".webp");
			this.bitmap = new createjs.Bitmap("images/upgrade/upgrade_" + this.obj.image + ".webp");	
			this.addChild(this.bitmap);
			this.bitmap.x = 48;
			this.bitmap.y = 80;
			this.bitmap.scaleX = 170 / 300;
			this.bitmap.scaleY = 170 / 300;
			this.bitmap.mouseEnabled = false;
		
			this.title.text = this.obj.name;
			this.description.text = this.obj.description;
			
			SetWrapText(this.description);
		}
	}

	// actions tween:
	this.timeline.addTween(cjs.Tween.get(this).call(this.frame_0).wait(1));

	// Text_title
	this.title = new cjs.Text("Sushi Master's Chopsticks", "45px 'Potta One'");
	this.title.name = "title";
	this.title.lineHeight = 65;
	this.title.lineWidth = 796;
	this.title.parent = this;
	this.title.setTransform(235,96);

	this.timeline.addTween(cjs.Tween.get(this.title).wait(1));

	// Text
	this.description = new cjs.Text("These chopsticks automatically pick up ths\nsushi topping and place\nHowever\naaaaa", "35px 'Potta One'", "#723826");
	this.description.name = "description";
	this.description.lineHeight = 51;
	this.description.lineWidth = 831;
	this.description.parent = this;
	this.description.setTransform(107.25,331.7);

	this.timeline.addTween(cjs.Tween.get(this.description).wait(1));

	// BG
	this.instance = new lib.upgrade_bg();

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.UpgradeDesciptionMC, new cjs.Rectangle(0,0,1042,625), null);


(lib.ShopType4ButtonMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {NotPurchased:0,Shortage:19,NotSelected:39,Selected:58};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Text
	this.price = new cjs.Text("1,000", "70px 'Potta One'", "#FFFFFF");
	this.price.name = "price";
	this.price.textAlign = "center";
	this.price.lineHeight = 103;
	this.price.lineWidth = 406;
	this.price.parent = this;
	this.price.setTransform(301.05,28);

	this.timeline.addTween(cjs.Tween.get(this.price).wait(19).to({color:"#C5253A"},0).wait(20).to({x:258,y:36,text:"Use",font:"60px 'Potta One'",color:"#FFFFFF",lineHeight:88.9,lineWidth:512},0).wait(19).to({text:"Remove"},0).wait(21));

	// BG
	this.instance = new lib._2();

	this.instance_1 = new lib._4();

	this.instance_2 = new lib.button_false();
	this.instance_2.setTransform(0,0,0.9961,0.9888);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.instance}]}).to({state:[{t:this.instance_1}]},39).to({state:[{t:this.instance_2}]},19).wait(21));

	this._renderFirstFrame();

}).prototype = p = new cjs.MovieClip();
p.nominalBounds = new cjs.Rectangle(0,0,516,176);


(lib.ShopType3ButtonMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {Active:0,"Shortage":19,"Selected":39};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Text
	this.price = new cjs.Text("1,000", "70px 'Potta One'", "#FFFFFF");
	this.price.name = "price";
	this.price.textAlign = "center";
	this.price.lineHeight = 103;
	this.price.lineWidth = 406;
	this.price.parent = this;
	this.price.setTransform(301.05,28);

	this.timeline.addTween(cjs.Tween.get(this.price).wait(19).to({color:"#C5253A"},0).wait(20).to({x:298.05,text:"使用中",lineWidth:210},0).wait(21));

	// BG
	this.instance = new lib._2();

	this.instance_1 = new lib._5();
	this.instance_1.setTransform(75,16);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.instance}]}).to({state:[{t:this.instance_1}]},39).wait(21));

	this._renderFirstFrame();

}).prototype = p = new cjs.MovieClip();
p.nominalBounds = new cjs.Rectangle(0,0,516,176);


(lib.ShopType2ButtonMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {"Active":0,"Shortage":19};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Text
	this.price = new cjs.Text("1,000", "70px 'Potta One'", "#FFFFFF");
	this.price.name = "price";
	this.price.textAlign = "center";
	this.price.lineHeight = 103;
	this.price.lineWidth = 406;
	this.price.parent = this;
	this.price.setTransform(301.05,28);

	this.timeline.addTween(cjs.Tween.get(this.price).wait(19).to({color:"#C5253A"},0).wait(20));

	// BG
	this.instance = new lib._2();

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(39));

	this._renderFirstFrame();

}).prototype = p = new cjs.MovieClip();
p.nominalBounds = new cjs.Rectangle(0,0,516,176);


(lib.ShopType1ButtonMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Text
	this.text = new cjs.Text("Stars", "50px 'Potta One'", "#FFFFFF");
	this.text.textAlign = "center";
	this.text.lineHeight = 74;
	this.text.lineWidth = 512;
	this.text.parent = this;
	this.text.setTransform(258,81.45);

	this.price = new cjs.Text("1,000", "70px 'Potta One'", "#FFFFFF");
	this.price.name = "price";
	this.price.textAlign = "center";
	this.price.lineHeight = 103;
	this.price.lineWidth = 512;
	this.price.parent = this;
	this.price.setTransform(258,0);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.price},{t:this.text}]}).wait(1));

	// BG
	this.instance = new lib._4();

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.ShopType1ButtonMC, new cjs.Rectangle(0,-2,516,178), null);


(lib.ShopSubTitleMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Text
	this.title = new cjs.Text("Golden Sushi", "60px 'Potta One'");
	this.title.name = "title";
	this.title.lineHeight = 89;
	this.title.lineWidth = 434;
	this.title.parent = this;
	this.title.setTransform(59,4);

	this.timeline.addTween(cjs.Tween.get(this.title).wait(1));

	// BG
	this.instance = new lib.bg1_1();

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.ShopSubTitleMC, new cjs.Rectangle(0,0,542,104), null);


(lib.ShopActiveMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// レイヤー_2
	this.shape = new cjs.Shape();
	this.shape.graphics.f().s("#C5253A").ss(20,1,1).p("EhNRgcNMCajAAAQBnAABJBJQBKBKAABnMAAAAwnQAABnhKBJQhJBKhnAAMiajAAAQhoAAhJhKQhJhJAAhnMAAAgwnQAAhnBJhKQBJhJBoAAg");
	this.shape.setTransform(519.6,180.55);

	this.timeline.addTween(cjs.Tween.get(this.shape).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.ShopActiveMC, new cjs.Rectangle(-10,-10,1059.2,381.1), null);


(lib.NotificationMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Text
	this.message = new cjs.Text("実績が解除されました。\n3建物を所有する", "60px 'Potta One'");
	this.message.name = "message";
	this.message.lineHeight = 89;
	this.message.lineWidth = 796;
	this.message.parent = this;
	this.message.setTransform(294,67);

	this.timeline.addTween(cjs.Tween.get(this.message).wait(1));

	// BG
	this.instance = new lib.NotificationBG();
	this.instance.setTransform(11,0);

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.NotificationMC, new cjs.Rectangle(11,0,1104,319), null);


(lib.MessageMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	this.isSingleFrame = false;
	// timeline functions:
	this.frame_0 = function() {
		if(this.isSingleFrame) {
			return;
		}
		if(this.totalFrames == 1) {
			this.isSingleFrame = true;
		}
		this.resizeCanvas = function() {
			this.scaleX = this.parent.canvasScaleX;
			this.scaleY = this.parent.canvasScaleX;
			this.x = lib.properties.width / 2;
			this.y = lib.properties.height / 2;
		}
		window.addEventListener('resize', this.resizeCanvas.bind(this));	
		this.resizeCanvas();
		this.bitmap = null;
		this.visible = false;
		
		//this.message_O = new Outline(lib, this.message, 5, "#000000", "#FFFFFF");
		
		this.Close = function()
		{
			this.parent.Mask2MC.removeEventListener("click", this._close);
			this.parent.Mask2MC.visible = false;
			
			createjs.Tween.get(this, { override: true })
			.to({ scaleX: 0, scaleY: 0 }, 250, createjs.Ease.backInOut)
			.call(() => {
				this.visible = false;
		    });
		
			main.PlaySE("popup");
		} 
		
		this.Open = function(_message)
		{
			//this.message_O.text = _message;
			this.message.text = _message;	
			
			this.visible = true;
			this.scaleX = 0;
			this.scaleY = 0;
			
			this._close = this.parent.Mask2MC.addEventListener("click", this.Close.bind(this));
			this.parent.Mask2MC.visible = true;
			
			createjs.Tween.get(this, { override: true })
			.to({ scaleX: this.parent.canvasScaleX, scaleY: this.parent.canvasScaleX }, 250, createjs.Ease.backInOut);
		}
	}

	// actions tween:
	this.timeline.addTween(cjs.Tween.get(this).call(this.frame_0).wait(1));

	// Text
	this.message = new cjs.Text("寿司ロボットを入手しました", "60px 'Potta One'", "#FFFFFF");
	this.message.name = "message";
	this.message.textAlign = "center";
	this.message.lineHeight = 89;
	this.message.lineWidth = 1121;
	this.message.parent = this;
	this.message.setTransform(562.5,60);

	this.timeline.addTween(cjs.Tween.get(this.message).wait(1));

	// BG
	this.instance = new lib.messageBG();

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.MessageMC, new cjs.Rectangle(0,0,1125,206), null);


(lib.BadgeMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Text
	this.notification = new cjs.Text("99", "40px 'Potta One'", "#FFFFFF");
	this.notification.name = "notification";
	this.notification.textAlign = "center";
	this.notification.lineHeight = 60;
	this.notification.lineWidth = 50;
	this.notification.parent = this;
	this.notification.setTransform(45,16.05);

	this.timeline.addTween(cjs.Tween.get(this.notification).wait(1));

	// BG
	this.instance = new lib.notification2();

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.BadgeMC, new cjs.Rectangle(0,0,90,90), null);


(lib.RewardMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {type1:0,type2:10,type4:21,type3:31};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Text
	this.text = new cjs.Text("×100 Million", "70px 'Potta One'", "#C5253A");
	this.text.lineHeight = 101;
	this.text.parent = this;
	this.text.setTransform(355.4,24.35);

	this.timeline.addTween(cjs.Tween.get(this.text).wait(39));

	// Image
	this.instance = new lib._4_1();
	this.instance.setTransform(150,36);

	this.text_1 = new cjs.Text("×100 Million", "70px 'Potta One'", "#C5253A");
	this.text_1.lineHeight = 101;
	this.text_1.parent = this;
	this.text_1.setTransform(355.4,24.35);

	this.instance_1 = new lib._5_1();
	this.instance_1.setTransform(162,46);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.text_1},{t:this.instance}]}).to({state:[{t:this.text_1},{t:this.instance_1}]},10).wait(29));

	// BG
	this.instance_2 = new lib._3();

	this.timeline.addTween(cjs.Tween.get(this.instance_2).wait(39));

	this._renderFirstFrame();

}).prototype = p = new cjs.MovieClip();
p.nominalBounds = new cjs.Rectangle(0,0,904,153);


(lib.InviteListMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {NotAcquired:0,Acquisition:9};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// レイヤー_2
	this.ammount = new cjs.Text("×10", "60px 'Potta One'", "#C5253A");
	this.ammount.name = "ammount";
	this.ammount.lineHeight = 87;
	this.ammount.parent = this;
	this.ammount.setTransform(738.6,38);

	this.timeline.addTween(cjs.Tween.get(this.ammount).to({_off:true},9).wait(11));

	// Image
	this.instance = new lib._5_1();
	this.instance.setTransform(598,45);

	this.invitationState = new cjs.Text("受け取り済み", "50px 'Potta One'");
	this.invitationState.name = "invitationState";
	this.invitationState.textAlign = "center";
	this.invitationState.lineHeight = 72;
	this.invitationState.parent = this;
	this.invitationState.setTransform(708.2,42.1);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.instance}]}).to({state:[{t:this.invitationState}]},9).wait(11));

	// Text
	this.title = new cjs.Text("1人招待する", "50px 'Potta One'");
	this.title.name = "title";
	this.title.lineHeight = 72;
	this.title.lineWidth = 519;
	this.title.parent = this;
	this.title.setTransform(65.35,42);

	this.timeline.addTween(cjs.Tween.get(this.title).wait(20));

	// BG
	this.instance_1 = new lib._3();

	this.timeline.addTween(cjs.Tween.get(this.instance_1).wait(20));

	this._renderFirstFrame();

}).prototype = p = new cjs.MovieClip();
p.nominalBounds = new cjs.Rectangle(0,0,904,153);


(lib.GeneratorDesciptionMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	this.isSingleFrame = false;
	// timeline functions:
	this.frame_0 = function() {
		if(this.isSingleFrame) {
			return;
		}
		if(this.totalFrames == 1) {
			this.isSingleFrame = true;
		}
		this.resizeCanvas = function() {
			this.scaleX = this.parent.canvasScaleX;
			this.scaleY = this.parent.canvasScaleX;
			this.x = lib.properties.width / 2;
			this.y = lib.properties.height / 2;
		}
		window.addEventListener('resize', this.resizeCanvas.bind(this));	
		this.resizeCanvas();
		this.bitmap = null;
		this.visible = false;
		
		//this.title_O = new Outline(lib, this.title, 5, "#000000", "#FFFFFF");
		//this.posessionTitle_O = new Outline(lib, this.posessionTitle, 5, "#C5253A", "#FFFFFF");	
		//this.posession_O = new Outline(lib, this.posession, 5, "#C5253A", "#FFFFFF");	
		this.obj;
		this.ratio;
		
		this.Close = function()
		{
			this.parent.MaskMC.removeEventListener("click", this._close);
			this.parent.MaskMC.visible = false;
			
			createjs.Tween.get(this, { override: true })
			.to({ scaleX: 0, scaleY: 0 }, 250, createjs.Ease.backInOut)
			.call(() => {
				this.visible = false;
		    });
		
			main.PlaySE("popup");
		
			if(this.obj.amount > 0)
				createjs.Ticker.removeEventListener('tick', this._Tick);
		} 
		
		this.Open = function(_obj)
		{
			this.obj = _obj;
			
			this.visible = true;
			this.scaleX = 0;
			this.scaleY = 0;
		
			this._close = this.parent.MaskMC.addEventListener("click", this.Close.bind(this));
			this.parent.MaskMC.visible = true;
			
			createjs.Tween.get(this, { override: true })
			.to({ scaleX: this.parent.canvasScaleX, scaleY: this.parent.canvasScaleX }, 250, createjs.Ease.backInOut);
		
			main.PlaySE("popup");
		
			if( this.bitmap != null)
			{
				this.removeChild(this.bitmap);
				this.bitmap == null;
			}
		
			//アイコン生成
			this.bitmap = new createjs.Bitmap("images/generator/gen_" + this.obj.id.toString().padStart(2, '0') + ".webp");
			this.addChild(this.bitmap);
			this.bitmap.x = 48;
			this.bitmap.y = 80;
			this.bitmap.scaleX = 170 / 300;
			this.bitmap.scaleY = 170 / 300;
			this.bitmap.mouseEnabled = false;
		
			this.title.text = this.obj.name;
			this.description.text = this.obj.description;
			this.posession.text = this.obj.posession;
		
			SetWrapText(this.description);
			
			if(this.obj.posession > 0)
			{
				var total = 0;
				for (var i = 0; i < main.generators.length; i++)
				{
					total += main.generators[i].storedTotalSps;	
				}
				this.ratio = this.obj.storedTotalSps / total * 100;
		
				this._Tick = createjs.Ticker.addEventListener("tick", this.Tick.bind(this));
			}
			else
			{
				this.desciption1.text = "";	
				this.desciption2.text = "";	
				this.desciption3.text = "";	
			}
		}
		
		this._Tick;
		this.Tick = function(event)
		{
			var text1 = "各[x]が毎秒[y]Sushi生産";
			this.desciption1.text = 
				text1.replace("[x]", this.obj.name)
				.replace("[y]", FormatNumber(Accuracy(this.obj.storedTotalSps), 1, 0));
			
			var text2 = "[x][y]が毎秒[z]Sushi生産(合計SpSの[w]%)";
			this.desciption2.text = 
				text2.replace("[x]", this.obj.posession)
				.replace("[y]", this.obj.name)
				.replace("[z]", FormatNumber(Accuracy(this.obj.storedTotalSps * this.obj.posession), 1, 2))
				.replace("[w]", this.ratio.toFixed(1));
			
			var text3 = "これまで[x]Sushi生産";
			this.desciption3.text = text3.replace("[x]", FormatNumber(Math.floor(this.obj.totalSushies), 1, 0));
		
			SetWrapText(this.desciption1);
			SetWrapText(this.desciption2);
			SetWrapText(this.desciption3);
		}
	}

	// actions tween:
	this.timeline.addTween(cjs.Tween.get(this).call(this.frame_0).wait(1));

	// Text_Title
	this.title = new cjs.Text("Sushi Master's Chopsticks", "45px 'Potta One'");
	this.title.name = "title";
	this.title.lineHeight = 65;
	this.title.lineWidth = 796;
	this.title.parent = this;
	this.title.setTransform(235,96);

	this.timeline.addTween(cjs.Tween.get(this.title).wait(1));

	// Text_amountTitle
	this.posessionTitle = new cjs.Text("Facilities:", "45px 'Potta One'", "#723826");
	this.posessionTitle.name = "posessionTitle";
	this.posessionTitle.lineHeight = 67;
	this.posessionTitle.lineWidth = 270;
	this.posessionTitle.parent = this;
	this.posessionTitle.setTransform(235,166);

	this.timeline.addTween(cjs.Tween.get(this.posessionTitle).wait(1));

	// Text_amount
	this.posession = new cjs.Text("99", "45px 'Potta One'", "#0D9000");
	this.posession.name = "posession";
	this.posession.lineHeight = 65;
	this.posession.lineWidth = 220;
	this.posession.parent = this;
	this.posession.setTransform(513,166);

	this.timeline.addTween(cjs.Tween.get(this.posession).wait(1));

	// Text
	this.description = new cjs.Text("These chopsticks automatically pick up ths\nsushi topping and place\nHowever\naaaaa", "35px 'Potta One'", "#723826");
	this.description.name = "description";
	this.description.lineHeight = 51;
	this.description.lineWidth = 831;
	this.description.parent = this;
	this.description.setTransform(107.25,331.7);

	this.desciption3 = new cjs.Text("Each SushiFactory produces\n100.000 million per second", "40px 'Potta One'");
	this.desciption3.name = "desciption3";
	this.desciption3.lineHeight = 58;
	this.desciption3.lineWidth = 857;
	this.desciption3.parent = this;
	this.desciption3.setTransform(96,973);

	this.desciption2 = new cjs.Text("Each SushiFactory produces\n100.000 million per second", "40px 'Potta One'");
	this.desciption2.name = "desciption2";
	this.desciption2.lineHeight = 58;
	this.desciption2.lineWidth = 857;
	this.desciption2.parent = this;
	this.desciption2.setTransform(96,779);

	this.desciption1 = new cjs.Text("Each SushiFactory produces\n100.000 million per second", "40px 'Potta One'");
	this.desciption1.name = "desciption1";
	this.desciption1.lineHeight = 58;
	this.desciption1.lineWidth = 857;
	this.desciption1.parent = this;
	this.desciption1.setTransform(96,607);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.desciption1},{t:this.desciption2},{t:this.desciption3},{t:this.description}]}).wait(1));

	// BG
	this.instance = new lib.generator_bg();

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.GeneratorDesciptionMC, new cjs.Rectangle(-42,-47,1125,1192), null);


(lib.DoddMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// レイヤー_1
	this.instance = new lib.notification1();

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.DoddMC, new cjs.Rectangle(0,0,90,90), null);


(lib.SliderButtonMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {SE:0,BGM:10};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Icon
	this.instance = new lib.a2();
	this.instance.setTransform(-58,-58);

	this.instance_1 = new lib.a3();
	this.instance_1.setTransform(-58,-58);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.instance}]}).to({state:[{t:this.instance_1}]},10).wait(10));

	this._renderFirstFrame();

}).prototype = p = new cjs.MovieClip();
p.nominalBounds = new cjs.Rectangle(-58,-58,116,126);


(lib.SushiImageMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	this._renderFirstFrame();

}).prototype = p = new cjs.MovieClip();
p.nominalBounds = new cjs.Rectangle(0,0,1000,1000);


(lib.SushiEffectMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// レイヤー_1
	this.instance = new lib.sushiMini();
	this.instance.setTransform(-76,-76);

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.SushiEffectMC, new cjs.Rectangle(-76,-76,150,150), null);


(lib.ScrollMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	this.isSingleFrame = false;
	// timeline functions:
	this.frame_0 = function() {
		if(this.isSingleFrame) {
			return;
		}
		if(this.totalFrames == 1) {
			this.isSingleFrame = true;
		}
		this.content;
		this.count;
		
		this.Reload = function() 
		{
			this.content.ContentBGMC.scaleY = (0 + 240 * this.count) * 0.01;
			minY = -(50 + 240 * this.count) + 914;
		}
		
		this.SetFullSize = function(size) 
		{
			this.content.ContentBGMC.scaleY = size * 0.01;
			minY = -size + (document.documentElement.clientHeight / this.parent.parent.canvasScaleX)	-251 -227;
		}
		
		this.SetSize = function(size) 
		{
			this.content.ContentBGMC.scaleY = size * 0.01;
			minY = -size + 914;
		}
		
		this.content.ContentBGMC.scaleY = (0 + 240 * this.count) * 0.01;
		
		var content = this.content;
		var startY;
		var startScrollY;
		var isScrolling = false;
		var velocity = 0;
		var friction = 0.95; // 慣性スクロールの減速率
		var minY = -(50 + 240 * this.count) + 914;
		var maxY = 0;
		var lastY;
		var lastMoveTime;
		isScrolled = false;
		
		this.isScrolled =  function() 
		{
			return isScrolled; 
		}
		
		this.Open =  function() 
		{
			content.addEventListener("mousedown", startScroll);
			stage.addEventListener("stagemousemove", doScroll);
			stage.addEventListener("stagemouseup", endScroll);
		}
		this.Close =  function() 
		{
			content.removeEventListener("mousedown", startScroll);
			stage.removeEventListener("stagemousemove", doScroll);
			stage.removeEventListener("stagemouseup", endScroll);
		}
		
		function startScroll(event) {
		    event.preventDefault();
		    isScrolling = true;
		    startY = getY(event);
		    startScrollY = content.y;
		    velocity = 0;
		    lastY = getY(event);
		    lastMoveTime = new Date().getTime();
			
			isScrolled = false;
		}
			
		function doScroll(event) {
		    if (isScrolling) {
		        event.preventDefault();
		        var dy = getY(event) - startY;
		        content.y = startScrollY + dy;
		
		        // スクロールの境界を設定
		        if (content.y < minY) {
		            content.y = minY;
		        }
		        if (content.y > maxY) {
		            content.y = maxY;
		        }
		
		        // 慣性用の速度を計算
		        var now = new Date().getTime();
		        var timeDiff = now - lastMoveTime;
		        if (timeDiff > 0) { // timeDiffがゼロでないことを確認
		            velocity = (getY(event) - lastY) / timeDiff * 1000; // ピクセル/秒に変換
		        }
		        lastY = getY(event);
		        lastMoveTime = now;
			
				isScrolled = true;
		    }
		}
		
		function endScroll(event) {
		    isScrolling = false;
		    // 速度が小さい場合にリセット
		    if (Math.abs(velocity) < 0.5) { // 閾値を適切に設定
		        velocity = 0;
		    }
		    // 慣性スクロールのためのタイマーを開始
		    createjs.Ticker.addEventListener("tick", applyInertia);
		}
		
		function applyInertia(event) {
		    if (!isScrolling) {
		        content.y += velocity * event.delta / 1000; // velocityをタイムデルタに合わせて調整
		        velocity *= friction;
		
		        // スクロールの境界を設定
		        if (content.y < minY) {
		            content.y = minY;
		            velocity = 0;
		        }
		        if (content.y > maxY) {
		            content.y = maxY;
		            velocity = 0;
		        }
		
		        // 慣性がほぼ止まったらタイマーを停止
		        if (Math.abs(velocity) < 1) {
		            createjs.Ticker.removeEventListener("tick", applyInertia);
		        }
		    }
		}
		
		function getY(event) {
			var y;	
		    if (event.touches && event.touches.length > 0) {
		        y = event.touches[0].clientY;
		    }
		    y = event.stageY;	
			var pt = stage.globalToLocal(0, y);
		    return pt.y   /   exportRoot.canvasScaleX;
		}
	}

	// actions tween:
	this.timeline.addTween(cjs.Tween.get(this).call(this.frame_0).wait(1));

	// AS
	this.shape = new cjs.Shape();
	this.shape.graphics.f().s("#FFFFFF").ss(1,1,1).p("Aj5j5IHzAAIAAHzInzAAg");
	this.shape.setTransform(25,25);

	this.shape_1 = new cjs.Shape();
	this.shape_1.graphics.f("#FF0000").s().p("Aj5D6IAAnzIHzAAIAAHzg");
	this.shape_1.setTransform(25,25);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.shape_1},{t:this.shape}]}).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.ScrollMC, new cjs.Rectangle(-1,-1,52,52), null);


(lib.MaskMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// レイヤー_1
	this.shape = new cjs.Shape();
	this.shape.graphics.f("rgba(0,0,0,0.498)").s().p("AnzH0IAAvnIPnAAIAAPng");
	this.shape.setTransform(50,50);

	this.timeline.addTween(cjs.Tween.get(this.shape).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.MaskMC, new cjs.Rectangle(0,0,100,100), null);


(lib.LodingMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// BG
	this.shape = new cjs.Shape();
	this.shape.graphics.f("#000000").s().p("EhX4C+UMAAAl8nMCvxAAAMAAAF8ng");
	this.shape.setTransform(562.5,1218);

	this.timeline.addTween(cjs.Tween.get(this.shape).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.LodingMC, new cjs.Rectangle(0,0,1125,2436), null);


(lib.IconMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	this._renderFirstFrame();

}).prototype = p = new cjs.MovieClip();
p.nominalBounds = new cjs.Rectangle(0,0,0,0);


(lib.DispNumMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// レイヤー_1
	this.num = new cjs.Text("+12345", "40px 'Potta One'", "#FFFFFF");
	this.num.name = "num";
	this.num.textAlign = "center";
	this.num.lineHeight = 60;
	this.num.parent = this;
	this.num.setTransform(0,-28.95);

	this.timeline.addTween(cjs.Tween.get(this.num).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.DispNumMC, new cjs.Rectangle(-73.6,-30.9,147.3,61.9), null);


(lib.DebugMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// レイヤー_1
	this.status = new cjs.Text("Normal", "40px 'Potta One'", "#FFFFFF");
	this.status.name = "status";
	this.status.textAlign = "center";
	this.status.lineHeight = 60;
	this.status.lineWidth = 496;
	this.status.parent = this;
	this.status.setTransform(250,20);

	this.shape = new cjs.Shape();
	this.shape.graphics.f().s("#FFFFFF").ss(1,1,1).p("EgnDgHzMBOHAAAIAAPnMhOHAAAg");
	this.shape.setTransform(250,50);

	this.shape_1 = new cjs.Shape();
	this.shape_1.graphics.f("#C5253A").s().p("EgnDAH0IAAvnMBOHAAAIAAPng");
	this.shape_1.setTransform(250,50);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.shape_1},{t:this.shape},{t:this.status}]}).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.DebugMC, new cjs.Rectangle(-1,-1,502,102), null);


(lib.ContainerMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	this._renderFirstFrame();

}).prototype = p = new cjs.MovieClip();
p.nominalBounds = new cjs.Rectangle(0,0,0,0);


(lib.CloseButtonMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// レイヤー_1
	this.instance = new lib.close();

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.CloseButtonMC, new cjs.Rectangle(0,0,122,122), null);


(lib.ButtonMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	this.isSingleFrame = false;
	// timeline functions:
	this.frame_0 = function() {
		if(this.isSingleFrame) {
			return;
		}
		if(this.totalFrames == 1) {
			this.isSingleFrame = true;
		}
		//元のは非表示
		this.shape.visible = false;	
		
		//当たり判定用のビットマップを生成
		var hitArea = new createjs.Shape();
		hitArea.graphics.beginFill("#FFF").drawRect(0, 0, 100, 100);
		var bitmap = new createjs.Bitmap();
		bitmap.hitArea = hitArea;
		this.addChild(bitmap);
	}

	// actions tween:
	this.timeline.addTween(cjs.Tween.get(this).call(this.frame_0).wait(1));

	// レイヤー_1
	this.shape = new cjs.Shape();
	this.shape.graphics.f("rgba(0,0,0,0.247)").s().p("AnzH0IAAvnIPnAAIAAPng");
	this.shape.setTransform(50,50);

	this.timeline.addTween(cjs.Tween.get(this.shape).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.ButtonMC, new cjs.Rectangle(0,0,100,100), null);


(lib.SushiBGScrollMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	this._renderFirstFrame();

}).prototype = p = new cjs.MovieClip();
p.nominalBounds = new cjs.Rectangle(0,-1125,1126,3375);


(lib.UpperBGMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// レイヤー_1
	this.instance = new lib.upperBG2();
	this.instance.setTransform(-700,0,49.9999,1);

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.UpperBGMC, new cjs.Rectangle(-700,0,2500,1000), null);


(lib.UnderBGMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// レイヤー_1
	this.instance = new lib.underBG2();
	this.instance.setTransform(-711,-491,50,1);

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.UnderBGMC, new cjs.Rectangle(-711,-491,2500,1000), null);


(lib.RadiationMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// レイヤー_1
	this.instance = new lib.bg1();
	this.instance.setTransform(-244,-244,1.2,1.2);

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.RadiationMC, new cjs.Rectangle(-244,-244,2923.1,2923.1), null);


(lib.AchievementUpgradeActiveMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// レイヤー_1
	this.shape = new cjs.Shape();
	this.shape.graphics.f().s("#C5253A").ss(20,1,1).p("AvnvnIfPAAIAAfPI/PAAg");
	this.shape.setTransform(100,100);

	this.timeline.addTween(cjs.Tween.get(this.shape).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.AchievementUpgradeActiveMC, new cjs.Rectangle(-10,-10,220,220), null);


(lib.AchievementSubTitleMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Text
	this.count = new cjs.Text("1% (100/100)", "50px 'Potta One'", "#FFFFFF");
	this.count.name = "count";
	this.count.textAlign = "center";
	this.count.lineHeight = 74;
	this.count.lineWidth = 398;
	this.count.parent = this;
	this.count.setTransform(874.1,15);

	this.title = new cjs.Text("アップグレード", "50px 'Potta One'");
	this.title.name = "title";
	this.title.textAlign = "center";
	this.title.lineHeight = 74;
	this.title.lineWidth = 538;
	this.title.parent = this;
	this.title.setTransform(321,15);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.title},{t:this.count}]}).wait(1));

	// BG
	this.instance = new lib.subTile2();
	this.instance.setTransform(627,0);

	this.instance_1 = new lib.subTitle();
	this.instance_1.setTransform(50,0);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.instance_1},{t:this.instance}]}).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.AchievementSubTitleMC, new cjs.Rectangle(50,0,1029,104), null);


(lib.AchievementActiveMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// レイヤー_1
	this.shape = new cjs.Shape();
	this.shape.graphics.f().s("#C5253A").ss(20,1,1).p("AgEwbIOMIUIALQbIuIIIIudoIIAAwbg");
	this.shape.setTransform(108.45,110.1);

	this.timeline.addTween(cjs.Tween.get(this.shape).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.AchievementActiveMC, new cjs.Rectangle(7,-5,202.9,230.3), null);


(lib.UpgradeCellMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {"Active":0,Lock:9};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Icon_Button
	this.IconButtonMC = new lib.ButtonMC();
	this.IconButtonMC.name = "IconButtonMC";
	this.IconButtonMC.setTransform(76.35,56.35,1.7,1.6999,0,0,0,0.2,0.2);

	this.timeline.addTween(cjs.Tween.get(this.IconButtonMC).wait(20));

	// BG_Button
	this.ButtonMC = new lib.ButtonMC();
	this.ButtonMC.name = "ButtonMC";
	this.ButtonMC.setTransform(48,34,10.2799,2.1202);

	this.timeline.addTween(cjs.Tween.get(this.ButtonMC).to({_off:true},9).wait(11));

	// Mask
	this.MaskMC = new lib.MaskMC();
	this.MaskMC.name = "MaskMC";
	this.MaskMC.setTransform(49.05,34.2,10.28,2.12,0,0,0,0.1,0.1);
	this.MaskMC.alpha = 0.5;
	this.MaskMC._off = true;

	this.timeline.addTween(cjs.Tween.get(this.MaskMC).wait(9).to({_off:false},0).wait(11));

	// Dodd
	this.DoddMC = new lib.DoddMC();
	this.DoddMC.name = "DoddMC";
	this.DoddMC.setTransform(1060,57,1,1,0,0,0,45,45);

	this.timeline.addTween(cjs.Tween.get(this.DoddMC).wait(20));

	// Icon
	this.IconMC = new lib.IconMC();
	this.IconMC.name = "IconMC";
	this.IconMC.setTransform(75.5,55);

	this.timeline.addTween(cjs.Tween.get(this.IconMC).wait(20));

	// Text_description
	this.description = new cjs.Text("Sushi factory doubles", "40px 'Potta One'", "#723826");
	this.description.name = "description";
	this.description.lineHeight = 58;
	this.description.lineWidth = 783;
	this.description.parent = this;
	this.description.setTransform(265,167);

	this.timeline.addTween(cjs.Tween.get(this.description).wait(20));

	// Text_title
	this.title = new cjs.Text("chopstick", "40px 'Potta One'");
	this.title.name = "title";
	this.title.lineHeight = 60;
	this.title.lineWidth = 779;
	this.title.parent = this;
	this.title.setTransform(261,45);

	this.timeline.addTween(cjs.Tween.get(this.title).wait(20));

	// Text_cost
	this.cost = new cjs.Text("3.158,759", "40px 'Potta One'", "#0D9000");
	this.cost.name = "cost";
	this.cost.lineHeight = 60;
	this.cost.lineWidth = 636;
	this.cost.parent = this;
	this.cost.setTransform(350,110);

	this.timeline.addTween(cjs.Tween.get(this.cost).wait(20));

	// Sushi
	this.instance = new lib.mini_sushi();
	this.instance.setTransform(269,112,0.8,0.8);

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(20));

	// BG
	this.instance_1 = new lib.cell_bg1();
	this.instance_1.setTransform(45,32);

	this.timeline.addTween(cjs.Tween.get(this.instance_1).wait(20));

	this._renderFirstFrame();

}).prototype = p = new cjs.MovieClip();
p.nominalBounds = new cjs.Rectangle(45,12,1060,244);


(lib.ShopConfilmCell2MC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Icon_Button
	this.IconButtonMC = new lib.ButtonMC();
	this.IconButtonMC.name = "IconButtonMC";
	this.IconButtonMC.setTransform(0.6,0.6,2.9999,2.9999,0,0,0,0.2,0.2);

	this.timeline.addTween(cjs.Tween.get(this.IconButtonMC).wait(1));

	// Text_amount
	this.amount = new cjs.Text("×2,000", "60px 'Potta One'");
	this.amount.name = "amount";
	this.amount.textAlign = "right";
	this.amount.lineHeight = 89;
	this.amount.lineWidth = 286;
	this.amount.parent = this;
	this.amount.setTransform(284,205);

	this.timeline.addTween(cjs.Tween.get(this.amount).wait(1));

	// Icon
	this.instance = new lib.icon_sushi();

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.ShopConfilmCell2MC, new cjs.Rectangle(-4,0,304,300), null);


(lib.ShopConfilmCell1MC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Icon_Button
	this.IconButtonMC = new lib.ButtonMC();
	this.IconButtonMC.name = "IconButtonMC";
	this.IconButtonMC.setTransform(0.6,0.6,3,2.9999,0,0,0,0.2,0.2);

	this.timeline.addTween(cjs.Tween.get(this.IconButtonMC).wait(1));

	// Text_amount
	this.amount = new cjs.Text("×2,000", "60px 'Potta One'");
	this.amount.name = "amount";
	this.amount.textAlign = "right";
	this.amount.lineHeight = 89;
	this.amount.lineWidth = 286;
	this.amount.parent = this;
	this.amount.setTransform(284,205);

	this.timeline.addTween(cjs.Tween.get(this.amount).wait(1));

	// Icon
	this.instance = new lib.icon_golden();

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.ShopConfilmCell1MC, new cjs.Rectangle(-4,0,304,300), null);


(lib.ShopCell3MC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {"Active":0,Purchased:9,Used:19};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// BG_Button
	this.ButtonMC = new lib.ButtonMC();
	this.ButtonMC.name = "ButtonMC";
	this.ButtonMC.setTransform(49.05,3.7,10.2599,3.5002,0,0,0,0.1,0.2);

	this.timeline.addTween(cjs.Tween.get(this.ButtonMC).wait(30));

	// Purchased
	this.instance = new lib._5();
	this.instance.setTransform(945,30);
	this.instance._off = true;

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(9).to({_off:false},0).to({_off:true},10).wait(11));

	// Icon
	this.IconMC = new lib.IconMC();
	this.IconMC.name = "IconMC";
	this.IconMC.setTransform(173.5,137.5,1,1,0,0,0,104.5,104.5);

	this.timeline.addTween(cjs.Tween.get(this.IconMC).wait(30));

	// Text_desciption
	this.description = new cjs.Text("You will be able to offer a lot of\nsushi", "40px 'Potta One'", "#723826");
	this.description.name = "description";
	this.description.lineHeight = 58;
	this.description.lineWidth = 734;
	this.description.parent = this;
	this.description.setTransform(267.6,187.05);

	this.timeline.addTween(cjs.Tween.get(this.description).wait(30));

	// Text_title
	this.title = new cjs.Text("offline production upgrade", "40px 'Potta One'");
	this.title.name = "title";
	this.title.lineHeight = 60;
	this.title.lineWidth = 802;
	this.title.parent = this;
	this.title.setTransform(240.55,32);

	this.timeline.addTween(cjs.Tween.get(this.title).wait(30));

	// Text_price
	this.price = new cjs.Text("9,999,999", "45px 'Potta One'", "#0D9000");
	this.price.name = "price";
	this.price.lineHeight = 67;
	this.price.lineWidth = 636;
	this.price.parent = this;
	this.price.setTransform(332.7,97.15);

	this.timeline.addTween(cjs.Tween.get(this.price).wait(30));

	// Sushi
	this.instance_1 = new lib.mini_golden();
	this.instance_1.setTransform(240,104,0.8,0.8);

	this.timeline.addTween(cjs.Tween.get(this.instance_1).wait(30));

	// BG
	this.instance_2 = new lib.shop_bg();
	this.instance_2.setTransform(44,0);

	this.timeline.addTween(cjs.Tween.get(this.instance_2).wait(30));

	// Active
	this.ShopActiveMC = new lib.ShopActiveMC();
	this.ShopActiveMC.name = "ShopActiveMC";
	this.ShopActiveMC.setTransform(592,203,1,1,0,0,0,550,205.5);
	this.ShopActiveMC._off = true;

	this.timeline.addTween(cjs.Tween.get(this.ShopActiveMC).wait(9).to({_off:false},0).wait(21));

	this._renderFirstFrame();

}).prototype = p = new cjs.MovieClip();
p.nominalBounds = new cjs.Rectangle(32,-12.5,1059.2,381.1);


(lib.ShopCell2MC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Icon_Button
	this.IconButtonMC = new lib.ButtonMC();
	this.IconButtonMC.name = "IconButtonMC";
	this.IconButtonMC.setTransform(0.6,0.6,2.9999,2.9999,0,0,0,0.2,0.2);

	this.timeline.addTween(cjs.Tween.get(this.IconButtonMC).wait(1));

	// Text_amount
	this.amount = new cjs.Text("×2,000", "60px 'Potta One'");
	this.amount.name = "amount";
	this.amount.textAlign = "right";
	this.amount.lineHeight = 89;
	this.amount.lineWidth = 286;
	this.amount.parent = this;
	this.amount.setTransform(284,205);

	this.timeline.addTween(cjs.Tween.get(this.amount).wait(1));

	// Text
	this.price = new cjs.Text("60", "55px 'Potta One'", "#FFFFFF");
	this.price.name = "price";
	this.price.textAlign = "right";
	this.price.lineHeight = 82;
	this.price.lineWidth = 196;
	this.price.parent = this;
	this.price.setTransform(265.95,308.9);

	this.timeline.addTween(cjs.Tween.get(this.price).wait(1));

	// Icon
	this.instance = new lib.shop_label3();
	this.instance.setTransform(0,306);

	this.instance_1 = new lib.icon_sushi();

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.instance_1},{t:this.instance}]}).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.ShopCell2MC, new cjs.Rectangle(-4,0,304,392), null);


(lib.ShopCell1MC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Icon_Button
	this.IconButtonMC = new lib.ButtonMC();
	this.IconButtonMC.name = "IconButtonMC";
	this.IconButtonMC.setTransform(0.6,0.6,3,2.9999,0,0,0,0.2,0.2);

	this.timeline.addTween(cjs.Tween.get(this.IconButtonMC).wait(1));

	// Text_amount
	this.amount = new cjs.Text("×2,000", "60px 'Potta One'");
	this.amount.name = "amount";
	this.amount.textAlign = "right";
	this.amount.lineHeight = 89;
	this.amount.lineWidth = 286;
	this.amount.parent = this;
	this.amount.setTransform(284,205);

	this.timeline.addTween(cjs.Tween.get(this.amount).wait(1));

	// text
	this.price = new cjs.Text("1,000", "60px 'Potta One'", "#FFFFFF");
	this.price.name = "price";
	this.price.textAlign = "center";
	this.price.lineHeight = 89;
	this.price.lineWidth = 296;
	this.price.parent = this;
	this.price.setTransform(150,301.55);

	this.timeline.addTween(cjs.Tween.get(this.price).wait(1));

	// Icon
	this.instance = new lib.shop_label2();
	this.instance.setTransform(0,303);

	this.instance_1 = new lib.icon_golden();

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.instance_1},{t:this.instance}]}).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.ShopCell1MC, new cjs.Rectangle(-4,0,304,431), null);


(lib.PendingDesciptionMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	this.isSingleFrame = false;
	// timeline functions:
	this.frame_0 = function() {
		if(this.isSingleFrame) {
			return;
		}
		if(this.totalFrames == 1) {
			this.isSingleFrame = true;
		}
		this.resizeCanvas = function() {
			this.scaleX = this.parent.canvasScaleX;
			this.scaleY = this.parent.canvasScaleX;
			this.x = lib.properties.width / 2;
			this.y = lib.properties.height / 2;
		}
		window.addEventListener('resize', this.resizeCanvas.bind(this));	
		this.resizeCanvas();
		this.visible = false;
		
		this.obj;
		
		this.stop();
		
		this.Close = function()
		{
			this.parent.MaskMC.removeEventListener("click", this._mask);
			this.parent.MaskMC.visible = false;
			
			createjs.Tween.get(this, { override: true })
			.to({ scaleX: 0, scaleY: 0 }, 250, createjs.Ease.backInOut)
			.call(() => {
				this.visible = false;
		    });	
			main.PlaySE("popup");
		} 
		
		this.Open = function(_obj)
		{
			this.obj = _obj;
			
			this.visible = true;
			this.scaleX = 0;
			this.scaleY = 0;
			
			this._mask = this.parent.MaskMC.addEventListener("click", this.Mask.bind(this));
			this.parent.MaskMC.visible = true;	
			
			createjs.Tween.get(this, { override: true })
			.to({ scaleX: this.parent.canvasScaleX, scaleY: this.parent.canvasScaleX }, 250, createjs.Ease.backInOut);
		
			main.PlaySE("popup");
		
			this.amount.text = "×" + FormatNumber1(_obj.amount, 1, 2);
		}
		
		this.Mask = function(){} 
		
		this.Received = async function()
		{
			this.parent.Mask3MC.visible = true;
			
			if(main.sushiAdd > 0)
			{
				console.log("API.クリックで得た寿司を保存");
				await API_Request({
					url: '/sushi/add',
					method: 'POST',
					maxAttempts: 3,
					data: {
						amount: main.sushiAdd
					}
				});	
				main.sushiAdd = 0;
			}
		
		    try {
				console.log("API.未受取の寿司を受け取る");
				var data = await API_Request({
					url: '/sushi/pending/' + this.obj.id + '/receive',
					method: 'POST',
					maxAttempts: 3
				});
		    } catch (error) {
				main.log(error.message);
				this.parent.MessageMC.Open("通信エラー");
				this.parent.Mask3MC.visible = false;
				this.Close();
				return;
		    }
		
			this.obj.receive = true;
		
			console.log("API.自身のユーザー情報を得る");
			API_userData = await API_Request({
				url: '/user/me',
				maxAttempts: 3
			});
			
			main.sushi = Number(API_userData["user"].currentSushiCount);
			main.totalSushi = Number(API_userData["user"].totalSushiCount);
			main.SushiDisplayUdates();
			this.parent.Mask3MC.visible = false;
			this.Close();
		
			main.CheckPending();
		} 
		this.ReceiveduttonMC.addEventListener("click", this.Received.bind(this));
	}

	// actions tween:
	this.timeline.addTween(cjs.Tween.get(this).call(this.frame_0).wait(1));

	// Text
	this.instance = new lib._4_1();
	this.instance.setTransform(213,404);

	this.amount = new cjs.Text("×100 Million", "70px 'Potta One'", "#C5253A");
	this.amount.name = "amount";
	this.amount.lineHeight = 101;
	this.amount.parent = this;
	this.amount.setTransform(418.4,392.35);

	this.instance_1 = new lib._3();
	this.instance_1.setTransform(63,368);

	this.title = new cjs.Text("回収する", "50px 'Potta One'");
	this.title.name = "title";
	this.title.textAlign = "center";
	this.title.lineHeight = 72;
	this.title.lineWidth = 1038;
	this.title.parent = this;
	this.title.setTransform(521,681.95);

	this.title_1 = new cjs.Text("ロボによる寿司を獲得しました！", "50px 'Potta One'");
	this.title_1.name = "title_1";
	this.title_1.textAlign = "center";
	this.title_1.lineHeight = 72;
	this.title_1.lineWidth = 1038;
	this.title_1.parent = this;
	this.title_1.setTransform(521,130);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.title_1},{t:this.title},{t:this.instance_1},{t:this.amount},{t:this.instance}]}).wait(1));

	// Button
	this.ReceiveduttonMC = new lib.ButtonMC();
	this.ReceiveduttonMC.name = "ReceiveduttonMC";
	this.ReceiveduttonMC.setTransform(521,718.2,4.9999,1.7,0,0,0,49.5,50.1);

	this.timeline.addTween(cjs.Tween.get(this.ReceiveduttonMC).wait(1));

	// BG
	this.instance_2 = new lib._2_1();
	this.instance_2.setTransform(263,637);

	this.instance_3 = new lib._6();

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.instance_3},{t:this.instance_2}]}).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.PendingDesciptionMC, new cjs.Rectangle(0,0,1042,889), null);


(lib.SushiMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	this.isSingleFrame = false;
	// timeline functions:
	this.frame_0 = function() {
		if(this.isSingleFrame) {
			return;
		}
		if(this.totalFrames == 1) {
			this.isSingleFrame = true;
		}
		//Layout
		this.resizeCanvas = function() {
			this.scaleX = this.parent.canvasScaleX;
			this.scaleY = this.parent.canvasScaleX;
			this.x = lib.properties.width / 2;
			this.y = lib.properties.height / 2;
		}
		window.addEventListener('resize', this.resizeCanvas.bind(this));	
		this.resizeCanvas();
		this.bitmap = null;
		this.isActive = false;
		/*
		//アイコン生成
		this.bitmap = new createjs.Bitmap("images/Icon/Skin/skin_00.webp");
		this.SushiImageMC.addChild(this.bitmap);
		this.bitmap.x = 0;
		this.bitmap.y = 0;
		this.bitmap.scaleX = 0.5;
		this.bitmap.scaleY = 0.5;
		*/
		this.Click = function(evt)
		{
			var amount = main.touchSps;
			main.AddSushi(amount);
			main.totalClick++;
			
			var clip = new lib.DispNumMC();
			this.parent.addChild(clip);
			
			clip.num_O = new Outline(lib, clip.num, 3, "#FFFFFF", "#000000");	
			clip.num_O.text = "+" + FormatShortNumber(amount, 0, 0);	
			
			var pt = stage.globalToLocal(evt.stageX, evt.stageY);
			clip.x = pt.x + GetRandomInt(-200, 200) * this.parent.canvasScaleX;
			clip.y = pt.y + GetRandomInt(-150, 250) * this.parent.canvasScaleX;
			
			createjs.Tween.get(clip, { override: true })
				.to({ y: clip.y -50 }, 500, createjs.Ease.expoOut)
				.call(() => {
				this.parent.removeChild(clip);
				clip.num_O = null;
				clip = null;
		    });
		
			this.AddClickParticle(pt.x, pt.y);
		}
		
		this.AddClickParticle = function(x, y)
		{
			var particle = null;
			for (var i = 0; i < main.clickParticles.length; i++)
			{
				if(!main.clickParticles[i].visible)
				{
					particle = main.clickParticles[i];
					break;
				}
			}
		
			if(particle == null)
				return;
		
			particle.visible = true;
			particle.x = x;	
			particle.y = y;
			particle.rotation = Math.random() * 360;	
			particle.alpha = 1;
			particle.scaleX = this.parent.canvasScaleX;
			particle.scaleY = this.parent.canvasScaleX;
			
			var targetX = x + (Math.random() * 400 - 200);
			var targetY = y + (Math.random() * 100 + 200);
			var midY = y - (Math.random() * 100 + 50);
		
			createjs.Tween.get(particle)
				.to({ rotation: particle.rotation + (0.5 - Math.random()) * 300 }, 2000, createjs.Ease.linear);
		
			createjs.Tween.get(particle)
				.to({ x: targetX }, 2000, createjs.Ease.linear);
		
			createjs.Tween.get(particle)
				.wait(1500)
				.to({ alpha: 0 }, 500, createjs.Ease.linear);	
			
			createjs.Tween.get(particle)
				.to({ y: midY }, 800, createjs.Ease.quadOut)
				.to({ y: targetY}, 1200, createjs.Ease.quadIn)
				.call(() => {
					particle.visible = false;
			});
		}
		this.SushiImageMC.mouseEnabled = false;
		
		this.ButtonMC.on("mousedown", function(event) {
			if (this.parent.isActive) return; 
				this.parent.isActive = true;
			
			createjs.Tween.get(this.parent.SushiImageMC, { override: true })
				.to({ scaleX: 0.9, scaleY: 0.9 }, 250, createjs.Ease.elasticOut);
		});
		
		this.ButtonMC.on("click", function(evt) {
		
			if (this.parent.isActive)
			{
				this.parent.Click(evt);
				this.parent.isActive = false;
				main.PlaySE("click");
			}
			createjs.Tween.get(this.parent.SushiImageMC, { override: true })
				.to({ scaleX: 1.0, scaleY: 1.0 }, 250, createjs.Ease.elasticOut);
		
		});
		
		this.ButtonMC.on("mouseover", function(event) {
			createjs.Tween.get(this.parent.SushiImageMC, { override: true })
				.to({ scaleX: 1.1, scaleY: 1.1 }, 250, createjs.Ease.elasticOut);
		});
		
		this.ButtonMC.on("mouseout", function(event) {
			createjs.Tween.get(this.parent.SushiImageMC, { override: true })
				.to({ scaleX: 1.0, scaleY: 1.0 }, 250, createjs.Ease.elasticOut);
		});
	}

	// actions tween:
	this.timeline.addTween(cjs.Tween.get(this).call(this.frame_0).wait(1));

	// Image
	this.SushiImageMC = new lib.SushiImageMC();
	this.SushiImageMC.name = "SushiImageMC";
	this.SushiImageMC.setTransform(500,302.5,1,1,0,0,0,500,500);

	this.timeline.addTween(cjs.Tween.get(this.SushiImageMC).wait(1));

	// Button
	this.ButtonMC = new lib.ButtonMC();
	this.ButtonMC.name = "ButtonMC";
	this.ButtonMC.setTransform(498,300.5,10,10,0,0,0,49.8,49.8);

	this.timeline.addTween(cjs.Tween.get(this.ButtonMC).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.SushiMC, new cjs.Rectangle(0,-197.5,1000,1000), null);


(lib.InviteRewardDesciptionMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	this.isSingleFrame = false;
	// timeline functions:
	this.frame_0 = function() {
		if(this.isSingleFrame) {
			return;
		}
		if(this.totalFrames == 1) {
			this.isSingleFrame = true;
		}
		this.resizeCanvas = function() {
			this.scaleX = this.parent.canvasScaleX;
			this.scaleY = this.parent.canvasScaleX;
			this.x = lib.properties.width / 2;
			this.y = lib.properties.height / 2;
		}
		window.addEventListener('resize', this.resizeCanvas.bind(this));	
		this.resizeCanvas();
		this.bitmap = null;
		this.visible = false;
		
		this.obj;
		
		this.stop();
		
		this.Close = function()
		{
			this.parent.MaskMC.removeEventListener("click", this._mask);
			this.parent.MaskMC.visible = false;
			
			createjs.Tween.get(this, { override: true })
			.to({ scaleX: 0, scaleY: 0 }, 250, createjs.Ease.backInOut)
			.call(() => {
				this.visible = false;
		    });	
			main.PlaySE("popup");
		} 
		this.CloseButtonMC.addEventListener("click", this.Close.bind(this));
		
		this.Open = function(_obj)
		{
			this.obj = _obj;
			
			this.visible = true;
			this.scaleX = 0;
			this.scaleY = 0;
			
			this._mask = this.parent.MaskMC.addEventListener("click", this.Mask.bind(this));
			this.parent.MaskMC.visible = true;	
			
			createjs.Tween.get(this, { override: true })
			.to({ scaleX: this.parent.canvasScaleX, scaleY: this.parent.canvasScaleX }, 250, createjs.Ease.backInOut);
		
			main.PlaySE("popup");
		
			if( this.bitmap != null)
			{
				this.removeChild(this.bitmap);
				this.bitmap == null;
			}
		
		//	this.title_O.text = this.obj.data["name"];
		//	this.desciption.text = this.obj.data["desciption"];
			this.gotoAndStop("type" + this.obj.data.type);
		
			switch (this.obj.data.type)
			{
				case 1:
					this.RewardMC.gotoAndStop("type1");
					break;
			}
		}
		
		this.Mask = function(){}
	}

	// actions tween:
	this.timeline.addTween(cjs.Tween.get(this).call(this.frame_0).wait(1));

	// Text
	this.title = new cjs.Text("回収する", "50px 'Potta One'");
	this.title.name = "title";
	this.title.textAlign = "center";
	this.title.lineHeight = 72;
	this.title.lineWidth = 1038;
	this.title.parent = this;
	this.title.setTransform(521,681.95);

	this.title_1 = new cjs.Text("招待報酬を獲得しました！", "50px 'Potta One'");
	this.title_1.name = "title_1";
	this.title_1.textAlign = "center";
	this.title_1.lineHeight = 72;
	this.title_1.lineWidth = 1038;
	this.title_1.parent = this;
	this.title_1.setTransform(521,130);

	this.RewardMC = new lib.RewardMC();
	this.RewardMC.name = "RewardMC";
	this.RewardMC.setTransform(515,444.5,1,1,0,0,0,452,76.5);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.RewardMC},{t:this.title_1},{t:this.title}]}).wait(1));

	// Button
	this.instance = new lib._2_1();
	this.instance.setTransform(263,637);

	this.CloseButtonMC = new lib.CloseButtonMC();
	this.CloseButtonMC.name = "CloseButtonMC";
	this.CloseButtonMC.setTransform(1028,16,1,1,0,0,0,61,61);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.CloseButtonMC},{t:this.instance}]}).wait(1));

	// BG
	this.instance_1 = new lib._6();

	this.timeline.addTween(cjs.Tween.get(this.instance_1).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.InviteRewardDesciptionMC, new cjs.Rectangle(0,-45,1089,934), null);


(lib.InviteDesciptionMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	this.isSingleFrame = false;
	// timeline functions:
	this.frame_0 = function() {
		if(this.isSingleFrame) {
			return;
		}
		if(this.totalFrames == 1) {
			this.isSingleFrame = true;
		}
		this.resizeCanvas = function() {
			this.scaleX = this.parent.canvasScaleX;
			this.scaleY = this.parent.canvasScaleX;
			this.x = lib.properties.width / 2;
			this.y = lib.properties.height / 2;
		}
		window.addEventListener('resize', this.resizeCanvas.bind(this));	
		this.resizeCanvas();
		this.visible = false;
		
		this.Close = function()
		{
			this.parent.MaskMC.removeEventListener("click", this._mask);
			this.parent.MaskMC.visible = false;
			
			createjs.Tween.get(this, { override: true })
			.to({ scaleX: 0, scaleY: 0 }, 250, createjs.Ease.backInOut)
			.call(() => {
				this.visible = false;
		    });
			main.PlaySE("popup");
		} 
		this.CloseButtonMC.addEventListener("click", this.Close.bind(this));
		
		this.InviteListMC.visible = false;
		this.clips =[];
		this.isInit = false;
		
		this.Open = async function()
		{
			this.visible = true;
			this.scaleX = 0;
			this.scaleY = 0;
			
			this._mask = this.parent.MaskMC.addEventListener("click", this.Mask.bind(this));
			this.parent.MaskMC.visible = true;	
			
			createjs.Tween.get(this, { override: true })
			.to({ scaleX: this.parent.canvasScaleX, scaleY: this.parent.canvasScaleX }, 250, createjs.Ease.backInOut);
		
			main.PlaySE("popup");
		
			//古いクリップの削除
			for (let i = 0; i < this.clips.length; i++)
			{
				this.removeChild(this.clips[i]);
				this.clips[i] = null;
			}
			this.clips =[];
		
			console.log("API.リファラル");
			API_referralData = await API_Request({
				url: '/user/referral-status	'
			});
			console.log(API_referralData);
		
			this.invitationCount.text = API_referralData.totalReferralCount;
		
			for (let i = 0; i < API_referralData["rewards"].length; i++)
			{
				let clip = new lib.InviteListMC();
				this.addChild(clip);
				this.clips.push(clip);
				clip.x = 69;
				clip.y = 493  + 170 * i;
				if(API_referralData["rewards"][i].received)	
					clip.gotoAndStop("Acquired");
				else
					clip.gotoAndStop("NotAcquired");
				clip.ammount.text = "×" + API_referralData["rewards"][i].sushiAmount;
				clip.title.text = API_referralData["rewards"][i].invitationCount + "人招待する";
			}
		
			console.log("API.自身のユーザー情報を得る");
			API_userData = await API_Request({
				url: '/user/me',
				maxAttempts: 3
			});
			
			main.goldenSushi = Number(API_userData["user"].currentGoldSushiCount);
			main.totalGoldenSushi = Number(API_userData["user"].totalGoldSushiCount);
		}
		
		this.Mask = function(){} 
		
		/*
		this.State1 = function()
		{
			if(main.invitationState ==  0 && main.invitationCount >= 1)
			{
				this.parent.MessageMC.Open("GoludenSushiを10入手しました");
				main.invitationState = 1;
				main.goldenSushi += 10;
				this.invitationState1.text = "完了";
			}
		}
		this.invitationState1Button.addEventListener("click", this.State1.bind(this));
		
		this.State2 = function()
		{
			if(main.invitationState ==  1 && main.invitationCount >= 5)
			{
				this.parent.MessageMC.Open("GoludenSushiを10入手しました");
				main.invitationState = 2;
				main.goldenSushi += 10;
				this.invitationState2.text = "完了";
			}
		}
		this.invitationState2Button.addEventListener("click", this.State2.bind(this));
		
		this.State3 = function()
		{
			if(main.invitationState ==  2 && main.invitationCount >= 10)
			{
				this.parent.MessageMC.Open("GoludenSushiを10入手しました");
				main.invitationState = 3;
				main.goldenSushi += 10;
				this.invitationState3.text = "完了";
			}
		}
		this.invitationState3Button.addEventListener("click", this.State3.bind(this));
		
		this.State4 = function()
		{
			if(main.invitationState ==  3 && main.invitationCount >= 50)
			{
				this.parent.MessageMC.Open("GoludenSushiを10入手しました");
				main.invitationState = 4;
				main.goldenSushi += 10;
				this.invitationState4.text = "完了";
			}
		}
		this.invitationState4Button.addEventListener("click", this.State4.bind(this));
		*/
		this.Share = function()
		{
			if(Telegram.WebApp.initDataUnsafe.user !== undefined)
			{
				var url = "https://t.me/share/url?url=https://t.me/taro2077_bot?start=" + main.referralCode + "&text=寿司を作ろう";
				window.location.href = url;
			}
			else
				this.parent.MessageMC.Open("Sorry, only in the Telegram.");	
		} 
		this.ShareButtonMC.addEventListener("click", this.Share.bind(this));
		
		this.CopyCode = function()
		{
			if(Telegram.WebApp.initDataUnsafe.user !== undefined)
			{
				navigator.clipboard.writeText(main.referralCode);
				Telegram.WebApp.showAlert("招待コードをクリップボードにコピーしました。");	
			}
			else
				this.parent.MessageMC.Open("Sorry, only in the Telegram.");	
		} 
		this.CopyCodeButtonMC.addEventListener("click", this.CopyCode.bind(this));
	}

	// actions tween:
	this.timeline.addTween(cjs.Tween.get(this).call(this.frame_0).wait(1));

	// AS
	this.text = new cjs.Text("ゲームに招待する", "50px 'Potta One'", "#FFFFFF");
	this.text.textAlign = "center";
	this.text.lineHeight = 72;
	this.text.parent = this;
	this.text.setTransform(512.95,1558.8);

	this.timeline.addTween(cjs.Tween.get(this.text).wait(1));

	// Button
	this.ShareButtonMC = new lib.ButtonMC();
	this.ShareButtonMC.name = "ShareButtonMC";
	this.ShareButtonMC.setTransform(503.5,1600,4.9999,1.7,0,0,0,49.5,50.1);

	this.CopyCodeButtonMC = new lib.ButtonMC();
	this.CopyCodeButtonMC.name = "CopyCodeButtonMC";
	this.CopyCodeButtonMC.setTransform(629.5,1765.2,4.9999,1,0,0,0,49.5,50);

	this.CloseButtonMC = new lib.CloseButtonMC();
	this.CloseButtonMC.name = "CloseButtonMC";
	this.CloseButtonMC.setTransform(1028,16,1,1,0,0,0,61,61);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.CloseButtonMC},{t:this.CopyCodeButtonMC},{t:this.ShareButtonMC}]}).wait(1));

	// Text
	this.InviteListMC = new lib.InviteListMC();
	this.InviteListMC.name = "InviteListMC";
	this.InviteListMC.setTransform(521,569.5,1,1,0,0,0,452,76.5);

	this.text_1 = new cjs.Text("招待コードをコピー", "50px 'Potta One'", "#C5253A");
	this.text_1.textAlign = "center";
	this.text_1.lineHeight = 72;
	this.text_1.parent = this;
	this.text_1.setTransform(624.2,1727);

	this.text_2 = new cjs.Text("または", "50px 'Potta One'");
	this.text_2.textAlign = "center";
	this.text_2.lineHeight = 72;
	this.text_2.parent = this;
	this.text_2.setTransform(317.1,1727);

	this.instance = new lib._4_1();
	this.instance.setTransform(234,1357);

	this.desciption = new cjs.Text("友達の報酬", "50px 'Potta One'", "#FFFFFF");
	this.desciption.name = "desciption";
	this.desciption.textAlign = "center";
	this.desciption.lineHeight = 72;
	this.desciption.lineWidth = 1038;
	this.desciption.parent = this;
	this.desciption.setTransform(521,1202.1);

	this.desciption_1 = new cjs.Text("あなたの報酬", "50px 'Potta One'", "#FFFFFF");
	this.desciption_1.name = "desciption_1";
	this.desciption_1.textAlign = "center";
	this.desciption_1.lineHeight = 72;
	this.desciption_1.lineWidth = 1038;
	this.desciption_1.parent = this;
	this.desciption_1.setTransform(521,376.65);

	this.desciption_2 = new cjs.Text("招待した人数", "50px 'Potta One'");
	this.desciption_2.name = "desciption_2";
	this.desciption_2.textAlign = "center";
	this.desciption_2.lineHeight = 72;
	this.desciption_2.parent = this;
	this.desciption_2.setTransform(406.1,242);

	this.desciption_3 = new cjs.Text("Invite your friends!", "70px 'Potta One'", "#FFFFFF");
	this.desciption_3.name = "desciption_3";
	this.desciption_3.textAlign = "center";
	this.desciption_3.lineHeight = 101;
	this.desciption_3.lineWidth = 1038;
	this.desciption_3.parent = this;
	this.desciption_3.setTransform(521,61);

	this.text_3 = new cjs.Text("×100 Million", "70px 'Potta One'", "#C5253A");
	this.text_3.lineHeight = 101;
	this.text_3.parent = this;
	this.text_3.setTransform(440.05,1345.9);

	this.invitationCount = new cjs.Text("000", "50px 'Potta One'", "#C5253A");
	this.invitationCount.name = "invitationCount";
	this.invitationCount.textAlign = "right";
	this.invitationCount.lineHeight = 72;
	this.invitationCount.parent = this;
	this.invitationCount.setTransform(815.2,242);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.invitationCount},{t:this.text_3},{t:this.desciption_3},{t:this.desciption_2},{t:this.desciption_1},{t:this.desciption},{t:this.instance},{t:this.text_2},{t:this.text_1},{t:this.InviteListMC}]}).wait(1));

	// Image
	this.instance_1 = new lib._3();
	this.instance_1.setTransform(69,1321);

	this.instance_2 = new lib._7();
	this.instance_2.setTransform(144,1188);

	this.instance_3 = new lib._7();
	this.instance_3.setTransform(144,367);

	this.instance_4 = new lib._2_1();
	this.instance_4.setTransform(250,1515);

	this.instance_5 = new lib.title();
	this.instance_5.setTransform(-36,50);

	this.shape = new cjs.Shape();
	this.shape.graphics.f().s("#C5253A").ss(10,0,1).p("EgjeAAAMBG9AAA");
	this.shape.setTransform(624.2,1801.4);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.shape},{t:this.instance_5},{t:this.instance_4},{t:this.instance_3},{t:this.instance_2},{t:this.instance_1}]}).wait(1));

	// BG
	this.instance_6 = new lib._1();

	this.timeline.addTween(cjs.Tween.get(this.instance_6).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.InviteDesciptionMC, new cjs.Rectangle(-36,-45,1125,1914), null);


(lib.HeaderMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	this.isSingleFrame = false;
	// timeline functions:
	this.frame_0 = function() {
		if(this.isSingleFrame) {
			return;
		}
		if(this.totalFrames == 1) {
			this.isSingleFrame = true;
		}
		this.SushiL_O = new Outline(lib, this.SushiL, 5, "#FFFFFF", "#000000");
		this.SushiR_O = new Outline(lib, this.SushiR, 5, "#FFFFFF", "#000000");
		this.Sps_O = new Outline(lib, this.Sps, 5, "#DC962D", "#000000");
	}

	// actions tween:
	this.timeline.addTween(cjs.Tween.get(this).call(this.frame_0).wait(1));

	// Debug
	this.debug = new cjs.Text("jsHeapSizeLimit\njsHeapSizeLimit\njsHeapSizeLimit", "50px 'MS Gothic'", "#FFFFFF");
	this.debug.name = "debug";
	this.debug.lineHeight = 52;
	this.debug.lineWidth = 1104;
	this.debug.parent = this;
	this.debug.setTransform(2,274);

	this.timeline.addTween(cjs.Tween.get(this.debug).wait(1));

	// Text_SushiR
	this.SushiR = new cjs.Text("pieces", "50px 'Potta One'", "#FFFFFF");
	this.SushiR.name = "SushiR";
	this.SushiR.lineHeight = 74;
	this.SushiR.lineWidth = 438;
	this.SushiR.parent = this;
	this.SushiR.setTransform(728.05,37.9);

	this.timeline.addTween(cjs.Tween.get(this.SushiR).wait(1));

	// Text_SushiL
	this.SushiL = new cjs.Text("123.221", "80px 'Potta One'", "#FFFFFF");
	this.SushiL.name = "SushiL";
	this.SushiL.textAlign = "right";
	this.SushiL.lineHeight = 118;
	this.SushiL.lineWidth = 496;
	this.SushiL.parent = this;
	this.SushiL.setTransform(523,14);

	this.timeline.addTween(cjs.Tween.get(this.SushiL).wait(1));

	// Text_Sps
	this.Sps = new cjs.Text("per Second : 123,111 pieces", "50px 'Potta One'", "#DC962D");
	this.Sps.name = "Sps";
	this.Sps.textAlign = "center";
	this.Sps.lineHeight = 74;
	this.Sps.lineWidth = 1120;
	this.Sps.parent = this;
	this.Sps.setTransform(561.95,123);

	this.timeline.addTween(cjs.Tween.get(this.Sps).wait(1));

	// Button
	this.DebugButtonMC = new lib.ButtonMC();
	this.DebugButtonMC.name = "DebugButtonMC";
	this.DebugButtonMC.setTransform(50,50,1,1,0,0,0,50,50);

	this.instance = new lib.menu_config_button();
	this.instance.setTransform(970,48);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.instance},{t:this.DebugButtonMC}]}).wait(1));

	// Image
	this.OptionButtonMC = new lib.ButtonMC();
	this.OptionButtonMC.name = "OptionButtonMC";
	this.OptionButtonMC.setTransform(1039.5,114,1.39,1.32,0,0,0,50,50);

	this.timeline.addTween(cjs.Tween.get(this.OptionButtonMC).wait(1));

	// BG
	this.instance_1 = new lib.header2();
	this.instance_1.setTransform(1548,0);

	this.instance_2 = new lib.header2();
	this.instance_2.setTransform(-129,0);

	this.instance_3 = new lib.header2();
	this.instance_3.setTransform(-258,0);

	this.instance_4 = new lib.header2();
	this.instance_4.setTransform(-387,0);

	this.instance_5 = new lib.header2();
	this.instance_5.setTransform(-516,0);

	this.instance_6 = new lib.header2();
	this.instance_6.setTransform(1419,0);

	this.instance_7 = new lib.header2();
	this.instance_7.setTransform(1290,0);

	this.instance_8 = new lib.header2();
	this.instance_8.setTransform(1161,0);

	this.instance_9 = new lib.header2();
	this.instance_9.setTransform(1032,0);

	this.instance_10 = new lib.header2();
	this.instance_10.setTransform(903,0);

	this.instance_11 = new lib.header2();
	this.instance_11.setTransform(774,0);

	this.instance_12 = new lib.header2();
	this.instance_12.setTransform(645,0);

	this.instance_13 = new lib.header2();
	this.instance_13.setTransform(516,0);

	this.instance_14 = new lib.header2();
	this.instance_14.setTransform(387,0);

	this.instance_15 = new lib.header2();
	this.instance_15.setTransform(258,0);

	this.instance_16 = new lib.header2();
	this.instance_16.setTransform(129,0);

	this.instance_17 = new lib.header2();

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.instance_17},{t:this.instance_16},{t:this.instance_15},{t:this.instance_14},{t:this.instance_13},{t:this.instance_12},{t:this.instance_11},{t:this.instance_10},{t:this.instance_9},{t:this.instance_8},{t:this.instance_7},{t:this.instance_6},{t:this.instance_5},{t:this.instance_4},{t:this.instance_3},{t:this.instance_2},{t:this.instance_1}]}).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.HeaderMC, new cjs.Rectangle(-516,0,2194,1758), null);


(lib.GeneratorCellMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {"Active":0,"Lock":9,Notice:19};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Icon_Button
	this.IconButtonMC = new lib.ButtonMC();
	this.IconButtonMC.name = "IconButtonMC";
	this.IconButtonMC.setTransform(76.35,56.35,1.7,1.6999,0,0,0,0.2,0.2);

	this.timeline.addTween(cjs.Tween.get(this.IconButtonMC).to({_off:true},19).wait(11));

	// BG_Button
	this.ButtonMC = new lib.ButtonMC();
	this.ButtonMC.name = "ButtonMC";
	this.ButtonMC.setTransform(48,34,10.2799,2.1202);

	this.timeline.addTween(cjs.Tween.get(this.ButtonMC).to({_off:true},19).wait(11));

	// Mask
	this.MaskMC = new lib.MaskMC();
	this.MaskMC.name = "MaskMC";
	this.MaskMC.setTransform(49.05,34.2,10.28,2.12,0,0,0,0.1,0.1);
	this.MaskMC.alpha = 0.5;
	this.MaskMC._off = true;

	this.timeline.addTween(cjs.Tween.get(this.MaskMC).wait(9).to({_off:false},0).wait(10).to({regX:0.6,x:54.15,alpha:1},0).wait(11));

	// Dodd
	this.DoddMC = new lib.DoddMC();
	this.DoddMC.name = "DoddMC";
	this.DoddMC.setTransform(1060,57,1,1,0,0,0,45,45);

	this.timeline.addTween(cjs.Tween.get(this.DoddMC).wait(30));

	// レイヤー_8
	this.titleHatena = new cjs.Text("???", "40px 'Potta One'");
	this.titleHatena.name = "titleHatena";
	this.titleHatena.lineHeight = 60;
	this.titleHatena.lineWidth = 636;
	this.titleHatena.parent = this;
	this.titleHatena.setTransform(262,64);
	this.titleHatena._off = true;

	this.timeline.addTween(cjs.Tween.get(this.titleHatena).wait(19).to({_off:false},0).wait(11));

	// hatena
	this.instance = new lib.not();
	this.instance.setTransform(76,56,0.5666,0.5666);
	this.instance._off = true;

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(19).to({_off:false},0).wait(11));

	// Icon
	this.IconMC = new lib.IconMC();
	this.IconMC.name = "IconMC";
	this.IconMC.setTransform(76,56);

	this.timeline.addTween(cjs.Tween.get(this.IconMC).to({_off:true},19).wait(11));

	// Text_amount
	this.posession = new cjs.Text("100", "65px 'Potta One'");
	this.posession.name = "posession";
	this.posession.textAlign = "center";
	this.posession.lineHeight = 96;
	this.posession.parent = this;
	this.posession.setTransform(992.15,89);

	this.timeline.addTween(cjs.Tween.get(this.posession).to({_off:true},9).wait(21));

	// Text_title
	this.title = new cjs.Text("Sushi Master's Chopsticks", "40px 'Potta One'");
	this.title.name = "title";
	this.title.lineHeight = 60;
	this.title.lineWidth = 636;
	this.title.parent = this;
	this.title.setTransform(262,64);

	this.timeline.addTween(cjs.Tween.get(this.title).to({_off:true},19).wait(11));

	// Text_cost
	this.cost = new cjs.Text("3.158,759", "50px 'Potta One'", "#0D9000");
	this.cost.name = "cost";
	this.cost.lineHeight = 74;
	this.cost.lineWidth = 496;
	this.cost.parent = this;
	this.cost.setTransform(356.55,128.1);

	this.timeline.addTween(cjs.Tween.get(this.cost).wait(30));

	// Sushi
	this.instance_1 = new lib.mini_sushi();
	this.instance_1.setTransform(263,134);

	this.timeline.addTween(cjs.Tween.get(this.instance_1).wait(30));

	// BG
	this.instance_2 = new lib.cell_bg1();
	this.instance_2.setTransform(45,31);

	this.timeline.addTween(cjs.Tween.get(this.instance_2).wait(30));

	this._renderFirstFrame();

}).prototype = p = new cjs.MovieClip();
p.nominalBounds = new cjs.Rectangle(45,12,1060,243);


(lib.DebugContentMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Text
	this.ClearNotificationButtonMC = new lib.DebugMC();
	this.ClearNotificationButtonMC.name = "ClearNotificationButtonMC";
	this.ClearNotificationButtonMC.setTransform(290,228,1,1,0,0,0,250,50);

	this.LocalStorageButtonMC = new lib.DebugMC();
	this.LocalStorageButtonMC.name = "LocalStorageButtonMC";
	this.LocalStorageButtonMC.setTransform(834.4,228,1,1,0,0,0,250,50);

	this.MemoryButtonMC = new lib.DebugMC();
	this.MemoryButtonMC.name = "MemoryButtonMC";
	this.MemoryButtonMC.setTransform(834.4,100,1,1,0,0,0,250,50);

	this.SpeedButtonMC = new lib.DebugMC();
	this.SpeedButtonMC.name = "SpeedButtonMC";
	this.SpeedButtonMC.setTransform(290,100,1,1,0,0,0,250,50);

	this.log = new cjs.Text("", "30px 'Potta One'", "#FFFFFF");
	this.log.name = "log";
	this.log.lineHeight = 45;
	this.log.lineWidth = 1121;
	this.log.parent = this;
	this.log.setTransform(-20.5,422.1);

	this.ClearButtonMC = new lib.DebugMC();
	this.ClearButtonMC.name = "ClearButtonMC";
	this.ClearButtonMC.setTransform(290,370.1,1,1,0,0,0,250,50);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.ClearButtonMC},{t:this.log},{t:this.SpeedButtonMC},{t:this.MemoryButtonMC},{t:this.LocalStorageButtonMC},{t:this.ClearNotificationButtonMC}]}).wait(1));

	// BG
	this.ContentBGMC = new lib.ButtonMC();
	this.ContentBGMC.name = "ContentBGMC";
	this.ContentBGMC.setTransform(0,0,11.25,0.9999);

	this.timeline.addTween(cjs.Tween.get(this.ContentBGMC).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.DebugContentMC, new cjs.Rectangle(-22.5,0,1147.5,1676.4), null);


(lib.SliderMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	this.isSingleFrame = false;
	// timeline functions:
	this.frame_0 = function() {
		if(this.isSingleFrame) {
			return;
		}
		if(this.totalFrames == 1) {
			this.isSingleFrame = true;
		}
		this.SetIcon = function(str) {
			this.SliderButtonMC.gotoAndStop(str);
		}
		this.SetValue = function(_value) {
			content.x = _value * (maxX - minX) + minX;
			mask.scaleX = content.x	/ maxX * 2;
			value.text = Math.round((content.x - minX) / (maxX - minX) * 100);
		}
		var callback;
		this.SetCallBack = function(_callback) {
			callback = _callback;
		}
		
		var content = this.SliderButtonMC;
		var value = this.value;
		var startX;
		var startScrollX;
		var isScrolling = false;
		var minX = 0 + 50;
		var maxX = 662 - 50;
		isScrolled = false;
		
		content.addEventListener("mousedown", startScroll);
		stage.addEventListener("stagemousemove", doScroll);
		stage.addEventListener("stagemouseup", endScroll);
		
		function startScroll(event) {
		    event.preventDefault();
		    isScrolling = true;
		    startX = getX(event);
		    startScrollX = content.x;
		    velocity = 0;
			isScrolled = false;
		}
			
		function doScroll(event) {
		    if (isScrolling) {
		        event.preventDefault();
		        var dx = getX(event) - startX;
		        content.x = startScrollX + dx;
		
		        if (content.x < minX) {
		            content.x = minX;
		        }
		        if (content.x > maxX) {
		            content.x = maxX;
		        }
				isScrolled = true;
			
				mask.scaleX = (content.x - minX) / (maxX - minX) * 2;
				value.text = Math.round((content.x - minX) / (maxX - minX) * 100);
		    }
		}
		
		function endScroll(event) {
		    isScrolling = false;
			if(callback)
				callback((content.x - minX) / (maxX - minX));
		}
		
		function getX(event) {
			var x;	
		    if (event.touches && event.touches.length > 0) {
		        x = event.touches[0].clientX;
		    }
		    x = event.stageX;	
			var pt = stage.globalToLocal(x, 0);
		    return pt.x   /   exportRoot.canvasScaleX;
		}
	}

	// actions tween:
	this.timeline.addTween(cjs.Tween.get(this).call(this.frame_0).wait(1));

	// Text
	this.value = new cjs.Text("100", "50px 'Potta One'", "#FFFFFF");
	this.value.name = "value";
	this.value.textAlign = "center";
	this.value.lineHeight = 72;
	this.value.lineWidth = 154;
	this.value.parent = this;
	this.value.setTransform(755.15,-36.7);

	this.timeline.addTween(cjs.Tween.get(this.value).wait(1));

	// Button
	this.SliderButtonMC = new lib.SliderButtonMC();
	this.SliderButtonMC.name = "SliderButtonMC";
	this.SliderButtonMC.setTransform(200,0);

	this.timeline.addTween(cjs.Tween.get(this.SliderButtonMC).wait(1));

	// Mask (mask)
	var mask = new cjs.Shape();
	mask._off = true;
	mask.graphics.p("EgztAH0IAAvnMBnbAAAIAAPng");

	// Gain
	this.instance = new lib.a4();
	this.instance.setTransform(0,-23);

	var maskedShapeInstanceList = [this.instance];

	for(var shapedInstanceItr = 0; shapedInstanceItr < maskedShapeInstanceList.length; shapedInstanceItr++) {
		maskedShapeInstanceList[shapedInstanceItr].mask = mask;
	}

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	// BG
	this.instance_1 = new lib.a1();
	this.instance_1.setTransform(695,-32);

	this.instance_2 = new lib.a5();
	this.instance_2.setTransform(0,-23);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.instance_2},{t:this.instance_1}]}).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.SliderMC, new cjs.Rectangle(0,-58,834.2,126), null);


(lib.ConfigDesciptionMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	this.isSingleFrame = false;
	// timeline functions:
	this.frame_0 = function() {
		if(this.isSingleFrame) {
			return;
		}
		if(this.totalFrames == 1) {
			this.isSingleFrame = true;
		}
		this.resizeCanvas = function() {
			this.scaleX = this.parent.canvasScaleX;
			this.scaleY = this.parent.canvasScaleX;
			this.x = lib.properties.width / 2;
			this.y = lib.properties.height / 2;
		}
		window.addEventListener('resize', this.resizeCanvas.bind(this));	
		this.resizeCanvas();
		this.bitmap = null;
		this.visible = false;
		
		this.stop();
		
		this.ChangeBGMVolume = function(value)
		{
			main.bgm = value;
			main.PlayBGM();
		} 
		
		this.ChangeSEVolume = function(value)
		{
			main.se = value;
		}
		
		this.Close = function()
		{
			this.parent.MaskMC.removeEventListener("click", this._mask);
			this.parent.MaskMC.visible = false;
			
			createjs.Tween.get(this, { override: true })
			.to({ scaleX: 0, scaleY: 0 }, 250, createjs.Ease.backInOut)
			.call(() => {
				this.visible = false;
		    });	
			main.PlaySE("popup");
			localStorage.setItem('bgm', main.bgm);
			localStorage.setItem('se', main.se);
		} 
		this.CloseButtonMC.addEventListener("click", this.Close.bind(this));
		
		this.Open = function()
		{
			this.visible = true;
			this.scaleX = 0;
			this.scaleY = 0;
			
			this._mask = this.parent.MaskMC.addEventListener("click", this.Mask.bind(this));
			this.parent.MaskMC.visible = true;	
			
			createjs.Tween.get(this, { override: true })
			.to({ scaleX: this.parent.canvasScaleX, scaleY: this.parent.canvasScaleX }, 250, createjs.Ease.backInOut);
		
			main.PlaySE("open");
		
			this.BGMSliderMC.SetValue(main.bgm);
			this.BGMSliderMC.SetIcon("BGM");
			this.BGMSliderMC.SetCallBack(this.ChangeBGMVolume);
		
			this.SESliderMC.SetValue(main.se);
			this.SESliderMC.SetIcon("SE");
			this.SESliderMC.SetCallBack(this.ChangeSEVolume);
		}
		
		this.Mask = function(){} 
		
		this.Save = async function()
		{
			main.SushiUpdate();
			exportRoot.MessageMC.Open("セーブ完了");
			
		} 
		this.SaveButtonMC.addEventListener("click", this.Save.bind(this));
	}

	// actions tween:
	this.timeline.addTween(cjs.Tween.get(this).call(this.frame_0).wait(1));

	// Text
	this.title = new cjs.Text("SE", "50px 'Potta One'");
	this.title.name = "title";
	this.title.textAlign = "center";
	this.title.lineHeight = 72;
	this.title.lineWidth = 146;
	this.title.parent = this;
	this.title.setTransform(103.9,958);

	this.desciption = new cjs.Text("Setting", "70px 'Potta One'", "#FFFFFF");
	this.desciption.name = "desciption";
	this.desciption.textAlign = "center";
	this.desciption.lineHeight = 101;
	this.desciption.lineWidth = 1038;
	this.desciption.parent = this;
	this.desciption.setTransform(521,61);

	this.title_1 = new cjs.Text("Save", "70px 'Potta One'", "#FFFFFF");
	this.title_1.name = "title_1";
	this.title_1.textAlign = "center";
	this.title_1.lineHeight = 101;
	this.title_1.lineWidth = 1038;
	this.title_1.parent = this;
	this.title_1.setTransform(521,307.95);

	this.title_2 = new cjs.Text("BGM", "50px 'Potta One'");
	this.title_2.name = "title_2";
	this.title_2.textAlign = "center";
	this.title_2.lineHeight = 72;
	this.title_2.lineWidth = 146;
	this.title_2.parent = this;
	this.title_2.setTransform(103.9,713.1);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.title_2},{t:this.title_1},{t:this.desciption},{t:this.title}]}).wait(1));

	// レイヤー_3
	this.SaveButtonMC = new lib.ButtonMC();
	this.SaveButtonMC.name = "SaveButtonMC";
	this.SaveButtonMC.setTransform(510.5,362.15,4.9999,1.7,0,0,0,49.5,50.1);

	this.timeline.addTween(cjs.Tween.get(this.SaveButtonMC).wait(1));

	// Button
	this.instance = new lib._2_1();
	this.instance.setTransform(263,277);

	this.CloseButtonMC = new lib.CloseButtonMC();
	this.CloseButtonMC.name = "CloseButtonMC";
	this.CloseButtonMC.setTransform(1028,16,1,1,0,0,0,61,61);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.CloseButtonMC},{t:this.instance}]}).wait(1));

	// BG
	this.BGMSliderMC = new lib.SliderMC();
	this.BGMSliderMC.name = "BGMSliderMC";
	this.BGMSliderMC.setTransform(188.9,753.1);

	this.SESliderMC = new lib.SliderMC();
	this.SESliderMC.name = "SESliderMC";
	this.SESliderMC.setTransform(188.9,992.4);

	this.instance_1 = new lib.title();
	this.instance_1.setTransform(-36,50);

	this.instance_2 = new lib.a6();

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.instance_2},{t:this.instance_1},{t:this.SESliderMC},{t:this.BGMSliderMC}]}).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.ConfigDesciptionMC, new cjs.Rectangle(-142.1,-45,1231.1,1236), null);


(lib.UpgradeButtonMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Image
	this.instance = new lib.menu_upgrade_button();
	this.instance.setTransform(9,37);

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	// Button
	this.instance_1 = new lib.ButtonMC();
	this.instance_1.setTransform(0,0,2.35,2.5);

	this.timeline.addTween(cjs.Tween.get(this.instance_1).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.UpgradeButtonMC, new cjs.Rectangle(0,0,235,250), null);


(lib.ShopButtonMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Image
	this.instance = new lib.menu_shop_button();
	this.instance.setTransform(9,37);

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	// Button
	this.instance_1 = new lib.ButtonMC();
	this.instance_1.setTransform(0,0,2.3499,2.5);

	this.timeline.addTween(cjs.Tween.get(this.instance_1).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.ShopButtonMC, new cjs.Rectangle(0,0,235,250), null);


(lib.InviteButtonMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Button
	this.ButtonMC = new lib.ButtonMC();
	this.ButtonMC.name = "ButtonMC";
	this.ButtonMC.setTransform(0,0,1.7002,2.5);

	this.timeline.addTween(cjs.Tween.get(this.ButtonMC).wait(1));

	// Image
	this.instance = new lib.menu_invite();
	this.instance.setTransform(3,36);

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.InviteButtonMC, new cjs.Rectangle(0,0,170,250), null);


(lib.GeneratorButtonMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Image
	this.instance = new lib.menu_generator_button();
	this.instance.setTransform(26,37);

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	// Button
	this.instance_1 = new lib.ButtonMC();
	this.instance_1.setTransform(0,0,2.4999,2.4999);

	this.timeline.addTween(cjs.Tween.get(this.instance_1).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.GeneratorButtonMC, new cjs.Rectangle(0,0,250,250), null);


(lib.AchievementButtonMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Image
	this.instance = new lib.menu_achievement_button();
	this.instance.setTransform(9,37);

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	// Button
	this.instance_1 = new lib.ButtonMC();
	this.instance_1.setTransform(117.5,125,2.3499,2.5,0,0,0,50,50);

	this.timeline.addTween(cjs.Tween.get(this.instance_1).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.AchievementButtonMC, new cjs.Rectangle(0,0,235,250), null);


(lib.bgMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	this.isSingleFrame = false;
	// timeline functions:
	this.frame_0 = function() {
		if(this.isSingleFrame) {
			return;
		}
		if(this.totalFrames == 1) {
			this.isSingleFrame = true;
		}
		createjs.Tween.get(this.RadiationMC, { loop: true })
			.to({ rotation: 360 }, 50000);
	}

	// actions tween:
	this.timeline.addTween(cjs.Tween.get(this).call(this.frame_0).wait(1));

	// Scroll
	this.SushiBGScrollMC = new lib.SushiBGScrollMC();
	this.SushiBGScrollMC.name = "SushiBGScrollMC";

	this.timeline.addTween(cjs.Tween.get(this.SushiBGScrollMC).wait(1));

	// BG
	this.RadiationMC = new lib.RadiationMC();
	this.RadiationMC.name = "RadiationMC";
	this.RadiationMC.setTransform(563.75,1218,1,1,0,0,0,1218,1218);

	this.timeline.addTween(cjs.Tween.get(this.RadiationMC).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.bgMC, new cjs.Rectangle(-898.2,-243.9,2923.1000000000004,2923), null);


(lib.AchievementDesciptionMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	this.isSingleFrame = false;
	// timeline functions:
	this.frame_0 = function() {
		if(this.isSingleFrame) {
			return;
		}
		if(this.totalFrames == 1) {
			this.isSingleFrame = true;
		}
		this.resizeCanvas = function() {
			this.scaleX = this.parent.canvasScaleX;
			this.scaleY = this.parent.canvasScaleX;
			this.x = lib.properties.width / 2;
			this.y = ((2436 * this.parent.canvasScaleY -300 * this.parent.canvasScaleX -914 * this.parent.canvasScaleX)
					- (278 * this.parent.canvasScaleX)) / 2 + (278 * this.parent.canvasScaleX);
		}
		window.addEventListener('resize', this.resizeCanvas.bind(this));	
		this.resizeCanvas();
		this.bitmap = null;
		this.visible = false;
		
		this.title_O = new Outline(lib, this.title, 5, "#000000", "#FFFFFF");
		this.obj;
		
		this.Close = function()
		{
			//this.parent.MaskMC.removeEventListener("click", this._close);
			//this.parent.MaskMC.visible = false;
			this.ButtonMC.removeEventListener("click", this._close);	
			this.obj.achievementClip.AchievementActiveMC.visible = false;
			
			createjs.Tween.get(this, { override: true })
			.to({ scaleX: 0, scaleY: 0 }, 250, createjs.Ease.backInOut)
			.call(() => {
				this.visible = false;
		    });
			main.PlaySE("popup");
		} 
		
		this.Open = function(_obj)
		{
			this.obj = _obj;
			
			this.visible = true;
			this.scaleX = 0;
			this.scaleY = 0;
			
			//this._close = this.parent.MaskMC.addEventListener("click", this.Close.bind(this));
			//this.parent.MaskMC.visible = true;
			this._close = this.ButtonMC.addEventListener("click", this.Close.bind(this));	
			
			createjs.Tween.get(this, { override: true })
			.to({ scaleX: this.parent.canvasScaleX, scaleY: this.parent.canvasScaleX }, 250, createjs.Ease.backInOut);
		
			if( this.bitmap != null)
			{
				this.removeChild(this.bitmap);
				this.bitmap == null;
			}
		
			//アイコン生成
			if(this.obj.category == 2)
				this.bitmap = new createjs.Bitmap("images/upgrade/upgrade_" + this.obj.image + ".webp");
			else
				this.bitmap = new createjs.Bitmap("images/achievement/achievement_" + this.obj.image + ".webp");
			this.addChild(this.bitmap);
			this.bitmap.x = 65;
			this.bitmap.y = 45;
			this.bitmap.scaleX = 200 / 300;
			this.bitmap.scaleY = 200 / 300;	
			
			this.title_O.text = this.obj.name;
			this.description.text = this.obj.description;
			
			SetWrapText(this.description);	
		}
	}

	// actions tween:
	this.timeline.addTween(cjs.Tween.get(this).call(this.frame_0).wait(1));

	// Button
	this.ButtonMC = new lib.ButtonMC();
	this.ButtonMC.name = "ButtonMC";
	this.ButtonMC.setTransform(562.5,239.55,11.2502,4.8001,0,0,0,50,49.9);

	this.timeline.addTween(cjs.Tween.get(this.ButtonMC).wait(1));

	// Text_title
	this.title = new cjs.Text("Sushi Syokunin", "60px 'Potta One'");
	this.title.name = "title";
	this.title.lineHeight = 87;
	this.title.lineWidth = 779;
	this.title.parent = this;
	this.title.setTransform(281.7,43.15);

	this.timeline.addTween(cjs.Tween.get(this.title).wait(1));

	// Text
	this.description = new cjs.Text("「押すだけで寿司が出てくる。\nたまにネタとシャリが逆さまですが。」", "50px 'Potta One'");
	this.description.name = "description";
	this.description.lineHeight = 72;
	this.description.lineWidth = 975;
	this.description.parent = this;
	this.description.setTransform(78,272.75);

	this.timeline.addTween(cjs.Tween.get(this.description).wait(1));

	// BG
	this.instance = new lib.achievementDesciption();

	this.shape = new cjs.Shape();
	this.shape.graphics.f().s("#00CC33").ss(1,1,1).p("EhSBgXbMCkDAAAMAAAAu3MikDAAAg");
	this.shape.setTransform(565.05,188);

	this.shape_1 = new cjs.Shape();
	this.shape_1.graphics.f("#FF0000").s().p("EhSBAXcMAAAgu3MCkDAAAMAAAAu3g");
	this.shape_1.setTransform(565.05,188);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.shape_1},{t:this.shape},{t:this.instance}]}).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.AchievementDesciptionMC, new cjs.Rectangle(0,0,1125,480), null);


(lib.AchievementCellMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {"Active":0,"Lock":9};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Dodd
	this.DoddMC = new lib.DoddMC();
	this.DoddMC.name = "DoddMC";
	this.DoddMC.setTransform(178,25.55,1,1,0,0,0,45,45);

	this.timeline.addTween(cjs.Tween.get(this.DoddMC).to({_off:true},9).wait(11));

	// hatena
	this.instance = new lib.not2();
	this.instance.setTransform(0,0,0.6667,0.6667);
	this.instance._off = true;

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(9).to({_off:false},0).wait(11));

	// BG_Button
	this.ButtonMC = new lib.ButtonMC();
	this.ButtonMC.name = "ButtonMC";
	this.ButtonMC.setTransform(0,0,1.9998,1.9998);

	this.timeline.addTween(cjs.Tween.get(this.ButtonMC).to({_off:true},9).wait(11));

	// Icon
	this.IconMC = new lib.IconMC();
	this.IconMC.name = "IconMC";
	this.IconMC.setTransform(104.5,104.5,1,1,0,0,0,104.5,104.5);

	this.timeline.addTween(cjs.Tween.get(this.IconMC).to({_off:true},9).wait(11));

	// UpgradeActive
	this.AchievementUpgradeActiveMC = new lib.AchievementUpgradeActiveMC();
	this.AchievementUpgradeActiveMC.name = "AchievementUpgradeActiveMC";
	this.AchievementUpgradeActiveMC.setTransform(108.5,110.1,1,1,0,0,0,108.5,110.1);

	this.timeline.addTween(cjs.Tween.get(this.AchievementUpgradeActiveMC).to({_off:true},9).wait(11));

	// Active
	this.AchievementActiveMC = new lib.AchievementActiveMC();
	this.AchievementActiveMC.name = "AchievementActiveMC";
	this.AchievementActiveMC.setTransform(99,99,0.9133,0.9132,0,0,0,109.5,109.5);

	this.timeline.addTween(cjs.Tween.get(this.AchievementActiveMC).to({_off:true},9).wait(11));

	this._renderFirstFrame();

}).prototype = p = new cjs.MovieClip();
p.nominalBounds = new cjs.Rectangle(-10,-19.4,233,229.4);


(lib.UpgradeContentMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Cell
	this.UpgradeCellMC = new lib.UpgradeCellMC();
	this.UpgradeCellMC.name = "UpgradeCellMC";

	this.timeline.addTween(cjs.Tween.get(this.UpgradeCellMC).wait(1));

	// BG
	this.ContentBGMC = new lib.ButtonMC();
	this.ContentBGMC.name = "ContentBGMC";
	this.ContentBGMC.setTransform(0,0,11.25,0.9999);

	this.timeline.addTween(cjs.Tween.get(this.ContentBGMC).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.UpgradeContentMC, new cjs.Rectangle(0,0,1125,256), null);


(lib.ShopDesciptionMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {"type1":9,"type2":19,"type3":30,"type4":41};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// timeline functions:
	this.frame_0 = function() {
		this.resizeCanvas = function() {
			this.scaleX = this.parent.canvasScaleX;
			this.scaleY = this.parent.canvasScaleX;
			this.x = lib.properties.width / 2;
			this.y = lib.properties.height / 2;
		}
		window.addEventListener('resize', this.resizeCanvas.bind(this));	
		this.resizeCanvas();
		this.bitmap = null;
		this.visible = false;
		
		this.title_O = new Outline(lib, this.title, 5, "#000000", "#FFFFFF");
		this.obj;
		
		this.stop();
		
		this.Mask = function(){} 
		
		this.Close = function()
		{
			this.parent.MaskMC.removeEventListener("click", this._mask);
			this.parent.MaskMC.visible = false;
			
			createjs.Tween.get(this, { override: true })
			.to({ scaleX: 0, scaleY: 0 }, 250, createjs.Ease.backInOut)
			.call(() => {
				this.visible = false;
		    });	
			main.PlaySE("popup");
		} 
		this.CloseButtonMC.addEventListener("click", this.Close.bind(this));
		
		this.Open = function(_obj)
		{
			this.obj = _obj;
			
			this.visible = true;
			this.scaleX = 0;
			this.scaleY = 0;
			
			this._mask = this.parent.MaskMC.addEventListener("click", this.Mask.bind(this));
			this.parent.MaskMC.visible = true;	
			
			createjs.Tween.get(this, { override: true })
			.to({ scaleX: this.parent.canvasScaleX, scaleY: this.parent.canvasScaleX }, 250, createjs.Ease.backInOut);
		
			main.PlaySE("popup");
		
			if( this.bitmap != null)
			{
				this.removeChild(this.bitmap);
				this.bitmap == null;
			}
		
			this.title_O.text = this.obj.name;
			SetWrapText(this.desciption);
			this.gotoAndStop("type" + this.obj.type);
			
			switch (this.obj.type)
			{
				case 1:
					//this.regY = 1145 / 2;
					this.ShopConfilmCell1MC.amount.text = "×" + this.obj.amount.toLocaleString();
					this.ShopType1ButtonMC.price.text = this.obj.price.toLocaleString();
					break;
				case 2:
					this.ShopConfilmCell2MC.amount.text = "×" + this.obj.amount.toLocaleString();
					if(this.obj.price > main.goldenSushi)
					{
						this.ShopType2ButtonMC.price.text = this.obj.price.toLocaleString();
						this.ShopType2ButtonMC.gotoAndStop("Shortage");
					}
					else
					{
						this.ShopType2ButtonMC.gotoAndStop("Active");
						this.ShopType2ButtonMC.price.text = this.obj.price.toLocaleString();
					}
					break;
				case 3:
					this.description.text = this.obj.description;
					SetWrapText(this.detail);
					if(this.obj.posession)
					{
						this.ShopType3ButtonMC.gotoAndStop("Selected");	
					}
					else if(this.obj.priceGolden > main.goldenSushi)
					{
						this.ShopType3ButtonMC.gotoAndStop("Shortage");
						this.ShopType3ButtonMC.price.text = this.obj.priceGolden.toLocaleString();
					}
					else
					{
						this.ShopType3ButtonMC.gotoAndStop("Active");
						this.ShopType3ButtonMC.price.text = this.obj.priceGolden.toLocaleString();
					}
					//アイコン生成
					this.bitmap = new createjs.Bitmap("images/shop/robo" + this.obj.id + ".webp");
					this.addChild(this.bitmap);
					this.bitmap.x = 360;
					this.bitmap.y = 228;
					this.bitmap.scaleX = 1;
					this.bitmap.scaleY = 1;	
					break;
				case 4:
					this.description.text = this.obj.description;
					SetWrapText(this.description);
					if(main.skinId == this.obj.id)
					{
						this.ShopType4ButtonMC.gotoAndStop("Selected");
					}	
					else if(this.obj.posession)
					{
						this.ShopType4ButtonMC.gotoAndStop("NotSelected");
					}
					else if(this.obj.priceGolden > main.goldenSushi)
					{
						this.ShopType4ButtonMC.gotoAndStop("Shortage");	
						this.ShopType4ButtonMC.price.text = this.obj.priceGolden.toLocaleString();
					}
					else
					{
						this.ShopType4ButtonMC.gotoAndStop("NotPurchased");
						this.ShopType4ButtonMC.price.text = this.obj.priceGolden.toLocaleString();
					}
					//アイコン生成
					this.bitmap = new createjs.Bitmap("images/shop/shopitem_" + this.obj.id.toString().padStart(2, '0') + ".webp");
					this.addChild(this.bitmap);
					this.bitmap.x = 360;
					this.bitmap.y = 228;
					this.bitmap.scaleX = 1;
					this.bitmap.scaleY = 1;	
					break;
			}
		}
		
		this.SubmitType1 = async function()
		{
			this.parent.Mask3MC.visible = true;
		
			var isSuccess = false;
			
		    try {
				console.log("API.ゴールデン寿司を購入");
				var data = await API_Request({
					url: '/market/golden-sushi/' + this.obj.id + '/purchase',
					method: 'POST',
					maxAttempts: 3
				});
			
				main.log(data.paymentUrl);
			
		        window.Telegram.WebApp.openInvoice(data.paymentUrl, (status) => {
		            main.log("Payment status : " + status);
		            switch(status) {
		                case "paid":
							main.log("支払い完了");
							isSuccess = true;
		                    break;
		                case "cancelled":
							this.parent.MessageMC.Open("Cancelled");					
		                    break;
		                case "failed":
							this.parent.MessageMC.Open("Payment failed");
		                    break;
		                default:
							this.parent.MessageMC.Open("Unknown payment status");
		            }
		        });	
		    } catch (error) {
				this.parent.MessageMC.Open(error.message);
				main.log(error.message);
		    }
		
			if(isSuccess)
			{
				console.log("API.ユーザ情報取得");
		        API_userData = await API_Request({
		            url: '/user/me',
					maxAttempts: 3
		        });
		
				main.goldenSushi = Number(API_userData["user"].currentGoldSushiCount);
				main.totalGoldenSushi = Number(API_userData["user"].totalGoldSushiCount);
				this.parent.ShopPanelMC.ContentMC.goldenSushi.text = main.goldenSushi;
			}
		
			this.parent.Mask3MC.visible = false;
			this.Close();
		}
		this.ShopType1ButtonMC.addEventListener("click", this.SubmitType1.bind(this));
		
		this.SubmitType2 = async function()
		{
			if(this.obj.price > main.goldenSushi)
				return;
			
			this.parent.Mask3MC.visible = true;
		
			if(main.sushiAdd > 0)
			{
				console.log("API.クリックで得た寿司を保存");
				await API_Request({
					url: '/sushi/add',
					method: 'POST',
					maxAttempts: 3,
					data: {
						amount: main.sushiAdd
					}
				});	
				main.sushiAdd = 0;
			}
		
		    try {
				console.log("API.寿司を購入");
				await API_Request({
					url: '/market/sushi/' + this.obj.id + '/purchase',
					method: 'POST',
					maxAttempts: 3,
				});
		    } catch (error) {
				this.parent.MessageMC.Open("購入に失敗しました");
				this.parent.Mask3MC.visible = false;
				this.Close();
				return;
		    }
			
			console.log("API.自身のユーザー情報を得る");
			API_userData = await API_Request({
				url: '/user/me',
				maxAttempts: 3
			});
			
			main.sushi = Number(API_userData["user"].currentSushiCount);
			main.totalSushi = Number(API_userData["user"].totalSushiCount);
			main.goldenSushi = Number(API_userData["user"].currentGoldSushiCount);
			this.parent.ShopPanelMC.ContentMC.goldenSushi.text = main.goldenSushi;
			main.SushiDisplayUdates();
			this.parent.MessageMC.Open( this.obj.name + "を受け取りました");
		
			this.parent.Mask3MC.visible = false;
			this.Close();
		} 
		this.ShopType2ButtonMC.addEventListener("click", this.SubmitType2.bind(this));
		
		this.SubmitType3 = async function()
		{
			if(this.obj.posession)
				return;
					
			if(this.obj.goldenSushi > main.goldenSushi)
				return;
			
			this.parent.Mask3MC.visible = true;
		
		    try {
				console.log("API.ロボットを購入");
				await API_Request({
					url: '/robot/' + this.obj.id + '/purchase',
					method: 'POST',
					maxAttempts: 3,
				});
		    } catch (error) {
				this.parent.MessageMC.Open("購入に失敗しました");
				this.parent.Mask3MC.visible = false;
				this.Close();
				return;
		    }
			
			this.obj.posession = true;
			this.obj.clip.ShopActiveMC.visible = true;
			this.obj.clip.gotoAndStop("Used");
		
			console.log("API.自身のユーザー情報を得る");
			API_userData = await API_Request({
				url: '/user/me',
				maxAttempts: 3
			});
			
			main.goldenSushi = Number(API_userData["user"].currentGoldSushiCount);
			main.totalGoldenSushi = Number(API_userData["user"].totalGoldSushiCount);
			this.parent.ShopPanelMC.ContentMC.goldenSushi.text = main.goldenSushi;
		
			this.parent.MessageMC.Open( this.obj.name + "を受け取りました");
		
			this.parent.Mask3MC.visible = false;
			this.Close();
		} 
		this.ShopType3ButtonMC.addEventListener("click", this.SubmitType3.bind(this));
		
		this.SubmitType4 = async function()
		{
			//所持している場合
			if(this.obj.posession)
			{
				this.parent.Mask3MC.visible = true;
				
				//設定している場合
				if(main.skinId == this.obj.id)
				{
					main.skinId = 0;
					//this.parent.MessageMC.Open(this.obj.name + "を外しました");
					console.log("API.Skinを除外");
					API_Request({
						url: '/skin/' + this.obj.id + '/unset',
						method: 'POST',
						maxAttempts: 3,
					});
				}
				else
				{
					main.skinId = this.obj.id;
					//this.parent.MessageMC.Open(this.obj.name + "を設定しました");
					console.log("API.Skinを設定");
					await API_Request({
						url: '/skin/' + this.obj.id + '/set',
						method: 'POST',
						maxAttempts: 3,
					});
				}
				for (var i = 0; i < main.skinShops.length; i++)
				{
					main.skinShops[i].clip.ShopActiveMC.visible = (main.skinShops[i].id == main.skinId) ? true: false;
				}
				main.SetSkin();	
				this.parent.Mask3MC.visible = false;
				this.Close();
				return;
			}
			
			if(this.obj.priceGolden > main.goldenSushi)
			{
				return;
			}
			else
			{
				this.parent.Mask3MC.visible = true;
				try {
					console.log("API.Skinを購入");
					await API_Request({
						url: '/skin/' + this.obj.id + '/purchase',
						method: 'POST',
						maxAttempts: 3,
					});
				} catch (error) {
					this.parent.MessageMC.Open("skinの購入に失敗しました");
					this.parent.Mask3MC.visible = false;
					this.Close();
					return;
				}
			
				console.log("API.自身のユーザー情報を得る");
				API_userData = await API_Request({
					url: '/user/me',
					maxAttempts: 3
				});
				
				main.sushi = Number(API_userData["user"].currentSushiCount);
				main.goldenSushi = Number(API_userData["user"].currentGoldSushiCount);
				this.parent.ShopPanelMC.ContentMC.goldenSushi.text = main.goldenSushi;
				this.obj.posession = true;
				this.obj.clip.gotoAndStop("Purchased");
				this.parent.MessageMC.Open(this.obj.name + "を入手しました");
				this.parent.Mask3MC.visible = false;
				this.Close();
			}
		
		} 
		this.ShopType4ButtonMC.addEventListener("click", this.SubmitType4.bind(this));
	}

	// actions tween:
	this.timeline.addTween(cjs.Tween.get(this).call(this.frame_0).wait(51));

	// Button
	this.CloseButtonMC = new lib.CloseButtonMC();
	this.CloseButtonMC.name = "CloseButtonMC";
	this.CloseButtonMC.setTransform(1028,16,1,1,0,0,0,61,61);

	this.timeline.addTween(cjs.Tween.get(this.CloseButtonMC).wait(51));

	// レイヤー_2
	this.ShopConfilmCell1MC = new lib.ShopConfilmCell1MC();
	this.ShopConfilmCell1MC.name = "ShopConfilmCell1MC";
	this.ShopConfilmCell1MC.setTransform(360.1,228.1,1,1,0,0,0,0.1,0.1);

	this.ShopConfilmCell2MC = new lib.ShopConfilmCell2MC();
	this.ShopConfilmCell2MC.name = "ShopConfilmCell2MC";
	this.ShopConfilmCell2MC.setTransform(360.1,228.1,1,1,0,0,0,0.1,0.1);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[]}).to({state:[{t:this.ShopConfilmCell1MC}]},9).to({state:[{t:this.ShopConfilmCell2MC}]},10).to({state:[]},11).wait(21));

	// SubmitButton
	this.ShopType1ButtonMC = new lib.ShopType1ButtonMC();
	this.ShopType1ButtonMC.name = "ShopType1ButtonMC";
	this.ShopType1ButtonMC.setTransform(517,820,1,1,0,0,0,258,87);

	this.ShopType2ButtonMC = new lib.ShopType2ButtonMC();
	this.ShopType2ButtonMC.name = "ShopType2ButtonMC";
	this.ShopType2ButtonMC.setTransform(517,821,1,1,0,0,0,258,88);

	this.ShopType3ButtonMC = new lib.ShopType3ButtonMC();
	this.ShopType3ButtonMC.name = "ShopType3ButtonMC";
	this.ShopType3ButtonMC.setTransform(517,1392,1,1,0,0,0,258,88);

	this.ShopType4ButtonMC = new lib.ShopType4ButtonMC();
	this.ShopType4ButtonMC.name = "ShopType4ButtonMC";
	this.ShopType4ButtonMC.setTransform(517,1041,1,1,0,0,0,258,88);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[]}).to({state:[{t:this.ShopType1ButtonMC}]},9).to({state:[{t:this.ShopType2ButtonMC}]},10).to({state:[{t:this.ShopType3ButtonMC}]},11).to({state:[{t:this.ShopType4ButtonMC}]},11).wait(10));

	// Text_desciption
	this.description = new cjs.Text("1時間あたりのSpS（Sushi per Second）の5%\n1時間経過後、提供力が10分の1まで減少", "40px 'Potta One'", "#723826");
	this.description.name = "description";
	this.description.lineHeight = 60;
	this.description.lineWidth = 910;
	this.description.parent = this;
	this.description.setTransform(68.05,568.7);

	this.text = new cjs.Text("performance", "40px 'Potta One'", "#FFFFFF");
	this.text.lineHeight = 58;
	this.text.lineWidth = 273;
	this.text.parent = this;
	this.text.setTransform(90.15,738.7);

	this.detail = new cjs.Text("1時間あたりのSpS（Sushi per Second）の5%\n1時間経過後、提供力が10分の1まで減少\n最大24時間稼働します", "40px 'Potta One'", "#723826");
	this.detail.name = "detail";
	this.detail.lineHeight = 60;
	this.detail.lineWidth = 910;
	this.detail.parent = this;
	this.detail.setTransform(68.05,834.2);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[]}).to({state:[{t:this.detail},{t:this.text},{t:this.description,p:{y:568.7}}]},30).to({state:[{t:this.description,p:{y:634.7}}]},11).wait(10));

	// Text_title
	this.title = new cjs.Text("Sushi Syokunin", "60px 'Potta One'");
	this.title.name = "title";
	this.title.lineHeight = 87;
	this.title.lineWidth = 716;
	this.title.parent = this;
	this.title.setTransform(201.05,918.2);

	this.timeline.addTween(cjs.Tween.get(this.title).to({_off:true},9).wait(42));

	// Text
	this.description_1 = new cjs.Text("Would you line to buy Golden Sushi?", "50px 'Potta One'");
	this.description_1.name = "description_1";
	this.description_1.textAlign = "center";
	this.description_1.lineHeight = 72;
	this.description_1.lineWidth = 1038;
	this.description_1.parent = this;
	this.description_1.setTransform(521,584.4);

	this.desciption = new cjs.Text("Confilm", "55px 'Potta One'", "#FFFFFF");
	this.desciption.name = "desciption";
	this.desciption.textAlign = "center";
	this.desciption.lineHeight = 80;
	this.desciption.lineWidth = 1038;
	this.desciption.parent = this;
	this.desciption.setTransform(521,77);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[]}).to({state:[{t:this.desciption,p:{y:77,text:"Confilm",font:"55px 'Potta One'",lineHeight:79.65,color:"#FFFFFF"}},{t:this.description_1,p:{text:"Would you line to buy Golden Sushi?",y:584.4,font:"50px 'Potta One'",color:"#000000",lineHeight:72.4}}]},9).to({state:[{t:this.desciption,p:{y:77,text:"Confilm",font:"55px 'Potta One'",lineHeight:79.65,color:"#FFFFFF"}},{t:this.description_1,p:{text:"Would you line to buy Sushi?",y:584.4,font:"50px 'Potta One'",color:"#000000",lineHeight:72.4}}]},10).to({state:[{t:this.desciption,p:{y:81,text:"offline production upgrade",font:"50px 'Potta One'",lineHeight:72.4,color:"#FFFFFF"}},{t:this.description_1,p:{text:"Would you line to purchase this Item?",y:1182.4,font:"50px 'Potta One'",color:"#000000",lineHeight:72.4}}]},11).to({state:[{t:this.desciption,p:{y:814.4,text:"Would you line to purchase this Skin?",font:"50px 'Potta One'",lineHeight:72.4,color:"#000000"}},{t:this.description_1,p:{text:"Skin",y:71,font:"55px 'Potta One'",color:"#FFFFFF",lineHeight:79.65}}]},11).wait(10));

	// BG
	this.instance = new lib.shop_sushi_bg();

	this.instance_1 = new lib.shop_roboto_bg();

	this.instance_2 = new lib.shop_skin_bg();

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.instance}]}).to({state:[{t:this.instance_1}]},30).to({state:[{t:this.instance_2}]},11).wait(10));

	this._renderFirstFrame();

}).prototype = p = new cjs.MovieClip();
p.nominalBounds = new cjs.Rectangle(0,-45,1089,1582);


(lib.ShopContentMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Text
	this.SkinTitleMC = new lib.ShopSubTitleMC();
	this.SkinTitleMC.name = "SkinTitleMC";
	this.SkinTitleMC.setTransform(32,2206.55);

	this.RoboTitleMC = new lib.ShopSubTitleMC();
	this.RoboTitleMC.name = "RoboTitleMC";
	this.RoboTitleMC.setTransform(32,1498.3);

	this.GoldenSushiTitleMC = new lib.ShopSubTitleMC();
	this.GoldenSushiTitleMC.name = "GoldenSushiTitleMC";
	this.GoldenSushiTitleMC.setTransform(31,109);

	this.SushiTitleMC = new lib.ShopSubTitleMC();
	this.SushiTitleMC.name = "SushiTitleMC";
	this.SushiTitleMC.setTransform(32,715.95);

	this.goldenSushi = new cjs.Text("10", "60px 'Potta One'", "#FFFFFF");
	this.goldenSushi.name = "goldenSushi";
	this.goldenSushi.textAlign = "right";
	this.goldenSushi.lineHeight = 89;
	this.goldenSushi.lineWidth = 194;
	this.goldenSushi.parent = this;
	this.goldenSushi.setTransform(1068.6,22.6);

	this.ShopCell2MC = new lib.ShopCell2MC();
	this.ShopCell2MC.name = "ShopCell2MC";
	this.ShopCell2MC.setTransform(60,849.7);

	this.ShopCell3MC = new lib.ShopCell3MC();
	this.ShopCell3MC.name = "ShopCell3MC";
	this.ShopCell3MC.setTransform(0,1667.6);

	this.ShopCell1MC = new lib.ShopCell1MC();
	this.ShopCell1MC.name = "ShopCell1MC";
	this.ShopCell1MC.setTransform(60,243.85);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.ShopCell1MC},{t:this.ShopCell3MC},{t:this.ShopCell2MC},{t:this.goldenSushi},{t:this.SushiTitleMC},{t:this.GoldenSushiTitleMC},{t:this.RoboTitleMC},{t:this.SkinTitleMC}]}).wait(1));

	// Image
	this.instance = new lib.mini_golden();
	this.instance.setTransform(739,40);

	this.instance_1 = new lib.bg2();
	this.instance_1.setTransform(726,24);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.instance_1},{t:this.instance}]}).wait(1));

	// BG
	this.ContentBGMC = new lib.ButtonMC();
	this.ContentBGMC.name = "ContentBGMC";
	this.ContentBGMC.setTransform(0,0,11.25,0.9999);

	this.timeline.addTween(cjs.Tween.get(this.ContentBGMC).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.ShopContentMC, new cjs.Rectangle(0,0,1125,2310.6), null);


(lib.GeneratorContentMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Cell
	this.GeneratorCellMC = new lib.GeneratorCellMC();
	this.GeneratorCellMC.name = "GeneratorCellMC";

	this.timeline.addTween(cjs.Tween.get(this.GeneratorCellMC).wait(1));

	// ScrollButton
	this.ContentBGMC = new lib.ButtonMC();
	this.ContentBGMC.name = "ContentBGMC";
	this.ContentBGMC.setTransform(0,0,11.25,0.9999);

	this.timeline.addTween(cjs.Tween.get(this.ContentBGMC).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.GeneratorContentMC, new cjs.Rectangle(0,0,1125,255), null);


(lib.DebugPanelMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	this.isSingleFrame = false;
	// timeline functions:
	this.frame_0 = function() {
		if(this.isSingleFrame) {
			return;
		}
		if(this.totalFrames == 1) {
			this.isSingleFrame = true;
		}
		this.ScrollMC.content = this.ContentMC;
		
		this.Create = function() 
		{
			//////////////////////////////////////
			//
			var posY = 100;
		
		
			posY += 50;
			this.ScrollMC.SetFullSize(posY);
		}
		
		this.Reset = function() 
		{
		
			this.Create();
		}
		
		this.Open =  function() 
		{
			main.PlaySE("open");
			this.Reset();
			this.ScrollMC.Open();
		}
		
		this.Close =  function() 
		{
			this.ScrollMC.Close();
		}
	}

	// actions tween:
	this.timeline.addTween(cjs.Tween.get(this).call(this.frame_0).wait(1));

	// AS
	this.ScrollMC = new lib.ScrollMC();
	this.ScrollMC.name = "ScrollMC";
	this.ScrollMC.setTransform(-75,3289.85,1,1,0,0,0,25,25);

	this.timeline.addTween(cjs.Tween.get(this.ScrollMC).wait(1));

	// Mask (mask)
	var mask = new cjs.Shape();
	mask._off = true;
	mask.graphics.p("EhX4HUwMAAAupfMCvxAAAMAAAOpfg");
	mask.setTransform(562.5,3040.7);

	// Cell
	this.ContentMC = new lib.DebugContentMC();
	this.ContentMC.name = "ContentMC";

	var maskedShapeInstanceList = [this.ContentMC];

	for(var shapedInstanceItr = 0; shapedInstanceItr < maskedShapeInstanceList.length; shapedInstanceItr++) {
		maskedShapeInstanceList[shapedInstanceItr].mask = mask;
	}

	this.timeline.addTween(cjs.Tween.get(this.ContentMC).wait(1));

	// BG
	this.shape = new cjs.Shape();
	this.shape.graphics.f().s("#00CC33").ss(5,1,1).p("EhX4jqXMCvxAAAMAAAHUvMivxAAAg");
	this.shape.setTransform(562.5,1500);

	this.shape_1 = new cjs.Shape();
	this.shape_1.graphics.f("#3399FF").s().p("EhX4DqYMAAAnUvMCvxAAAMAAAHUvg");
	this.shape_1.setTransform(562.5,1500);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.shape_1},{t:this.shape}]}).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.DebugPanelMC, new cjs.Rectangle(-100.5,-2.5,1228,3317.9), null);


(lib.FooterMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Badge
	this.UpgradeBadgeMC = new lib.BadgeMC();
	this.UpgradeBadgeMC.name = "UpgradeBadgeMC";
	this.UpgradeBadgeMC.setTransform(457,56,1,1,0,0,0,45,45);

	this.GeneratorDoddMC = new lib.DoddMC();
	this.GeneratorDoddMC.name = "GeneratorDoddMC";
	this.GeneratorDoddMC.setTransform(220,56,1,1,0,0,0,45,45);

	this.AchievementBadgeMC = new lib.BadgeMC();
	this.AchievementBadgeMC.name = "AchievementBadgeMC";
	this.AchievementBadgeMC.setTransform(926.55,56,1,1,0,0,0,45,45);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.AchievementBadgeMC},{t:this.GeneratorDoddMC},{t:this.UpgradeBadgeMC}]}).wait(1));

	// Button
	this.InviteButtonMC = new lib.InviteButtonMC();
	this.InviteButtonMC.name = "InviteButtonMC";
	this.InviteButtonMC.setTransform(955,0);

	this.AchievementButtonMC = new lib.AchievementButtonMC();
	this.AchievementButtonMC.name = "AchievementButtonMC";
	this.AchievementButtonMC.setTransform(720,0);

	this.ShopButtonMC = new lib.ShopButtonMC();
	this.ShopButtonMC.name = "ShopButtonMC";
	this.ShopButtonMC.setTransform(485,0);

	this.UpgradeButtonMC = new lib.UpgradeButtonMC();
	this.UpgradeButtonMC.name = "UpgradeButtonMC";
	this.UpgradeButtonMC.setTransform(250,0);

	this.GeneratorButtonMC = new lib.GeneratorButtonMC();
	this.GeneratorButtonMC.name = "GeneratorButtonMC";

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.GeneratorButtonMC},{t:this.UpgradeButtonMC},{t:this.ShopButtonMC},{t:this.AchievementButtonMC},{t:this.InviteButtonMC}]}).wait(1));

	// BG
	this.instance = new lib.footerBG2();
	this.instance.setTransform(-549,-1);

	this.instance_1 = new lib.footerBG2();
	this.instance_1.setTransform(1098,0);

	this.instance_2 = new lib.footerBG2();
	this.instance_2.setTransform(549,0);

	this.instance_3 = new lib.footerBG2();
	this.instance_3.setTransform(0,-1);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.instance_3},{t:this.instance_2},{t:this.instance_1},{t:this.instance}]}).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.FooterMC, new cjs.Rectangle(-549,-1507,2197,1758), null);


(lib.AchievementContentMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Text
	this.detail_totalClick = new cjs.Text("234,432回", "50px 'Potta One'");
	this.detail_totalClick.name = "detail_totalClick";
	this.detail_totalClick.textAlign = "right";
	this.detail_totalClick.lineHeight = 74;
	this.detail_totalClick.lineWidth = 496;
	this.detail_totalClick.parent = this;
	this.detail_totalClick.setTransform(998,704.35);

	this.detail_touchSps = new cjs.Text("125", "50px 'Potta One'");
	this.detail_touchSps.name = "detail_touchSps";
	this.detail_touchSps.textAlign = "right";
	this.detail_touchSps.lineHeight = 74;
	this.detail_touchSps.lineWidth = 496;
	this.detail_touchSps.parent = this;
	this.detail_touchSps.setTransform(998,614.5);

	this.detail_gameStart = new cjs.Text("7日, 1時間前", "50px 'Potta One'");
	this.detail_gameStart.name = "detail_gameStart";
	this.detail_gameStart.textAlign = "right";
	this.detail_gameStart.lineHeight = 74;
	this.detail_gameStart.lineWidth = 496;
	this.detail_gameStart.parent = this;
	this.detail_gameStart.setTransform(998,523.95);

	this.detail_generatorNum = new cjs.Text("23", "50px 'Potta One'");
	this.detail_generatorNum.name = "detail_generatorNum";
	this.detail_generatorNum.textAlign = "right";
	this.detail_generatorNum.lineHeight = 74;
	this.detail_generatorNum.lineWidth = 496;
	this.detail_generatorNum.parent = this;
	this.detail_generatorNum.setTransform(998,432.65);

	this.detail_totalSushi = new cjs.Text("5.999 billion", "50px 'Potta One'");
	this.detail_totalSushi.name = "detail_totalSushi";
	this.detail_totalSushi.textAlign = "right";
	this.detail_totalSushi.lineHeight = 74;
	this.detail_totalSushi.lineWidth = 496;
	this.detail_totalSushi.parent = this;
	this.detail_totalSushi.setTransform(998,341.95);

	this.detail_sushi = new cjs.Text("5.999 billion", "50px 'Potta One'");
	this.detail_sushi.name = "detail_sushi";
	this.detail_sushi.textAlign = "right";
	this.detail_sushi.lineHeight = 74;
	this.detail_sushi.lineWidth = 496;
	this.detail_sushi.parent = this;
	this.detail_sushi.setTransform(998,250.7);

	this.text = new cjs.Text("タップ", "50px 'Potta One'");
	this.text.lineHeight = 74;
	this.text.parent = this;
	this.text.setTransform(182,704.35);

	this.text_1 = new cjs.Text("1タップあたりの寿司提供数", "50px 'Potta One'");
	this.text_1.lineHeight = 74;
	this.text_1.parent = this;
	this.text_1.setTransform(182,614.5);

	this.text_2 = new cjs.Text("ゲーム開始", "50px 'Potta One'");
	this.text_2.lineHeight = 74;
	this.text_2.parent = this;
	this.text_2.setTransform(182,523.95);

	this.text_3 = new cjs.Text("施設数", "50px 'Potta One'");
	this.text_3.lineHeight = 74;
	this.text_3.parent = this;
	this.text_3.setTransform(182,432.65);

	this.text_4 = new cjs.Text("寿司生産数", "50px 'Potta One'");
	this.text_4.lineHeight = 74;
	this.text_4.parent = this;
	this.text_4.setTransform(182,341.95);

	this.text_5 = new cjs.Text("提供中の寿司", "50px 'Potta One'");
	this.text_5.lineHeight = 74;
	this.text_5.parent = this;
	this.text_5.setTransform(182,250.7);

	this.detail = new cjs.Text("Achievement", "70px 'Potta One'", "#FFFFFF");
	this.detail.name = "detail";
	this.detail.textAlign = "center";
	this.detail.lineHeight = 103;
	this.detail.lineWidth = 1121;
	this.detail.parent = this;
	this.detail.setTransform(562.5,56);

	this.AchievementCellMC = new lib.AchievementCellMC();
	this.AchievementCellMC.name = "AchievementCellMC";
	this.AchievementCellMC.setTransform(82.2,1282.65);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.AchievementCellMC},{t:this.detail},{t:this.text_5},{t:this.text_4},{t:this.text_3},{t:this.text_2},{t:this.text_1},{t:this.text},{t:this.detail_sushi},{t:this.detail_totalSushi},{t:this.detail_generatorNum},{t:this.detail_gameStart},{t:this.detail_touchSps},{t:this.detail_totalClick}]}).wait(1));

	// Image
	this.instance = new lib.title();
	this.instance.setTransform(0,48);

	this.AchievementTitleMC = new lib.AchievementSubTitleMC();
	this.AchievementTitleMC.name = "AchievementTitleMC";
	this.AchievementTitleMC.setTransform(0,1100.05);

	this.UpgradeTitleMC = new lib.AchievementSubTitleMC();
	this.UpgradeTitleMC.name = "UpgradeTitleMC";
	this.UpgradeTitleMC.setTransform(0,954.55);

	this.instance_1 = new lib.achievementDetailBG();
	this.instance_1.setTransform(56,198);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.instance_1},{t:this.UpgradeTitleMC},{t:this.AchievementTitleMC},{t:this.instance}]}).wait(1));

	// BG
	this.ContentBGMC = new lib.ButtonMC();
	this.ContentBGMC.name = "ContentBGMC";
	this.ContentBGMC.setTransform(0,0,11.25,0.9999);

	this.timeline.addTween(cjs.Tween.get(this.ContentBGMC).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.AchievementContentMC, new cjs.Rectangle(0,0,1125,10000), null);


(lib.UpgradePanelMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	this.isSingleFrame = false;
	// timeline functions:
	this.frame_0 = function() {
		if(this.isSingleFrame) {
			return;
		}
		if(this.totalFrames == 1) {
			this.isSingleFrame = true;
		}
		this.ContentMC.UpgradeCellMC.visible = false;
		this.ScrollMC.content = this.ContentMC;
		this._Tick;
		
		this.OpenDesciption = function (upgrade)
		{
			if (this.ScrollMC.isScrolled())
			return;
		
			this.parent.UpgradeDesciptionMC.Open(upgrade);
			this.CheckNotification(upgrade);
		}
		
		this.AddUpgrade = function (upgrade)
		{
			if (this.ScrollMC.isScrolled())
				return;
			
			main.BuyUpgrade(upgrade);
			this.CheckNotification(upgrade);
		}
		
		this.CheckNotification = function (upgrade)
		{
			let num = 0;
			if(upgrade.doddState == 2)
			{
				if(upgrade.clip !== null)
					upgrade.clip.DoddMC.visible = false;
				upgrade.doddState = 3;
				main.SetUpgradeNotification();
				
				exportRoot.FooterMC.UpgradeBadgeMC.visible = false;
				for (let i = 0; i < main.upgradeStore.length; i++)
				{
					if(main.upgradeStore[i].doddState == 2)
					{
						exportRoot.FooterMC.UpgradeBadgeMC.visible = true;
						num++;
					}
				}
				exportRoot.FooterMC.UpgradeBadgeMC.notification.text = num;	
			}
		}
		
		this.Create = function() 
		{
			exportRoot.FooterMC.UpgradeBadgeMC.visible = false;
			
			for (let i = 0; i < main.upgradeStore.length; i++)
			{
				let upgrade = main.upgradeStore[i];
				
				let clip = new lib.UpgradeCellMC();
				this.ContentMC.addChild(clip);
				//clip.gotoAndStop("On");
				clip.title.text = upgrade.name;
				//clip.title_O = new Outline(lib, clip.title, 5, "#000000", "#FFFFFF");
				clip.cost.text = FormatNumber(upgrade.price, 1, 0);
				//clip.cost_O = new Outline(lib, clip.cost, 5, "#C5253A", "#FFFFFF");				
				clip.description.text = upgrade.description;
				
				clip.x = 0;
				clip.y = 0 + 240 * i;
				upgrade.clip = clip;
				
				clip.IconButtonMC.addEventListener("click", function() {
					this.OpenDesciption.call(this, upgrade);
				}.bind(this));	
				clip.ButtonMC.addEventListener("click", function() {
					this.AddUpgrade.call(this, upgrade);
				}.bind(this));	
		
				//アイコン生成
				//let bitmap = new createjs.Bitmap("images/upgrade/upgrade_" + upgrade.id.toString().padStart(2, '0') + ".webp");	
				let bitmap = new createjs.Bitmap("images/upgrade/upgrade_" + upgrade.image + ".webp");	
				clip.IconMC.addChild(bitmap);
				bitmap.x = 0;
				bitmap.y = 0;
				bitmap.scaleX = 170 / 300;
				bitmap.scaleY = 170 / 300;
				bitmap.mouseEnabled = false;
			
				upgrade.clip.DoddMC.visible = upgrade.doddState == 2 ? true : false;
			
				if(upgrade.doddState == 2)
					exportRoot.FooterMC.UpgradeBadgeMC.visible = true;
			}
		}
		
		this.Reset = function() 
		{
			for (let i = 0; i < main.upgrades.length; i++)
			{
				main.upgrades[i].clip = null;
			}
			this.ContentMC.removeAllChildren();
			this.Create();
		}
		
		this.Open =  function() 
		{
			main.PlaySE("open");
			this.Reset();
			this.ScrollMC.Open();
			this._Tick = createjs.Ticker.addEventListener("tick", this.Tick.bind(this));
		}
		
		this.Close =  function() 
		{
			this.ScrollMC.Close();
			createjs.Ticker.removeEventListener("tick", this._Tick);
		}
		
		this.Tick = function(event)
		{
			for (let i = 0; i < main.upgradeStore.length; i++)
			{
				let upgrade = main.upgradeStore[i];
				
				if(main.sushi >= upgrade.price)
				{
					upgrade.clip.gotoAndStop("Active");
					upgrade.clip.cost.color ="#0D9000";
				}
				else
				{
					upgrade.clip.gotoAndStop("Lock");
					upgrade.clip.cost.color ="#C5253A";
				}
			}
			this.ScrollMC.count = main.upgradeStore.length;
			this.ScrollMC.Reload();
		}
	}

	// actions tween:
	this.timeline.addTween(cjs.Tween.get(this).call(this.frame_0).wait(1));

	// AS
	this.ScrollMC = new lib.ScrollMC();
	this.ScrollMC.name = "ScrollMC";
	this.ScrollMC.setTransform(-75,1232.05,1,1,0,0,0,25,25);

	this.timeline.addTween(cjs.Tween.get(this.ScrollMC).wait(1));

	// Mask (mask)
	var mask = new cjs.Shape();
	mask._off = true;
	mask.graphics.p("EhX4BE6MAAAiJzMCvxAAAMAAACJzg");
	mask.setTransform(562.5,471);

	// Cell
	this.ContentMC = new lib.UpgradeContentMC();
	this.ContentMC.name = "ContentMC";

	var maskedShapeInstanceList = [this.ContentMC];

	for(var shapedInstanceItr = 0; shapedInstanceItr < maskedShapeInstanceList.length; shapedInstanceItr++) {
		maskedShapeInstanceList[shapedInstanceItr].mask = mask;
	}

	this.timeline.addTween(cjs.Tween.get(this.ContentMC).wait(1));

	// BG
	this.instance = new lib.panel();

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.UpgradePanelMC, new cjs.Rectangle(-100.5,-665,1225.5,1922.6), null);


(lib.ShopPanelMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	this.isSingleFrame = false;
	// timeline functions:
	this.frame_0 = function() {
		if(this.isSingleFrame) {
			return;
		}
		if(this.totalFrames == 1) {
			this.isSingleFrame = true;
		}
		this.ContentMC.ShopCell1MC.visible = false;
		this.ContentMC.ShopCell2MC.visible = false;
		this.ContentMC.ShopCell3MC.visible = false;
		this.ScrollMC.content = this.ContentMC;
		
		this.OpenDesciption = function (data)
		{
		    if (!this.ScrollMC.isScrolled()) {
		        this.parent.ShopDesciptionMC.Open(data);
		    }
		}
		
		this.Create = function() 
		{
			//////////////////////////////////////
			//GoldenSushi
			let posY = 100;
			this.ContentMC.GoldenSushiTitleMC.y = posY;
			this.ContentMC.GoldenSushiTitleMC.title.text = "Golden Sushi";
			this.ContentMC.goldenSushi.text = main.goldenSushi;
			posY += 130;
			
			let goldenSushiCount = 0; 
			for (let i = 0; i < main.goldenSushiShops.length; i++)
			{
				let goldenSushiShop = main.goldenSushiShops[i];
				
				let clip = new lib.ShopCell1MC();
				this.ContentMC.addChild(clip);
				goldenSushiShop.clip = clip;
				clip.x = 50 + 355 * (goldenSushiCount % 3);
				clip.y = posY + 450 * Math.floor(goldenSushiCount / 3);
				
				clip.IconButtonMC.addEventListener("click", function() {
					this.OpenDesciption.call(this, goldenSushiShop);
				}.bind(this));
			
				clip.price.text = goldenSushiShop.price.toLocaleString();
				clip.amount.text = "×" + goldenSushiShop.amount.toLocaleString();		
				clip.amount_O = new Outline(lib, clip.amount, 5, "#000000", "#FFFFFF");
			
				clip.gotoAndStop("Active");
				goldenSushiCount++;
			}
		
			posY += 450 * Math.ceil(goldenSushiCount / 3);
		
			//////////////////////////////////////
			//Sushi
			posY += 30;
			this.ContentMC.SushiTitleMC.y = posY;
			this.ContentMC.SushiTitleMC.title.text = "Sushi";
			posY += 130;
			
			let sushiCount = 0; 
			for (let i = 0; i < main.sushiShops.length; i++)
			{
				let sushiShop = main.sushiShops[i];
				
				let clip = new lib.ShopCell2MC();
				this.ContentMC.addChild(clip);
				sushiShop.clip = clip;
				clip.x = 50 + 355 * (sushiCount % 3);
				clip.y = posY + 420 * Math.floor(sushiCount / 3);
				
				clip.IconButtonMC.addEventListener("click", function() {
					this.OpenDesciption.call(this, sushiShop);
				}.bind(this));
				
				clip.price.text = sushiShop.price.toLocaleString();
				clip.amount.text = "×" + sushiShop.amount.toLocaleString();
				clip.amount_O = new Outline(lib, clip.amount, 5, "#000000", "#FFFFFF");	
				
				clip.gotoAndStop("Active");
				sushiCount++;
			}
		
			posY += 420 * Math.ceil(sushiCount / 3);
		
			//////////////////////////////////////
			//Robot
			posY += 30;
			this.ContentMC.RoboTitleMC.y = posY;
			this.ContentMC.RoboTitleMC.title.text = "Item";
			posY += 130;
		
			let roboCount = 0; 
			for (let i = 0; i < main.robotShops.length; i++)
			{
				let shop = main.robotShops[i];
				
				let clip = new lib.ShopCell3MC();
				this.ContentMC.addChild(clip);
				clip.ShopActiveMC.visible = shop.posession;
			
				clip.title.text = shop.name;
				clip.price.text = shop.priceGolden.toLocaleString();
				clip.description.text = shop.description;
				
				SetWrapText(clip.description);
				shop.clip = clip;
				clip.x = 0;
				clip.y = posY + 380 * roboCount;
				
				clip.ButtonMC.addEventListener("click", function() {
					this.OpenDesciption.call(this, shop);
				}.bind(this));
				
				//アイコン生成
				let bitmap = new createjs.Bitmap("images/shop/robo" + shop.id + ".webp");
				clip.IconMC.addChild(bitmap);
				bitmap.x = 0;
				bitmap.y = 0;
				bitmap.scaleX = 160 / 300;
				bitmap.scaleY = 160 / 300;
				bitmap.mouseEnabled = false;		
				if(shop.posession)
					clip.gotoAndStop("Used");
				else
					clip.gotoAndStop("Active");
				
				roboCount++;
			}
		
			posY += 380 * roboCount;
		
			//////////////////////////////////////
			//Skin
			posY += 20;
			this.ContentMC.SkinTitleMC.y = posY;
			this.ContentMC.SkinTitleMC.title.text = "Skin";
			posY += 130;
			
			let skinCount = 0; 
			for (let i = 0; i < main.skinShops.length; i++)
			{
				let skinShop = main.skinShops[i];
				
				let clip = new lib.ShopCell3MC();
				this.ContentMC.addChild(clip);
				//clip.title_O = new Outline(lib, clip.title, 5, "#000000", "#FFFFFF");		
				clip.title.text = skinShop.name;
				//clip.price_O = new Outline(lib, clip.price, 5, "#C5253A", "#FFFFFF");	
				clip.price.text = skinShop.priceGolden.toLocaleString();
				clip.description.text = skinShop.description;
				SetWrapText(clip.description);
				clip.ShopActiveMC.visible = (skinShop.id == main.skinId) ? true: false;
				skinShop.clip = clip;
				clip.x = 0;
				clip.y = posY + 380 * skinCount;
				
				clip.ButtonMC.addEventListener("click", function() {
					this.OpenDesciption.call(this, skinShop);
				}.bind(this));
				
				//アイコン生成
				let bitmap = new createjs.Bitmap("images/shop/shopitem_" + skinShop.id.toString().padStart(2, '0') + ".webp");
				clip.IconMC.addChild(bitmap);
				bitmap.x = 0;
				bitmap.y = 0;
				bitmap.scaleX = 160 / 300;
				bitmap.scaleY = 160 / 300;
				bitmap.mouseEnabled = false;		
				
				if(skinShop.posession)
					clip.gotoAndStop("Purchased");
				else
					clip.gotoAndStop("Active");
				
				skinCount++;
			}
		
			posY += 380 * skinCount;
		
			//////////////////////////////////////
		
			posY += 50;
			this.ScrollMC.SetFullSize(posY);
		}
		
		this.Reset = function() 
		{
			for (let i = 0; i < main.goldenSushiShops.length; i++)
			{
				this.ContentMC.removeChild(main.goldenSushiShops[i].clip);
				main.goldenSushiShops[i].clip = null;
			}
			
			for (let i = 0; i < main.sushiShops.length; i++)
			{
				this.ContentMC.removeChild(main.sushiShops[i].clip);
				main.sushiShops[i].clip = null;
			}
		
			for (let i = 0; i < main.skinShops.length; i++)
			{
				this.ContentMC.removeChild(main.skinShops[i].clip);
				main.skinShops[i].clip = null;
			}
		
			for (let i = 0; i < main.robotShops.length; i++)
			{
				this.ContentMC.removeChild(main.robotShops[i].clip);
				main.robotShops[i].clip = null;
			}
		
			this.Create();
		}
		
		this.Open =  function() 
		{
			main.PlaySE("open");
			this.Reset();
			this.ScrollMC.Open();
		}
		
		this.Close =  function() 
		{
			this.ScrollMC.Close();
		}
	}

	// actions tween:
	this.timeline.addTween(cjs.Tween.get(this).call(this.frame_0).wait(1));

	// AS
	this.ScrollMC = new lib.ScrollMC();
	this.ScrollMC.name = "ScrollMC";
	this.ScrollMC.setTransform(-75,2709.65,1,1,0,0,0,25,25);

	this.timeline.addTween(cjs.Tween.get(this.ScrollMC).wait(1));

	// Mask (mask)
	var mask = new cjs.Shape();
	mask._off = true;
	mask.graphics.p("EhX4HXGMAAAupfMCvxAAAMAAAOpfg");
	mask.setTransform(562.5,3015);

	// Cell
	this.ContentMC = new lib.ShopContentMC();
	this.ContentMC.name = "ContentMC";

	var maskedShapeInstanceList = [this.ContentMC];

	for(var shapedInstanceItr = 0; shapedInstanceItr < maskedShapeInstanceList.length; shapedInstanceItr++) {
		maskedShapeInstanceList[shapedInstanceItr].mask = mask;
	}

	this.timeline.addTween(cjs.Tween.get(this.ContentMC).wait(1));

	// BG
	this.instance = new lib.bg();

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.ShopPanelMC, new cjs.Rectangle(-100.5,-197,1225.5,2932.2), null);


(lib.GeneratorPanelMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	this.isSingleFrame = false;
	// timeline functions:
	this.frame_0 = function() {
		if(this.isSingleFrame) {
			return;
		}
		if(this.totalFrames == 1) {
			this.isSingleFrame = true;
		}
		this.ContentMC.GeneratorCellMC.visible = false;
		this.ScrollMC.content = this.ContentMC;
		this._Tick;
		
		this.OpenDesciption = function (generator)
		{
			if (this.ScrollMC.isScrolled())
				return;
			
			this.parent.GeneratorDesciptionMC.Open(generator);
			this.CheckNotification(generator);
		}
		
		this.AddGenerator = function (generator)
		{
			if (this.ScrollMC.isScrolled())
				return;
			
			main.BuyGenerator(generator);
			this.CheckNotification(generator);
		}
		
		this.CheckNotification = function (generator)
		{
			if(generator.doddState == 2)
			{
				generator.clip.DoddMC.visible = false;
				generator.doddState = 3;
				main.SetGeneratorNotification();
				
				exportRoot.FooterMC.GeneratorDoddMC.visible = false;
				for (let i = 0; i < main.generators.length; i++)
				{
					if(main.generators[i].doddState == 2)
					{
						exportRoot.FooterMC.GeneratorDoddMC.visible = true;
						break;
					}
				}
			}
		}
		
		this.Create = function() 
		{
			exportRoot.FooterMC.GeneratorDoddMC.visible = false;
			let dispCount = 0;	
			let lastLocked = 0;
			
			for (let i = 0; i < main.generators.length; i++)
			{
				let generator = main.generators[i];
				
				let clip = new lib.GeneratorCellMC ();
				this.ContentMC.addChild(clip);
				//clip.title_O = new Outline(lib, clip.title, 5, "#000000", "#FFFFFF");
				clip.title.text = generator.name;
				//clip.titleHatena_O = new Outline(lib, clip.titleHatena, 5, "#000000", "#FFFFFF");
				clip.cost.text = FormatNumber(generator.storedCost, 1, 0);
				//clip.cost_O = new Outline(lib, clip.cost, 5, "#C5253A", "#FFFFFF");
				clip.cost.text = FormatNumber(generator.storedCost, 1, 0);
				clip.posession.text = generator.posession;
				clip.x = 0;
				clip.y = 0 + 240 * i;
				generator.clip = clip;
			
				clip.IconButtonMC.addEventListener("click", function() {
					this.OpenDesciption.call(this, generator);
				}.bind(this));	
				clip.ButtonMC.addEventListener("click", function() {
					this.AddGenerator.call(this, generator);
				}.bind(this));	
		
				//アイコン生成
				let bitmap = new createjs.Bitmap("images/generator/gen_" + generator.id.toString().padStart(2, '0') + ".webp");
				clip.IconMC.addChild(bitmap);
				bitmap.x = 0;
				bitmap.y = 0;
				bitmap.scaleX = 170 / 300;
				bitmap.scaleY = 170 / 300;
				bitmap.mouseEnabled = false;
			
				generator.clip.DoddMC.visible = generator.doddState == 2 ? true : false;
			
				if (generator.posession > 0)
				{
					lastLocked = 0;
				}
				else if((main.sushi >= generator.availableSushiCount || generator.available ) && lastLocked == 0)
				{
					if(generator.doddState == 2)
						exportRoot.FooterMC.GeneratorDoddMC.visible = true;	
					lastLocked++;
				}
			}
		}
		
		this.Open = function() 
		{
			main.PlaySE("open");
			this.ScrollMC.Open();
			this._Tick = createjs.Ticker.addEventListener("tick", this.Tick.bind(this));	
		}
		
		this.Close =  function() 
		{
			this.ScrollMC.Close();
			createjs.Ticker.removeEventListener("tick", this._Tick);
		}
		
		this.Tick = function(event)
		{
			let dispCount = 0;	
			let lastLocked = 0;
			for (let i = 0; i < main.generators.length; i++)
			{
				let generator = main.generators[i];
				
				generator.clip.visible = true;	
				
				if(generator.doddState == 2)
					generator.clip.DoddMC.visible = true;		
				
				if (generator.posession > 0)
				{
					//購入済み
					generator.clip.gotoAndStop("Active");
					lastLocked = 0;
					dispCount++;
				}
				else if((main.sushi >= generator.availableSushiCount || generator.available ) && lastLocked == 0)
				{
					//購入可能
					generator.clip.gotoAndStop("Lock");
					dispCount++;
					lastLocked++;
				}
				else
				{
					if(lastLocked == 0)
					{
						//不明
						generator.clip.gotoAndStop("Notice");
						dispCount++;
					}
					else
					{
						generator.clip.visible = false;	
					}
					lastLocked++;
				}
				
				if(main.sushi >= generator.storedCost)
					generator.clip.cost.color = "#0D9000";
				else
					generator.clip.cost.color = "#C5253A";
			
			}
			this.ScrollMC.count = dispCount;
			this.ScrollMC.Reload();
		}
	}

	// actions tween:
	this.timeline.addTween(cjs.Tween.get(this).call(this.frame_0).wait(1));

	// AS
	this.ScrollMC = new lib.ScrollMC();
	this.ScrollMC.name = "ScrollMC";
	this.ScrollMC.setTransform(-75,1240.05,1,1,0,0,0,25,25);

	this.timeline.addTween(cjs.Tween.get(this.ScrollMC).wait(1));

	// Mask (mask)
	var mask = new cjs.Shape();
	mask._off = true;
	mask.graphics.p("EhX4BE6MAAAiJzMCvxAAAMAAACJzg");
	mask.setTransform(562.5,471);

	// Cell
	this.ContentMC = new lib.GeneratorContentMC();
	this.ContentMC.name = "ContentMC";

	var maskedShapeInstanceList = [this.ContentMC];

	for(var shapedInstanceItr = 0; shapedInstanceItr < maskedShapeInstanceList.length; shapedInstanceItr++) {
		maskedShapeInstanceList[shapedInstanceItr].mask = mask;
	}

	this.timeline.addTween(cjs.Tween.get(this.ContentMC).wait(1));

	// BG
	this.instance = new lib.panel();

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.GeneratorPanelMC, new cjs.Rectangle(-100.5,-665,1225.5,1930.6), null);


(lib.AchievementPanelMC = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	this.isSingleFrame = false;
	// timeline functions:
	this.frame_0 = function() {
		if(this.isSingleFrame) {
			return;
		}
		if(this.totalFrames == 1) {
			this.isSingleFrame = true;
		}
		this.ContentMC.AchievementCellMC.visible = false;
		this.ScrollMC.content = this.ContentMC;
		
		this.OpenDesciption = function (data)
		{
		    if (!this.ScrollMC.isScrolled()) {
				
				if(this.parent.AchievementDesciptionMC.visible)
				{
					if(this.parent.AchievementDesciptionMC.obj.id == data.id)
					{
						this.parent.AchievementDesciptionMC.Close();
						return;
					}
				}
				
		        this.parent.AchievementDesciptionMC.Open(data);
				main.PlaySE("popup");
				if(data.isAchievementUnread)
				{
					main.RemoveAchievement();
					data.isAchievementUnread = false;
					data.achievementClip.DoddMC.visible =  false;
				}
			
				for (let i = 0; i < main.achievements.length; i++)
				{
					main.achievements[i].achievementClip.AchievementActiveMC.visible = false;
					main.achievements[i].achievementClip.AchievementUpgradeActiveMC.visible = false;
				}
		
				for (let i = 0; i < main.upgrades.length; i++)
				{
					if(main.upgrades[i].achievementClip == null) continue;
					{
						main.upgrades[i].achievementClip.AchievementActiveMC.visible = false;
						main.upgrades[i].achievementClip.AchievementUpgradeActiveMC.visible = false;
					}
				}
		
				if(data.category == 2)
					data.achievementClip.AchievementUpgradeActiveMC.visible = true;
				else
					data.achievementClip.AchievementActiveMC.visible = true;
			}
		}
		
		this.Create = function() 
		{
			//////////////////////////////////////
			//アップグレード
			let posY = 880;
			this.ContentMC.UpgradeTitleMC.y = posY;
			posY += 130;
			
			let upgradeCount = 0; 
			for (let i = 0; i < main.upgrades.length; i++)
			{
				let upgrade = main.upgrades[i];
				
				if(!upgrade.posession)
					continue;
				
				let clip = new lib.AchievementCellMC();
				this.ContentMC.addChild(clip);
				upgrade.achievementClip = clip;
				clip.x = 80 + 250 * (upgradeCount % 4);
				clip.y = posY + 250 * Math.floor(upgradeCount / 4);
				
				clip.ButtonMC.addEventListener("click", function() {
					this.OpenDesciption.call(this, upgrade);
				}.bind(this));
				
				let bitmap = new createjs.Bitmap("images/upgrade/upgrade_" + upgrade.image + ".webp");	
				clip.IconMC.addChild(bitmap);
				bitmap.x = 0;
				bitmap.y = 0;
				bitmap.scaleX = 200 / 300;
				bitmap.scaleY = 200 / 300;	
				bitmap.mouseEnabled = false;
			
				clip.gotoAndStop("Active");
				clip.DoddMC.visible =  upgrade.isAchievementUnread;
				clip.AchievementActiveMC.visible = false;
				clip.AchievementUpgradeActiveMC.visible = false;
				upgradeCount++;
			}
		
			this.ContentMC.UpgradeTitleMC.title.text = "Upgrade";
			this.ContentMC.UpgradeTitleMC.count.text = (upgradeCount / main.upgrades.length * 100).toFixed(2) + "%"
				+ "(" + upgradeCount + "/" + main.upgrades.length +")";
		
			posY += 250 * Math.ceil(upgradeCount / 4);
		
			//////////////////////////////////////
			//アチーブメント
			posY += 0;
			this.ContentMC.AchievementTitleMC.y = posY;
			posY += 130;
		
			let achievementCount = 0; 
			for (let i = 0; i < main.achievements.length; i++)
			{
				let achievement = main.achievements[i];
				
				let clip = new lib.AchievementCellMC();
				this.ContentMC.addChild(clip);
				achievement.achievementClip = clip;
				clip.x = 80 + 250 * (i % 4);
				clip.y = posY + 250 * Math.floor(i / 4);
		
				clip.ButtonMC.addEventListener("click", function() {
					this.OpenDesciption.call(this, achievement);
				}.bind(this));
				
				//アイコン生成
				let bitmap = new createjs.Bitmap("images/achievement/achievement_" + achievement.image + ".webp");
				clip.IconMC.addChild(bitmap);
				//bitmap.x = 10;
				//bitmap.y = 10;
				bitmap.scaleX = 200 / 300;
				bitmap.scaleY = 200 / 300;
				bitmap.mouseEnabled = false;		
				
				if(achievement.completed)
				{
					achievementCount++;
					clip.gotoAndStop("Active");
				}
				else
				{
					clip.gotoAndStop("Lock");
				}
				clip.DoddMC.visible =  achievement.isAchievementUnread;
				clip.AchievementActiveMC.visible = false;
				clip.AchievementUpgradeActiveMC.visible = false;
			}
		
			this.ContentMC.AchievementTitleMC.title.text = "Achievement";
			this.ContentMC.AchievementTitleMC.count.text = (achievementCount / main.achievements.length * 100).toFixed(2) + "%"
				+ "(" + achievementCount + "/" + main.achievements.length +")";
		
			posY += 250 * Math.ceil(main.achievements.length / 4);
		
			//this.ScrollMC.SetFullSize(posY);
			this.ScrollMC.SetSize(posY);
		}
		
		this.Reset = function() 
		{
			for (let i = 0; i < main.achievements.length; i++)
			{
				let achievement = main.achievements[i];
				this.ContentMC.removeChild(achievement.achievementClip);
				achievement.achievementClip = null;
			}
		
			for (let i = 0; i < main.upgrades.length; i++)
			{
				if(main.upgrades[i].achievementClip === null) continue;		
				let upgrade = main.upgrades[i];
				this.ContentMC.removeChild(upgrade.achievementClip);
				upgrade.achievementClip = null;
			}
			this.Create();
		}
		
		this.TimeAgo = function(dateString) {
		    const now = new Date(); // 現在の日時
		    const past = new Date(dateString); // 過去の日時
		
		    const diffMs = now - past; // ミリ秒での差分
		    const diffSeconds = Math.floor(diffMs / 1000);
		    const diffMinutes = Math.floor(diffSeconds / 60);
		    const diffHours = Math.floor(diffMinutes / 60);
		    const diffDays = Math.floor(diffHours / 24);
		
		    if (diffDays > 0) {
		        return `${diffDays}日, ${diffHours % 24}時間前`;
		    } else if (diffHours > 0) {
		        return `${diffHours}時間, ${diffMinutes % 60}分前`;
		    } else if (diffMinutes > 0) {
		        return `${diffMinutes}分前`;
		    } else {
		        return `${diffSeconds}秒前`;
		    }
		}
		
		this.Detail = function() 
		{
			let generatorNum = 0;
			for (let i = 0; i < main.generators.length; i++)
				generatorNum += main.generators[i].posession;
		
			this.ContentMC.detail_sushi.text = FormatNumber(main.sushi, 1, 0);
			this.ContentMC.detail_totalSushi.text = FormatNumber(main.totalSushi, 1, 0);
			this.ContentMC.detail_generatorNum.text = FormatNumber(generatorNum, 1, 0);
			this.ContentMC.detail_gameStart.text = this.TimeAgo(main.createdAt);
			this.ContentMC.detail_touchSps.text = FormatNumber(main.touchSps, 1, 0);
			this.ContentMC.detail_totalClick.text = FormatNumber(main.totalClick, 1, 0);
		}
		
		this.Open =  function() 
		{
			main.PlaySE("open");
			this.Detail();
			this.Reset();
			this.ScrollMC.Open();
			this._Tick = createjs.Ticker.addEventListener("tick", this.Tick.bind(this));
		}
		
		this.Close =  function() 
		{
			this.ScrollMC.Close();
			createjs.Ticker.removeEventListener("tick", this._Tick);	
		}
		
		this.Tick = function(event)
		{
			this.Detail();
		}
	}

	// actions tween:
	this.timeline.addTween(cjs.Tween.get(this).call(this.frame_0).wait(1));

	// AS
	this.ScrollMC = new lib.ScrollMC();
	this.ScrollMC.name = "ScrollMC";
	this.ScrollMC.setTransform(-75,3249.75,1,1,0,0,0,25,25);

	this.timeline.addTween(cjs.Tween.get(this.ScrollMC).wait(1));

	// Mask (mask)
	var mask = new cjs.Shape();
	mask._off = true;
	mask.graphics.p("EhX4HUwMAAAupfMCvxAAAMAAAOpfg");
	mask.setTransform(562.5,3040.7);

	// Cell
	this.ContentMC = new lib.AchievementContentMC();
	this.ContentMC.name = "ContentMC";

	var maskedShapeInstanceList = [this.ContentMC];

	for(var shapedInstanceItr = 0; shapedInstanceItr < maskedShapeInstanceList.length; shapedInstanceItr++) {
		maskedShapeInstanceList[shapedInstanceItr].mask = mask;
	}

	this.timeline.addTween(cjs.Tween.get(this.ContentMC).wait(1));

	// BG
	this.instance = new lib.panel();

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.AchievementPanelMC, new cjs.Rectangle(-100.5,-2.5,1228,3277.8), null);


// stage content:
(lib.index = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = false; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	this.actionFrames = [0];
	this.isSingleFrame = false;
	// timeline functions:
	this.frame_0 = function() {
		if(this.isSingleFrame) {
			return;
		}
		if(this.totalFrames == 1) {
			this.isSingleFrame = true;
		}
		//////////////////////////////////////////////////////////
		//Data
		class Generator
		{
		    constructor()
			{
				this.category = 1;
				this.clip = null;
				
				this.totalSushies = 0;
				this.storedTotalSps = 0;
		
				this.upgrades = [];
				
				this.doddState = 0;					//0:初期、1:表示、2:バッジ表示、3:バッジ削除済み
				
				this.available = false;
				this.availableSushiCount = 0;
				this.description = "";
				this.id = 0;
				this.name = "";
				this.posession = 0;
				this.power = 0;
				this.basePrice = 0;
				this.nextPrice = 0;
				this.priceScalingFactor = 0;
				
				this.storedCost = 0;	//計算済み価格
				this.storedSps = 0;		//ジェネレーター生産量
		    }
		
			CalculateSps = function()
			{
				let mult = 1;
				for (let i = 0; i < this.upgrades.length; i++)
				{
					let upgrade = this.upgrades[i];
					if(!upgrade.available)
						continue;
					mult *= upgrade.operationValue;
				}
				this.storedSps = this.power * mult * main.global_multiplier;
			}
		
			//コストの計算
			CalculateCost = function()
			{
				this.storedCost = Math.ceil(this.basePrice * Math.pow(this.priceScalingFactor, this.posession));
			}
		}
		
		class Upgrade
		{
		    constructor()
			{
				this.category = 2;
				this.clip = null;
				this.achievementClip = null;
				
				this.doddState = 0;
				this.isAchievementUnread = true;
				
				this.available = false;
				this.availableHasGeneratorCount = 0;
				this.availableHasGeneratorMstId = 0;
				this.availableSushiCount = 0;
				this.description = "";
				this.id = 0;
				this.name = "";
				this.operationType = 0;
				this.operationValue = 0;
				this.posession = false;
				this.price = 0;
				this.targetGeneratorMstId = 0;
				this.targetType = 0;
				this.image = "";
		    }
		}
		
		class GoldenSushiShop
		{
		    constructor()
			{
				this.clip = null;
				
				this.id = 0;
				this.name = "";
				this.amount = 0;
				this.price = 0;
				this.type = 1;
		    }
		}
		
		class SushiShop
		{
		    constructor()
			{
				this.clip = null;
				
				this.id = 0;
				this.name = "";
				this.amount = 0;
				this.price = 0;
				this.type = 2;
		    }
		}
		
		class SkinShop
		{
		    constructor()
			{
				this.clip = null;
				this.id = 0;
				this.name = "";
				this.description = "";
				this.priceGolden = 0;
				this.price = 0;
				this.posession = false;
				this.type = 4;
		    }
		}
		
		class RobotShop
		{
		    constructor()
			{
				this.clip = null;
				this.id = 0;
				this.name = "";
				this.description = "";
				this.priceGolden = 0;
				this.posession = false;
				this.type = 3;
		    }
		}
		
		class Achievement
		{
		    constructor()
			{
				this.data;
				this.category = 3;
				this.achievementClip = null;
		
				this.doddState = 0;
				this.isAchievementUnread = true;
				
				this.id = 0;
				this.name = "";
				this.description = "";
				this.image = "";
				this.conditionType = 0;
				this.conditionTargetMstId = 0;
				this.conditionThreshold = "";
				this.completed = false;
		    }
		}
		
		class Pending
		{
		    constructor()
			{
				this.id = "";
				this.amount = 0;
				this.receive = false;
		    }
		}
		
		class Notification
		{
		    constructor()
			{
				this.message;
				this.image;
		    }
		}
		
		class Rewards
		{
		    constructor()
			{
				this.id = 0;
				this.invitationCount = 0;
				this.received = false;
		    }
		}
		
		class Main
		{
		    constructor()
			{
		        this.sushi = 0;				//所持寿司
		        this.totalSushi = 0;		//生成寿司
				this.sushiPs = 0;			//一秒間当たりの寿司
				this.sushiAdd = 0;			//サーバとの差分
				this.sushiDebt = 0;			//
				this.fractionSps = 0;		//小数点以下の寿司
				this.touchSps = 0			//クリック当たりの寿司
				this.totalClick = 0;		//トータルクリック数
				this.goldenSushi = 0;		//ゴールデン寿司
				this.totalGoldenSushi = 0;	//トータルゴールデン寿司
				this.priceIncrease = 1.15;	//価格の上昇率
				this.skinId = 0;			//スキンId
				//this.invitationCount = 49;	//招待数
				//this.invitationState = 0;	//招待報酬 0:未受取、1:1人、2:5人、3:10人、4:50人
				this.createdAt = "";		//ゲーム開始日時
				
				this.global_multiplier = 1;
				this.click_cps_boost = 1;
				//////////////////////////////////////////////////////////
				this.bgm = 0.25;
				this.se = 0.8;
				this.bgm_instance = null;
				
				//////////////////////////////////////////////////////////
				//アップグレード
				this.upgradeStore = [];
				this.upgrades = [];	
				this.upgradeNum = 0;
				this.upgradeNotification = false;
				
				//////////////////////////////////////////////////////////
				//ジェネレーター
				this.generators = [];
				this.generatorNum = 0;
				//this.generatorNotification = false;
				//////////////////////////////////////////////////////////
				//////////////////////////////////////////////////////////
				//ショップ
				this.sushiShops = [];
				this.goldenSushiShops = [];
				this.skinShops = [];
				this.robotShops = [];
			
				//////////////////////////////////////////////////////////
				//実績
				this.achievements = [];
				this.achievementNotificationNum = 0;
				//////////////////////////////////////////////////////////
				//ペンディング
				this.pendings = [];
			
				//////////////////////////////////////////////////////////
				//Tick
				this.fps1LastTickTime = 0;
				this.fps2LastTickTime = 0;
				this.fps3LastTickTime = -60;
				this.fps1Count = 0;
				this.fps2Count = 0;
				this.fps3Count = 0;
				this.bgLastTickTime = 0;
		
				//////////////////////////////////////////////////////////
				//パーティクル
				this.bgParticles = [];
				this.clickParticles = [];
			
				//////////////////////////////////////////////////////////
				//通知
				this.notifications = [];
			
				//////////////////////////////////////////////////////////
				//招待
				//this.rewards = [];
				//this.totalReferralCount = 0;
				//this.referralCode = "";	
			
				//////////////////////////////////////////////////////////
				//スキン
				this.skinId = 0;
				this.currentScroll = 0;
				this.mainSkinBmp = null;
				this.skinBG1LBmp = null;
				this.skinBG2LBmp = null;
				this.skinBG3LBmp = null;
				this.skinBG4LBmp = null;
				this.skinBG1RBmp = null;
				this.skinBG2RBmp = null;
				this.skinBG3Rmp = null;
				this.skinBG4Rmp = null;
				//////////////////////////////////////////////////////////
				//Debug
				this.Debug_isSpeed = false;
				this.Debug_isMemory = false;
				this.Debug_isSound = true;
				this.Debug_isBGM = true;
		    }
		}
		
		main = new Main();
		//////////////////////////////////////////////////////////
		//Game
		//寿司の追加
		main.AddSushi = function(value) 
		{
			if(this.Debug_isSpeed)
				value = value * 1000;
			
			this.sushi += value;
			this.totalSushi += value;
			this.sushiAdd += value;
			this.SushiDisplayUdates();
			this.AddBGParticle();
			this.CheckAchievement_Sushi();
		}
		
		//寿司の消費、生産合計に影響しない
		main.UseSushi = function(value) 
		{
			this.sushi -= value;
			//this.sushiAdd -= value;
			this.SushiDisplayUdates();
		}
		
		//所持寿司の表示更新
		main.SushiDisplayUdates = function() 
		{
			exportRoot.HeaderMC.SushiL_O.text = FormatNumber1(main.sushi, 1, 2);
			exportRoot.HeaderMC.SushiR_O.text = " " + FormatNumber2(main.sushi, 1, 2) + " pieces";
			let lw = exportRoot.HeaderMC.SushiL_O.base.getMeasuredWidth();
			let rw = exportRoot.HeaderMC.SushiR_O.base.getMeasuredWidth();
			let centerX = 1125 / 2;
			exportRoot.HeaderMC.SushiR_O.x = (centerX - (lw + rw) / 2) + lw;
			exportRoot.HeaderMC.SushiL_O.x = exportRoot.HeaderMC.SushiR_O.x;
			exportRoot.HeaderMC.Sps_O .text = "per Second : " + FormatNumber(this.sushiPs, 1, 2) + " pieces";
		}
		
		//クリック生産量の更新
		main.TouchSps = function()
		{
			var mult = 1;
			var add = 1;
			
			for (var i = 0; i < this.upgrades.length; i++)
			{
				var upgrade = this.upgrades[i];
				if(!upgrade.posession)
					continue;
			
				switch (upgrade.operationType)
				{
					case 1:
						mult *= upgrade.operationValue;
						break;
					case 2:
						add += upgrade.operationValue;
						break;
					default:
						continue;
				}
			}
			return (add * mult + main.sushiPs * main.click_cps_boost) * main.global_multiplier;
		}
		
		//自動生産の更新
		main.CalculateGains = function()
		{
			this.sushiPs = 0;
			for (var i = 0; i < this.generators.length; i++)
			{
				var generator = this.generators[i];
				generator.CalculateSps();
				generator.storedTotalSps = generator.posession * generator.storedSps;
				this.sushiPs += generator.storedTotalSps;
			}
			this.SushiDisplayUdates();
		}
		
		//ジェネレータの購入
		main.BuyGenerator = async function(generator)
		{
			if(this.sushi < generator.storedCost)
				return;
			
			//----------------------------------------------
			//仮想的に購入
			this.buyGeneratorTask++;
			this.UseSushi(generator.storedCost);
			generator.posession++;
			generator.CalculateCost();
			main.CalculateGains();
			main.touchSps = main.TouchSps();
			generator.clip.cost.text = FormatNumber(generator.storedCost, 1, 0);
			generator.clip.posession.text = generator.posession;
			
			//todo
			this.generatorNum++;
			this.CheckAchievement_Generator(generator);
			
			main.PlaySE("generator");
			//----------------------------------------------
			//購入
			try {
				console.log("API.現在の寿司の更新");
				//寿司の差分を更新
				await API_Request({
					url: '/sushi/add',
					method: 'POST',
					data: {
						amount: this.sushiAdd
					}
				});
				this.sushiAdd = 0;
			
				console.log("API.ジェネレーター購入");
				//ジェネレーター購入
				await API_Request({
					url: '/generator/' + generator.id + '/purchase',
					method: 'POST'
				});
			} catch (error) {
					console.error("ジェネレーター購入エラー", error);
				
					exportRoot.Mask3MC.visible = true;
				
					console.log("API.自身のユーザー情報を得る");
					API_userData = await API_Request({
						url: '/user/me'
					});
		
					console.log("API.ジェネレーター取得");
					API_generatorsData = await API_Request({
						url: '/generator'
					});
				
					for (var i = 0; i < API_generatorsData["items"].length; i++)
					{
						let _generator = main.generators[i];
						_generator.available = API_generatorsData["items"][i].available;
						_generator.posession = Number(API_generatorsData["items"][i].posession);
						_generator.basePrice = Number(API_generatorsData["items"][i].basePrice);
						_generator.nextPrice = Number(API_generatorsData["items"][i].nextPrice);
						_generator.clip.cost.text = FormatNumber(_generator.storedCost, 1, 0);
						_generator.clip.posession.text = _generator.posession;
					}			
				
					main.touchSps = Number(API_userData.sushiPerClick);
					main.sushi = Number(API_userData["user"].currentSushiCount);
					main.totalSushi = Number(API_userData["user"].totalSushiCount);
					main.SushiDisplayUdates();
				
					exportRoot.Mask3MC.visible = false;
					exportRoot.MessageMC.Open( "通信エラーです");
			}
		
		}
		
		//ジェネレーターの価格更新
		main.CalculateGeneratorCost = function()
		{
			for (var i = 0; i < this.generators.length; i++)
			{
				this.generators[i].CalculateCost();
			}
		}
		
		//アップグレードの購入
		main.BuyUpgrade = async function(upgrade)
		{
			if(this.sushi < upgrade.price)
				return;
		
			//----------------------------------------------
			//仮想的に購入
			this.UseSushi(upgrade.price);
			upgrade.posession = true;
			upgrade.available = true;
			this.CalculateGains();
			this.RebuildStore();
			this.touchSps = this.TouchSps();
			exportRoot.UpgradePanelMC.Reset();
			
			//todo
			this.upgradeNum++;
			this.AddAchievement();
			this.CheckAchievement_Upgrade(upgrade);
		
			main.PlaySE("generator");
			//----------------------------------------------
			//購入
			try {
				console.log("API.現在の寿司の更新");
				//寿司の差分を更新
				await API_Request({
					url: '/sushi/add',
					method: 'POST',
					data: {
						amount: this.sushiAdd
					}
				});
				this.sushiAdd = 0;
			
				console.log("API.アップグレード購入");
				//ジェネレーター購入
				await API_Request({
					url: '/upgrade/' + upgrade.id + '/purchase',
					method: 'POST'
				});
			} catch (error) {
				console.error("アップグレード購入エラー", error);
			
				exportRoot.Mask3MC.visible = true;
			
				console.log("API.自身のユーザー情報を得る");
				API_userData = await API_Request({
					url: '/user/me'
				});
		
				this.touchSps = Number(API_userData.sushiPerClick);
				this.sushi = Number(API_userData["user"].currentSushiCount);
				this.totalSushi = Number(API_userData["user"].totalSushiCount);
				this.SushiDisplayUdates();
				this.CalculateGains();
				this.RebuildStore();
				this.touchSps = this.TouchSps();
			
				console.log("API.アップグレード取得");
				API_upgradesData = await API_Request({
					url: '/upgrade'
				});
			
				for (let i = 0; i < API_upgradesData["items"].length; i++)
				{
					let _upgrade = this.upgrades[i];
					_upgrade.available = API_upgradesData["items"][i].available;
					_upgrade.posession = API_upgradesData["items"][i].posession;
				}
				this.RebuildStore();	
			
				exportRoot.Mask3MC.visible = false;
				exportRoot.MessageMC.Open( "通信エラーです");
			}
		}
		
		main.RebuildGenerator = function()
		{
			for (let i = 0; i < main.generators.length; i++)
			{
				let generator = main.generators[i];
				
				if(main.sushi >= generator.availableSushiCount)
				{
					//0:初期、1:表示、2:バッジ表示、3:バッジ削除済み
					if(generator.posession > 0 && generator.doddState != 3)
					{
						generator.doddState = 3;
						this.SetGeneratorNotification();
					}
					else if(generator.doddState == 0)
					{
						generator.doddState = 2;
						exportRoot.FooterMC.GeneratorDoddMC.visible = true;	
						this.SetGeneratorNotification();				
					}
				}
			}
		}
		
		main.GetGenerator = function(id)
		{
		    return this.generators.find(generator => generator.id == id);
		}
		
		main.GetUpgrade = function(id)
		{
		    return this.upgrades.find(upgrade => upgrade.id == id);
		}
		
		main.RebuildStore = function()
		{
			var num = 0;
			var isRebuild = false;
			this.upgradeStore = [];
			for (let i = 0; i < this.upgrades.length; i++)
			{
				let upgrade = this.upgrades[i];
		
				//所持している場合
				if(upgrade.posession)
					continue;		
				
				//ジェネレーターの所持数による開放
				if(upgrade.availableHasGeneratorMstId > 0)
					if(upgrade.availableHasGeneratorCount > main.GetGenerator(upgrade.availableHasGeneratorMstId).posession)
						continue;
			
				//生成寿司数による解放
				if(upgrade.availableSushiCount > main.totalSushi)
					continue;
		
				//条件を満たせた場合の処理する
				this.upgradeStore.push(upgrade);
					
				//0:初期、1:表示、2:バッジ表示、3:バッジ削除済み
				if(upgrade.doddState == 0)
				{
					upgrade.doddState = 1;
					isRebuild = true;
				}
				
				//if(upgrade.doddState == 1 && main.sushi >= upgrade.price)
				if(upgrade.doddState == 1)
				{
					upgrade.doddState = 2;
					//this.upgradeNotification = true;
					exportRoot.FooterMC.UpgradeBadgeMC.visible = true;
					main.SetUpgradeNotification();
				}
			
				if(upgrade.doddState == 2)
					num++;
			}
		
			exportRoot.FooterMC.UpgradeBadgeMC.notification.text = num;
		
			if(isRebuild)
				exportRoot.UpgradePanelMC.Reset();
		}
		
		//寿司の同期
		main.SushiUpdate = async function()
		{
			try {
				console.log("API.現在の寿司の更新");
				await API_Request({
					url: '/sushi/add',
					method: 'POST',
					data: {
						amount: this.sushiAdd
					}
				});	
				this.sushiAdd = 0;
			} catch (error) {
				console.error("現在の寿司の更新エラー", error);
			}
		}
		
		main.MainTick = function(event)
		{
			//todoオフライン時の処理が入ってないよ！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！
			
			this.fps1Count += event.delta;
			if (this.fps1Count >= 1000 / 1)
			{
				//delta
				var now = createjs.Ticker.getTime() * 0.001;
				var delta = now - this.fps1LastTickTime;
				this.fps1LastTickTime = now;
				this.fps1Count = 0;
				
				this.CalculateGains();
				this.RebuildStore();
				this.BGScroll();
				this.RebuildGenerator();
				this.Debug_Memory();
			}
			
			this.fps2Count += event.delta;
			if (this.fps2Count >= 1000 / 10)
			{
				//delta
				var now = createjs.Ticker.getTime() * 0.001;
				var delta = now - this.fps2LastTickTime;
				this.fps2LastTickTime = now;
				this.fps2Count = 0;
				
				for (var i = 0; i < this.generators.length; i++)
				{
					this.generators[i].totalSushies += this.generators[i].storedTotalSps * delta;
				}
		
				var ammount = this.sushiPs * delta + this.fractionSps;
				this.fractionSps = ammount - Math.floor(ammount);
				ammount -= this.fractionSps;
		
				if(ammount > 0)
					this.AddSushi(ammount);
			}
		
			{
				let now = createjs.Ticker.getTime() * 0.001;
				if (now - this.fps3LastTickTime >= 60)
				{
					this.fps3LastTickTime = now;
					console.log("API.最新ログイン日時を更新");
					API_Request({
						url: '/user/online',
						method: 'POST'
					});
					main.SushiUpdate();
				}
		
			}
		}
		//////////////////////////////////////////////////////////
		//Debug
		this.DebugPanelMC.ContentMC.SpeedButtonMC.on("click", function(evt) {
			main.Debug_isSpeed = !main.Debug_isSpeed;
			this.status.text = main.Debug_isSpeed ? "AddSushi*100" : "Normal";
			COOKIES.setCookie('debug_speed', main.Debug_isSpeed ? "1" : "0", 30);
			main.PlaySE("click");
		});
		
		this.DebugPanelMC.ContentMC.MemoryButtonMC.on("click", function(evt) {
			main.Debug_isMemory = !main.Debug_isMemory;
			this.status.text = main.Debug_isMemory ? "ViewMemory" : "HiddenMemory";
			COOKIES.setCookie('debug_memory', main.Debug_isMemory ? "1" : "0", 30);
			main.PlaySE("click");
		});
		
		this.DebugPanelMC.ContentMC.LocalStorageButtonMC.on("click", function(evt) {
			localStorage.clear();
			main.PlaySE("click");
		});
		
		this.DebugPanelMC.ContentMC.ClearNotificationButtonMC.on("click", function(evt) {
			for (let i = 0; i < main.generators.length; i++)
				main.generators[i].doddState = 0;
			for (let i = 0; i < main.upgrades.length; i++)
				main.upgrades[i].doddState = 0;
			main.SetGeneratorNotification();
			main.SetUpgradeNotification();
			main.PlaySE("click");
		});
		
		main.Debug_Init = function()
		{
			this.Debug_isSpeed = COOKIES.getCookie('debug_speed') == "1";
			exportRoot.DebugPanelMC.ContentMC.SpeedButtonMC.status.text = main.Debug_isSpeed ? "AddSushi*100" : "NormalSpeed";
		
			this.Debug_isMemory = COOKIES.getCookie('debug_memory') == "1";
			exportRoot.DebugPanelMC.ContentMC.MemoryButtonMC.status.text = main.Debug_isMemory ? "ViewMemory" : "HiddenMemory";
		
			exportRoot.DebugPanelMC.ContentMC.LocalStorageButtonMC.status.text = "StorageClear";
			exportRoot.DebugPanelMC.ContentMC.ClearNotificationButtonMC.status.text = "ResetNotification";
		}
		
		main.Debug_Memory = function()
		{
			if(this.Debug_isMemory)
			{
				exportRoot.HeaderMC.debug.visible = true;
				exportRoot.HeaderMC.debug.text = "使用可能 : ";
				exportRoot.HeaderMC.debug.text += performance.memory.jsHeapSizeLimit.toLocaleString();
				exportRoot.HeaderMC.debug.text += "\n";
				exportRoot.HeaderMC.debug.text += "割り当て : ";
				exportRoot.HeaderMC.debug.text += performance.memory.totalJSHeapSize.toLocaleString();
				exportRoot.HeaderMC.debug.text += "\n";
				exportRoot.HeaderMC.debug.text += "使用中 : ";
				exportRoot.HeaderMC.debug.text += performance.memory.usedJSHeapSize.toLocaleString();
			}
			else
			{
				exportRoot.HeaderMC.debug.visible = false;
			}
		}
		
		////////////////////////
		
		this.DebugPanelMC.ContentMC.ClearButtonMC.status.text = "Clear";
		this.DebugPanelMC.ContentMC.ClearButtonMC.on("click", function(evt) {
			exportRoot.DebugPanelMC.ContentMC.log.text = "";
			main.PlaySE("click");
		});
		main.log = function(str)
		{
			exportRoot.DebugPanelMC.ContentMC.log.text += str + "\n";
		}
		
		if(isMobile())
		{
			window.onerror = function(message, source, lineno, colno, error) {
				main.log(`Error: ${message}\nLine: ${lineno}`);
				return true;
			};
		
			window.addEventListener('unhandledrejection', function(event) {
				main.log(`Unhandled Promise Rejection: ${event.reason}`);
			});
		}
		//////////////////////////////////////////////////////////
		//Layout
		//1125 * 2436
		this.resizeCanvas = function() {
			if(lib.properties.width / 1125 > 0.3)
			{
				this.canvasScaleX = 0.3;
				this.canvasScaleY = lib.properties.height / 2436;
				this.offsetX = (lib.properties.width - 1125 * 0.3)/2;
			}	
			else
			{
				this.canvasScaleX = lib.properties.width / 1125;
				this.canvasScaleY = lib.properties.height / 2436;
				this.offsetX = 0;
			}
		
			this.BgMC.scaleX = this.canvasScaleX;
			//this.BgMC.scaleY = this.canvasScaleX;
			this.BgMC.scaleY = this.canvasScaleY;
			this.BgMC.x = this.offsetX;
		
			this.HeaderMC.scaleX = this.canvasScaleX;
			this.HeaderMC.scaleY = this.canvasScaleX;
			this.HeaderMC.x = this.offsetX;
		
			this.FooterMC.scaleX = this.canvasScaleX;
			this.FooterMC.scaleY = this.canvasScaleX;
			this.FooterMC.y = 2436 * this.canvasScaleY;
			this.FooterMC.x = this.offsetX;
		
			this.UpperBGMC.scaleX = this.canvasScaleX;
			this.UpperBGMC.scaleY = this.canvasScaleX;
			this.UpperBGMC.x = this.offsetX;
		
			this.UnderBGMC.scaleX = this.canvasScaleX;
			this.UnderBGMC.scaleY = this.canvasScaleX;
			this.UnderBGMC.y = 2436 * this.canvasScaleY;
			this.UnderBGMC.x = this.offsetX;
		
			this.LodingMC.scaleX = this.canvasScaleX;
			this.LodingMC.scaleY = this.canvasScaleY;
			this.LodingMC.x = this.offsetX;
			
			this.GeneratorPanelMC.x = this.offsetX;
			this.UpgradePanelMC.x = this.offsetX;
			this.ShopPanelMC.x = this.offsetX;
			this.AchievementPanelMC.x = this.offsetX;
			this.DebugPanelMC.x = this.offsetX;
			
			this.NotificationMC.scaleX = this.canvasScaleX;
			this.NotificationMC.scaleY = this.canvasScaleX;
			this.NotificationMC.x = this.offsetX;
			this.NotificationMC.y = this.canvasScaleY;
		}
		window.addEventListener('resize', this.resizeCanvas.bind(this));	
		this.resizeCanvas();
		
		this.MaskMC.visible = false;
		this.Mask2MC.visible = false;
		this.Mask3MC.visible = false;
		this.Block = function(){}
		this.Mask3MC.addEventListener("click", this.Block.bind(this));
		
		this.FooterMC.AchievementBadgeMC.visible = false;
		this.FooterMC.GeneratorDoddMC.visible = false;
		this.FooterMC.UpgradeBadgeMC.visible = false;
		
		this.LodingMC.addEventListener("click", function() {
			console.log("Click LodingMC");
		}.bind(this));
		//////////////////////////////////////////////////////////
		//Effect
		main.AddBGParticle = function()
		{
			var now = createjs.Ticker.getTime() * 0.001;
			if(this.bgLastTickTime + 0.1 < now)
				this.bgLastTickTime = now;
			else
				return;
			
			var particle = null;
			for (var i = 0; i < this.bgParticles.length; i++)
			{
				if(!this.bgParticles[i].visible)
				{
					particle = this.bgParticles[i];
					break;
				}
			}
		
			if(particle == null)
				return;
		
			particle.visible = true;
			particle.x = Math.random() * 1125;	
			particle.y = 200;
			particle.rotation = Math.random() * 360;	
			particle.alpha = 1;
			
			lib.properties.width / 1125;
			createjs.Tween.get(particle)
				.to({ y: 2535 * 0.9, rotation : particle.rotation + (0.5 - Math.random()) * 300}, 6000, createjs.Ease.linear)
				.call(() => {
				particle.visible = false;
		    });
		
			if (this.sushiPs < 50)
			{
				createjs.Tween.get(particle)
					.wait(3500)
					.to({alpha : 0}, 2500, createjs.Ease.linear);
			}
			//linear,sineIn
		}
		
		main.BGScroll = function()
		{
			//debug
			//this.sushiPs = 10000;	
			
			if (this.sushiPs >= 1000)
			{
				if(this.currentScroll != 3)
				{
					this.currentScroll = 3;
					this.CreateBG();
				}
			}		
			else if (this.sushiPs >= 500)
			{
				if(this.currentScroll != 2)
				{
					this.currentScroll = 2;
					this.CreateBG();
				}
			}
			else if (this.sushiPs >= 50)
			{
				if(this.currentScroll != 1)
				{
					this.currentScroll = 1;
					this.CreateBG();
				}
			}
		}
		
		main.CreateBG = function()
		{
			if( this.skinBG1RBmp != null)
			{
				exportRoot.BgMC.SushiBGScrollMC.removeChild(this.skinBG1RBmp);
				this.skinBG1RBmp == null;
			}		
			if( this.skinBG2RBmp != null)
			{
				exportRoot.BgMC.SushiBGScrollMC.removeChild(this.skinBG2RBmp);
				this.skinBG2RBmp == null;
			}
			if( this.skinBG3RBmp != null)
			{
				exportRoot.BgMC.SushiBGScrollMC.removeChild(this.skinBG3RBmp);
				this.skinBG3RBmp == null;
			}
			if( this.skinBG4RBmp != null)
			{
				exportRoot.BgMC.SushiBGScrollMC.removeChild(this.skinBG4RBmp);
				this.skinBG4RBmp == null;
			}
		
			if( this.skinBG1LBmp != null)
			{
				exportRoot.BgMC.SushiBGScrollMC.removeChild(this.skinBG1LBmp);
				this.skinBG1LBmp == null;
			}		
			if( this.skinBG2LBmp != null)
			{
				exportRoot.BgMC.SushiBGScrollMC.removeChild(this.skinBG2LBmp);
				this.skinBG2LBmp == null;
			}
			if( this.skinBG3LBmp != null)
			{
				exportRoot.BgMC.SushiBGScrollMC.removeChild(this.skinBG3LBmp);
				this.skinBG3LBmp == null;
			}
			if( this.skinBG4LBmp != null)
			{
				exportRoot.BgMC.SushiBGScrollMC.removeChild(this.skinBG4LBmp);
				this.skinBG4LBmp == null;
			}
		
			if(this.currentScroll == 0)	
				return;
			
			this.skinBG1RBmp = new createjs.Bitmap("images/skin/scroll_" + this.skinId.toString().padStart(2, '0') + "_" + this.currentScroll+".webp");
			exportRoot.BgMC.SushiBGScrollMC.addChild(this.skinBG1RBmp);
			this.skinBG1RBmp.y = -1122;
			this.skinBG1RBmp.x = -1122 /2;
		
			this.skinBG2RBmp = new createjs.Bitmap("images/skin/scroll_" + this.skinId.toString().padStart(2, '0') + "_" + this.currentScroll+".webp");
			exportRoot.BgMC.SushiBGScrollMC.addChild(this.skinBG2RBmp);
			this.skinBG2RBmp.x = -1122 /2;
		
			this.skinBG3RBmp = new createjs.Bitmap("images/skin/scroll_" + this.skinId.toString().padStart(2, '0') + "_" + this.currentScroll+".webp");
			exportRoot.BgMC.SushiBGScrollMC.addChild(this.skinBG3RBmp);
			this.skinBG3RBmp.y = 1122;
			this.skinBG3RBmp.x = -1122 /2;
		
			this.skinBG4RBmp = new createjs.Bitmap("images/skin/scroll_" + this.skinId.toString().padStart(2, '0') + "_" + this.currentScroll+".webp");
			exportRoot.BgMC.SushiBGScrollMC.addChild(this.skinBG4RBmp);
			this.skinBG4RBmp.y = 1122 * 2;
			this.skinBG4RBmp.x = -1122 /2;
		
			this.skinBG1LBmp = new createjs.Bitmap("images/skin/scroll_" + this.skinId.toString().padStart(2, '0') + "_" + this.currentScroll+".webp");
			exportRoot.BgMC.SushiBGScrollMC.addChild(this.skinBG1LBmp);
			this.skinBG1LBmp.y = -1122;
			this.skinBG1LBmp.x = 1122 /2;
		
			this.skinBG2LBmp = new createjs.Bitmap("images/skin/scroll_" + this.skinId.toString().padStart(2, '0') + "_" + this.currentScroll+".webp");
			exportRoot.BgMC.SushiBGScrollMC.addChild(this.skinBG2LBmp);
			this.skinBG2LBmp.x = 1122 /2;
		
			this.skinBG3LBmp = new createjs.Bitmap("images/skin/scroll_" + this.skinId.toString().padStart(2, '0') + "_" + this.currentScroll+".webp");
			exportRoot.BgMC.SushiBGScrollMC.addChild(this.skinBG3LBmp);
			this.skinBG3LBmp.y = 1122;
			this.skinBG3LBmp.x = 1122 /2;
		
			this.skinBG4LBmp = new createjs.Bitmap("images/skin/scroll_" + this.skinId.toString().padStart(2, '0') + "_" + this.currentScroll+".webp");
			exportRoot.BgMC.SushiBGScrollMC.addChild(this.skinBG4LBmp);
			this.skinBG4LBmp.y = 1122 * 2;
			this.skinBG4LBmp.x = 1122 /2;
		
			console.log("main.CreateBG");
		}
		
		main.InitBGScroll = function()
		{
			exportRoot.BgMC.SushiBGScrollMC.y = 0;
			createjs.Tween.get(exportRoot.BgMC.SushiBGScrollMC, {loop: true})
			.to({ y: (1125 * 1.0) }, 3500, createjs.Ease.linear);	
		}
		
		main.SetSkin = function()
		{
			if( this.mainSkinBmp != null)
			{
				exportRoot.SushiMC.SushiImageMC.removeChild(this.mainSkinBmp);
				this.mainSkinBmp == null;
			}
		
			this.mainSkinBmp = new createjs.Bitmap("images/skin/skin_"+this.skinId.toString().padStart(2, '0')+".webp");
			exportRoot.SushiMC.SushiImageMC.addChild(this.mainSkinBmp);
			this.mainSkinBmp.scaleX = 0.5;
			this.mainSkinBmp.scaleY = 0.5;
		
			//debug
			//this.sushiPs = 10000;	
		
			if (this.sushiPs >= 1000)
					this.currentScroll = 3;
			else if (this.sushiPs >= 500)
					this.currentScroll = 2;
			else if (this.sushiPs >= 50)
					this.currentScroll = 1;
		
			this.CreateBG();
			
			//パーティクル
			for (let i = 0; i < this.bgParticles.length; i++)
			{
				exportRoot.BgMC.removeChild(this.bgParticles[i]);
				this.bgParticles[i] = null;
			}
		
			for (let i = 0; i < this.clickParticles.length; i++)
			{
				exportRoot.BgMC.removeChild(this.clickParticles[i]);
				this.clickParticles[i] = null;
			}
		
			this.bgParticles = [];
			this.clickParticles = [];
			
			for (let i = 0; i < 50; i++)
			{
				let clip  = new createjs.Bitmap("images/skin/fall_skin"+this.skinId.toString().padStart(2, '0')+".webp");
				clip.regX = 75;
				clip.regY = 75;
				exportRoot.BgMC.addChild(clip);
				this.bgParticles.push(clip);
				clip.visible = false;
			}
			for (let i = 0; i < 30; i++)
			{
				let clip  = new createjs.Bitmap("images/skin/fall_skin"+this.skinId.toString().padStart(2, '0')+".webp");
				clip.regX = 75;
				clip.regY = 75;		
				exportRoot.addChild(clip);
				this.clickParticles.push(clip);
				clip.visible = false;
			}	
			
		}
		//////////////////////////////////////////////////////////
		//BGM
		if(localStorage.getItem('bgm'))
			main.bgm = Number(localStorage.getItem('bgm'));
		else
			localStorage.setItem('bgm', main.bgm);
		
		if(localStorage.getItem('se'))
			main.se = Number(localStorage.getItem('se'));
		else
			localStorage.setItem('se', main.se);
		
		function resumeAudioContext(event)
		{
			window.removeEventListener('click', resumeAudioContext);
			window.removeEventListener('touchstart', resumeAudioContext);
			main.PlayBGM();
		}
		window.addEventListener('click', resumeAudioContext);
		window.addEventListener('touchstart', resumeAudioContext);
		
		main.PlayBGM = function()
		{
			if(this.bgm > 0)
			{
				if(main.bgm_instance === null)
					main.bgm_instance = createjs.Sound.play("bgm", {'interrupt':createjs.Sound.INTERRUPT_EARLY,  'loop': -1, 'volume': this.bgm});
				else
					main.bgm_instance.volume = this.bgm;
			}
			else
			{
				if(main.bgm_instance !== null)
					main.bgm_instance.volume = 0;
			}
		}
		
		main.PlaySE = function(id)
		{
			if(this.se > 0)
				createjs.Sound.play(id, {'interrupt':createjs.Sound.INTERRUPT_EARLY,  'loop': 0, 'volume': this.se});
		}
		//////////////////////////////////////////////////////////
		//Achievement
		main.AddAchievement = function(achievement)
		{
			this.achievementNotificationNum++;
			exportRoot.FooterMC.AchievementBadgeMC.visible = true;
			exportRoot.FooterMC.AchievementBadgeMC.notification.text = this.achievementNotificationNum;
		}
		
		main.RemoveAchievement = function()
		{
			this.achievementNotificationNum--;
			if(this.achievementNotificationNum <= 0)
				exportRoot.FooterMC.AchievementBadgeMC.visible = false;
			exportRoot.FooterMC.AchievementBadgeMC.notification.text = this.achievementNotificationNum;
		}
		
		//実績・ジェネレーター
		main.CheckAchievement_Generator = function(generator)
		{
			for (var i = 0; i < this.achievements.length; i++)
			{
				var achievement = this.achievements[i];
				if(achievement.completed == true) continue;
				if(achievement.conditionType == 2) continue;
				if(!(generator.posession >= achievement.conditionThreshold)) continue;
				
				achievement.completed = true;
				this.AddNotification("実績が解除されました\n" + achievement.description ,"images/achievement/achievement_" + achievement.image + ".webp");
				this.AddAchievement(achievement);
			}
		}
		
		//実績・アップグレード
		main.CheckAchievement_Upgrade = function(upgrade)
		{
			for (var i = 0; i < this.achievements.length; i++)
			{
				var achievement = this.achievements[i];
				if(achievement.completed == true) continue;
				if(achievement.conditionType == 1) continue;
				if(!(upgrade.posession >= achievement.conditionThreshold)) continue;
				
				achievement.completed = true;
				this.AddNotification("実績が解除されました\n" + achievement.description ,"images/achievement/achievement_" + achievement.image + ".webp");
				this.AddAchievement(achievement);
			}
		}
		
		//実績・sushi
		main.CheckAchievement_Sushi = function()
		{
			for (var i = 0; i < this.achievements.length; i++)
			{
				var achievement = this.achievements[i];
				if(achievement.completed == true) continue;
				
				switch (achievement.conditionType)
				{
					case 3://sushiの数
						if(!(main.sushi >= achievement.conditionThreshold)) continue;
						break;
					case 4://TotalSushiの数
						if(!(main.totalSushi >= achievement.conditionThreshold)) continue;
						break;
					default:
						continue;
				}
				
				achievement.completed = true;
				this.AddNotification("実績が解除されました\n" + achievement.description ,"images/achievement/achievement_" + achievement.image + ".webp");
				this.AddAchievement(achievement);
			}
		}
		//////////////////////////////////////////////////////////
		//Panel
		
		//Layout
		this.page = 0;
		
		//GeneratorPanel
		this.FooterMC.GeneratorButtonMC.addEventListener("click", ClickHandler_GeneratorPanelOpen.bind(this));
		function ClickHandler_GeneratorPanelOpen()
		{
			this.PanelOpen(1);
		}
		this.GeneratorPanelMC.x = this.offsetX;
		this.GeneratorPanelMC.visible = false;	
		
		//UpgradePanel
		this.FooterMC.UpgradeButtonMC.addEventListener("click", ClickHandler_UpgradePanelOpen.bind(this));
		function ClickHandler_UpgradePanelOpen()
		{
			this.PanelOpen(2);
		}
		this.UpgradePanelMC.x = this.offsetX;
		this.UpgradePanelMC.visible = false;	
		
		//ShopPanel
		this.FooterMC.ShopButtonMC.addEventListener("click", ClickHandler_ShopPanelOpen.bind(this));
		function ClickHandler_ShopPanelOpen()
		{
			this.PanelOpen(3);
		}
		this.ShopPanelMC.x = this.offsetX;
		this.ShopPanelMC.visible = false;	
		
		//AchievementPanel
		this.FooterMC.AchievementButtonMC.addEventListener("click", ClickHandler_AchievementPanelOpen.bind(this));
		function ClickHandler_AchievementPanelOpen()
		{
			this.PanelOpen(4);
		}
		this.AchievementPanelMC.x = this.offsetX;
		this.AchievementPanelMC.visible = false;	
		
		//DebugPanel
		this.HeaderMC.DebugButtonMC.addEventListener("click", ClickHandler_DebugPanelOpen.bind(this));
		function ClickHandler_DebugPanelOpen()
		{
			this.PanelOpen(5);
		}
		this.DebugPanelMC.x = this.offsetX;
		this.DebugPanelMC.visible = false;	
		
		this.resizeCanvas = function() {
			this.GeneratorPanelMC.scaleX = this.canvasScaleX;
			this.GeneratorPanelMC.scaleY = this.canvasScaleX;
			this.GeneratorPanelMC.y = 2436 * this.canvasScaleY -251 * this.canvasScaleX;
			
			this.UpgradePanelMC.scaleX = this.canvasScaleX;
			this.UpgradePanelMC.scaleY = this.canvasScaleX;
			this.UpgradePanelMC.y = 2436 * this.canvasScaleY -251 * this.canvasScaleX;	
		
			this.ShopPanelMC.scaleX = this.canvasScaleX;
			this.ShopPanelMC.scaleY = this.canvasScaleX;
			this.ShopPanelMC.y = (914 * this.canvasScaleX) + (227 * this.canvasScaleX);
		
			this.AchievementPanelMC.scaleX = this.canvasScaleX;
			this.AchievementPanelMC.scaleY = this.canvasScaleX;
			this.AchievementPanelMC.y = 2436 * this.canvasScaleY -251 * this.canvasScaleX;
		
			this.DebugPanelMC.scaleX = this.canvasScaleX;
			this.DebugPanelMC.scaleY = this.canvasScaleX;
			this.DebugPanelMC.y = 2436 * this.canvasScaleY -251 * this.canvasScaleX;
		}
		window.addEventListener('resize', this.resizeCanvas.bind(this));	
		this.resizeCanvas();
		
		this.PanelOpen = function (_page)
		{
			switch (this.page)
			{
				case 1:
					this.Close(this.GeneratorPanelMC);
					this.GeneratorPanelMC.Close();
					break;
				case 2:
					this.Close(this.UpgradePanelMC);
					this.UpgradePanelMC.Close();
					break;
				case 3:
					this.Close(this.ShopPanelMC);
					this.ShopPanelMC.Close();
					break;
				case 4:
					this.Close(this.AchievementPanelMC);
					this.AchievementPanelMC.Close();
					if(this.AchievementDesciptionMC	.visible)
						this.AchievementDesciptionMC.Close();
					break;
				case 5:
					this.Close(this.DebugPanelMC);
					this.DebugPanelMC.Close();
					break;
		    }	
		
			if(this.page != _page)
			{
				switch (_page)
				{
					case 1:
						this.Open(this.GeneratorPanelMC, false);
						this.GeneratorPanelMC.Open();
						break;
					case 2:
						this.Open(this.UpgradePanelMC, false);
						this.UpgradePanelMC.Open();
						break;
					case 3:
						this.Open(this.ShopPanelMC, true);
						this.ShopPanelMC.Open();
						break;
					case 4:
						this.Open(this.AchievementPanelMC, false);
						this.AchievementPanelMC.Open();
						break;
					case 5:
						this.Open(this.DebugPanelMC, true);
						this.DebugPanelMC.Open();
						break;
				}
				this.page = _page;
		    }
			else
			{
				this.page = 0;
			}
		}
		
		this.Close = function (_targetMC)
		{
			//パネルの移動
			createjs.Tween.get(_targetMC, { override: true })
			.to({ x: this.offsetX, y: 2436 * this.canvasScaleY -251 * this.canvasScaleX + 914 * this.canvasScaleX }, 250, createjs.Ease.backInOut)
			.call(() => {
				_targetMC.visible = false;
		    });
		
			//寿司の移動
			createjs.Tween.get(this.SushiMC, { override: true })
			.to({ y: document.documentElement.clientHeight / 2 }, 250, createjs.Ease.cubicInOut);
		
			//背景も動かす場合
			//createjs.Tween.get(this.BgMC, { override: true })
			//.to({ y: 0 }, 250, createjs.Ease.backInOut);
		}
		
		this.Open = function (_targetMC, isFull)
		{
			//初期位置
			_targetMC.y =  2436 * this.canvasScaleY -251 * this.canvasScaleX + 914 * this.canvasScaleX;
			_targetMC.visible = true;	
			
			if(isFull)
			{
				//パネルの移動
				var y = (914 * this.canvasScaleX) + (227 * this.canvasScaleX);		
				createjs.Tween.get(_targetMC, { override: true })
				.to({ x: this.offsetX, y: y }, 250, createjs.Ease.bounceOut);
			}
			else
			{
				//パネルの移動
				createjs.Tween.get(_targetMC, { override: true })
					.to({ x: this.offsetX, y: 2436 * this.canvasScaleY -251 * this.canvasScaleX }, 250, createjs.Ease.bounceOut);
			
				//寿司の移動
				var y = ((2436 * this.canvasScaleY -251 * this.canvasScaleX -914 * this.canvasScaleX)
					- (227 * this.canvasScaleX)) / 2 + (227 * this.canvasScaleX);
				createjs.Tween.get(this.SushiMC, { override: true })
				.to({ y: y }, 250, createjs.Ease.cubicInOut);
			}
		
			//背景も動かす場合
			//createjs.Tween.get(this.BgMC, { override: true })
			//.to({ y: y - document.documentElement.clientHeight / 2 }, 250, createjs.Ease.expoOut);
		}
		
		//////////////////////////////////////////////////////////////////
		//Invite
		this.FooterMC.InviteButtonMC.addEventListener("click", ClickHandler_InviteOpen.bind(this));
		function ClickHandler_InviteOpen()
		{
			this.InviteDesciptionMC.Open();
		}
		
		//////////////////////////////////////////////////////////
		//Option
		this.HeaderMC.OptionButtonMC.addEventListener("click", ClickHandler_OptionPanelOpen.bind(this));
		function ClickHandler_OptionPanelOpen()
		{
			this.ConfigDesciptionMC.Open();
		}
		//////////////////////////////////////////////////////////
		//Notification
		//this.NotificationMC.message_O = new Outline(lib, exportRoot.NotificationMC.message, 5, "#000000", "#FFFFFF");
		this.NotificationMC.bitmap = null;
		exportRoot.NotificationMC.visible = false;
		
		main.AddNotification = function(messsage, image)
		{
			var notification = new Notification();
			notification.message = messsage;
			notification.image = image;
			
			this.notifications.push(notification);
			
			if(!exportRoot.NotificationMC.visible)
				this.CreateNotification();
		}
		
		main.RemoveNotification = function()
		{
			this.notifications.shift();
			exportRoot.NotificationMC.visible = false;
			
			if(this.notifications.length > 0)
				this.CreateNotification();
		}
		
		main.CreateNotification = function()
		{
			
			exportRoot.NotificationMC.visible = true;
			exportRoot.NotificationMC.x = exportRoot.offsetX;
			exportRoot.NotificationMC.y = -300 * exportRoot.canvasScaleY;
			exportRoot.NotificationMC.alpha = 1;
			exportRoot.NotificationMC.scaleX = exportRoot.canvasScaleX;
			exportRoot.NotificationMC.scaleY = exportRoot.canvasScaleX;	
		
			createjs.Tween.get(exportRoot.NotificationMC, { override: true })
				.to({ y : 0 }, 500, createjs.Ease.quadOut)//quadOut quadIn
				.wait(1500)
				.to({ alpha: 0 }, 500, createjs.Ease.linear)
				.call(() => {
					this.RemoveNotification();
				});
		
			//exportRoot.NotificationMC.message_O.text = this.notifications[0].message;
			exportRoot.NotificationMC.message.text = this.notifications[0].message;
			//SetWrapOutlineText(exportRoot.NotificationMC.message_O);		
			
			if( exportRoot.NotificationMC.bitmap != null)
			{
				exportRoot.NotificationMC.removeChild(exportRoot.NotificationMC.bitmap);
				exportRoot.NotificationMC.bitmap == null;
			}	
			
			//アイコン生成
			exportRoot.NotificationMC.bitmap = new createjs.Bitmap(this.notifications[0].image);
			exportRoot.NotificationMC.addChild(exportRoot.NotificationMC.bitmap);
			exportRoot.NotificationMC.bitmap.x = 72;
			exportRoot.NotificationMC.bitmap.y = 55;
			exportRoot.NotificationMC.bitmap.scaleX = 200 / 300;
			exportRoot.NotificationMC.bitmap.scaleY = 200 / 300;
		}
		
		main.GetGeneratorNotification = function() 
		{
			let notification = localStorage.getItem('gn')
			
			console.log("GeneratorNotification : " + notification);	
			
			if(notification === null)
			{
				//別端末の場合は通知は無し
				for (var i = 0; i < this.generators.length; i++)
				{	
					if(this.generators[i].posession > 0)
						this.generators[i].doddState = 3;
				}
			}
			else
			{
				let array1 = notification.split(',');
			
				for (let i = 0; i < array1.length; i++)
				{
					let array2 = array1[i].split(':');
					main.GetGenerator(array2[0]).doddState = array2[1];
				}
			}
		}
		
		main.SetGeneratorNotification = function() 
		{
			console.log("SetGeneratorNotification");
			
			let array =[];
			
			for (var i = 0; i < this.generators.length; i++)
			{
				array.push(this.generators[i].id +":" +this.generators[i].doddState);
			}
			localStorage.setItem('gn', array.join(","));
		}
		
		main.GetUpgradeNotification = function() 
		{
			let notification = localStorage.getItem('ug')
			
			console.log("UpgradeNotification : " + notification);	
			
			if(notification === null)
			{
				//別端末の場合は通知は無し
				for (var i = 0; i < this.upgrades.length; i++)
				{	
					if(this.upgrades[i].posession)
						this.upgrades[i].doddState = 3;
				}
			}
			else
			{
				let array1 = notification.split(',');
			
				for (let i = 0; i < array1.length; i++)
				{
					let array2 = array1[i].split(':');
					 main.GetUpgrade(array2[0]).doddState = array2[1];
				}
			}
		}
		
		main.SetUpgradeNotification = function() 
		{
			console.log("SetUpgradeNotification");
			
			let array =[];
			
			for (var i = 0; i < this.upgrades.length; i++)
			{
				if((this.upgrades[i].doddState == 2 || this.upgrades[i].doddState == 3) && !this.upgrades[i].posession)
					array.push(this.upgrades[i].id +":" +this.upgrades[i].doddState);
			}
			localStorage.setItem('ug', array.join(","));
		}
		//////////////////////////////////////////////////////////
		//Pending
		exportRoot.PendingDesciptionMC.visible = false;
		
		this.PendingDesciptionMC.scaleX = this.canvasScaleX;
		this.PendingDesciptionMC.scaleY = this.canvasScaleX;
		this.PendingDesciptionMC.x = this.offsetX;
		this.PendingDesciptionMC.y = 0 * this.canvasScaleY;
		
		main.CheckPending = function() 
		{
			for (let i = 0; i < this.pendings.length; i++)
			{
				var pending = this.pendings[i];
				if(pending.receive == true) continue;
				exportRoot.PendingDesciptionMC.Open(pending);
				break;
			}	
		}
		//////////////////////////////////////////////////////////
		//Init
		//var API_userData;
		var API_generatorsData;
		var API_upgradesData;
		var API_sushiShopData;
		var API_goldenSushiShopData;
		var API_skinShopData;
		var API_robotShopData;
		var API_achievementData;
		var API_pendingData;
		var API_referralData;
		
		this.fetchSequentialAPIs = async function()
		{
		    try {
				console.log("API.ジェネレーター取得");
		        API_generatorsData = await API_Request({
		            url: '/generator'
		        });
				console.log(API_generatorsData);
				setProgress(65);
			
				console.log("API.アップグレード取得");
		        API_upgradesData = await API_Request({
		            url: '/upgrade'
		        });
				console.log(API_upgradesData);
				setProgress(70);
			
				console.log("API.寿司ショップ取得");
		        API_sushiShopData = await API_Request({
		            url: '/market/sushi'
		        });
				console.log(API_sushiShopData);
				setProgress(75);
			
				console.log("API.金寿司ショップ取得");
		        API_goldenSushiShopData = await API_Request({
		            url: '/market/golden-sushi'
		        });
				console.log(API_goldenSushiShopData);
				setProgress(80);
			
				console.log("API.Skinショップ取得");
		        API_skinShopData = await API_Request({
		            url: '/skin'
		        });
				console.log(API_skinShopData);
				setProgress(85);
			
				console.log("API.ロボット取得");
		        API_robotShopData = await API_Request({
		            url: '/robot	'
		        });
				console.log(API_robotShopData);
				setProgress(90);	
			
				console.log("API.アチーブメント取得");
		        API_achievementData = await API_Request({
		            url: '/achievement'
		        });
				console.log(API_achievementData);
				setProgress(95);
			
				console.log("API.ペンディング取得");
		        API_pendingData = await API_Request({
		            url: '/sushi/pending'
		        });
				console.log(API_pendingData);
				setProgress(100);
		/*
				console.log("API.リファラル");
		        API_referralData = await API_Request({
		            url: '/user/referral-status	'
		        });
				console.log(API_referralData);
				setProgress(100);
		*/
		    } catch (error) {
		        console.error("todo:初期データロード", error);
		    }
		}
		
		this.Run = async function()
		{
			await this.fetchSequentialAPIs();
			
			//////////////////////////////////////////////////////////
			//ユーザデータ
			main.touchSps = Number(API_userData.sushiPerClick);
			main.sushi = Number(API_userData["user"].currentSushiCount);
			main.goldenSushi = Number(API_userData["user"].currentGoldSushiCount);
			main.totalSushi = Number(API_userData["user"].totalSushiCount);
			main.totalGoldenSushi = Number(API_userData["user"].totalGoldSushiCount);
			main.createdAt = API_userData["user"].createdAt;
			main.skinId = Number(API_userData["user"].currentSkinMstId);
			
			//////////////////////////////////////////////////////////
			//アップグレード
			for (let i = 0; i < API_upgradesData["items"].length; i++)
			{
				var	upgrade = new Upgrade();
				upgrade.available = API_upgradesData["items"][i].available;
				upgrade.availableHasGeneratorCount = Number(API_upgradesData["items"][i].availableHasGeneratorCount);
				upgrade.availableHasGeneratorMstId = Number(API_upgradesData["items"][i].availableHasGeneratorMstId);
				upgrade.availableSushiCount = Number(API_upgradesData["items"][i].availableSushiCount);
				upgrade.description = API_upgradesData["items"][i].description;
				upgrade.id = Number(API_upgradesData["items"][i].id);
				upgrade.name = API_upgradesData["items"][i].name;
				upgrade.operationType = Number(API_upgradesData["items"][i].operationType);
				upgrade.operationValue = Number(API_upgradesData["items"][i].operationValue);
				upgrade.posession = API_upgradesData["items"][i].posession;
				upgrade.price = Number(API_upgradesData["items"][i].price);
				upgrade.targetGeneratorMstId = Number(API_upgradesData["items"][i].targetGeneratorMstId);
				upgrade.targetType = Number(API_upgradesData["items"][i].targetType);
				upgrade.image = API_upgradesData["items"][i].imageName;
				main.upgrades.push(upgrade);
			}
			main.GetUpgradeNotification();
			//////////////////////////////////////////////////////////
			//ジェネレーター
			for (let i = 0; i < API_generatorsData["items"].length; i++)
			{
				var	generator = new Generator();
				generator.id = Number(API_generatorsData["items"][i].id);
				generator.available = API_generatorsData["items"][i].available;
				generator.availableSushiCount = Number(API_generatorsData["items"][i].availableSushiCount);	
				generator.description =  API_generatorsData["items"][i].description;
				generator.name = API_generatorsData["items"][i].name;
				generator.posession = Number(API_generatorsData["items"][i].posession);
				generator.power = Number(API_generatorsData["items"][i].power);
				generator.basePrice = Number(API_generatorsData["items"][i].basePrice);
				generator.nextPrice = Number(API_generatorsData["items"][i].nextPrice);
				generator.priceScalingFactor = Number(API_generatorsData["items"][i].priceScalingFactor);
				for (let s = 0; s < main.upgrades.length; s++)
				{
					if(main.upgrades[s].targetGeneratorMstId === null)
						continue;
					
					if(generator.id == main.upgrades[s].targetGeneratorMstId)
						generator.upgrades.push(main.upgrades[s]);
				}
				generator.CalculateSps();
				main.generators.push(generator);
			}
			main.GetGeneratorNotification();
		
			//////////////////////////////////////////////////////////
			//寿司ショップ
			for (let i = 0; i < API_sushiShopData["items"].length; i++)
			{
				var	sushiShop = new SushiShop();
				sushiShop.id = Number(API_sushiShopData["items"][i].id);
				sushiShop.name = API_sushiShopData["items"][i].name;
				sushiShop.amount = Number(API_sushiShopData["items"][i].amount);	
				sushiShop.price =  Number(API_sushiShopData["items"][i].price);
				main.sushiShops.push(sushiShop);
			}
		
			//////////////////////////////////////////////////////////
			//金寿司ショップ
			for (let i = 0; i < API_goldenSushiShopData["items"].length; i++)
			{
				var	goldenSushiShop = new GoldenSushiShop();
				goldenSushiShop.id = Number(API_goldenSushiShopData["items"][i].id);
				goldenSushiShop.name = API_goldenSushiShopData["items"][i].name;
				goldenSushiShop.amount = Number(API_goldenSushiShopData["items"][i].amount);	
				goldenSushiShop.price =  Number(API_goldenSushiShopData["items"][i].price);
				main.goldenSushiShops.push(goldenSushiShop);
			}
		
			//////////////////////////////////////////////////////////
			//Skinショップ
			for (let i = 0; i < API_skinShopData["items"].length; i++)
			{
				var	skinShop = new SkinShop();
				skinShop.id = Number(API_skinShopData["items"][i].id);
				skinShop.name = API_skinShopData["items"][i].name;
				skinShop.description = API_skinShopData["items"][i].description;
				skinShop.priceGolden = Number(API_skinShopData["items"][i].priceGolden);	
				skinShop.price =  Number(API_skinShopData["items"][i].price);
				skinShop.posession = API_skinShopData["items"][i].posession;
				main.skinShops.push(skinShop);
			}
		
			//////////////////////////////////////////////////////////
			//Robotショップ
			for (let i = 0; i < API_robotShopData["items"].length; i++)
			{
				var	robot = new RobotShop();
				robot.id = API_robotShopData["items"][i].id;
				robot.name = API_robotShopData["items"][i].name;
				robot.description = API_robotShopData["items"][i].description;
				robot.priceGolden = Number(API_robotShopData["items"][i].priceGolden);
				robot.posession = API_robotShopData["items"][i].posession;
				main.robotShops.push(robot);
			}
		
			//////////////////////////////////////////////////////////
			//アチーブメント
			for (let i = 0; i < API_achievementData["items"].length; i++)
			{
				var	achievement = new Achievement();
				achievement.id = Number(API_achievementData["items"][i].id);		
				achievement.name = API_achievementData["items"][i].name;
				achievement.description = API_achievementData["items"][i].description;
				achievement.image = API_achievementData["items"][i].imageName;
				achievement.conditionType = Number(API_achievementData["items"][i].conditionType);	
				achievement.conditionTargetMstId = Number(API_achievementData["items"][i].conditionTargetMstId);	
				achievement.conditionThreshold = API_achievementData["items"][i].conditionThreshold;
				achievement.completed = API_achievementData["items"][i].completed;
				main.achievements.push(achievement);
			}
		
			//////////////////////////////////////////////////////////
			//ペンディング
			for (let i = 0; i < API_pendingData["items"].length; i++)
			{
				var	pending = new Pending();
				pending.id = API_pendingData["items"][i].id;
				pending.amount = Number(API_pendingData["items"][i].amount);
				main.pendings.push(pending);
			}
		/*
			//////////////////////////////////////////////////////////
			//リファラル
			main.totalReferralCount = API_referralData["totalReferralCount"];
			main.referralCode = API_referralData["referralCode"];
			for (let i = 0; i < API_referralData["rewards"].length; i++)
			{
				var	reward = new Rewards();
				reward.id = API_referralData["rewards"][i].id;
				reward.invitationCount = Number(API_pendingData["items"][i].invitationCount);
				reward.sushiAmount = Number(API_pendingData["items"][i].sushiAmount);
				reward.received = API_pendingData["items"][i]received;
				main.rewards.push(reward);
			}
		*/
		
			//////////////////////////////////////////////////////////
			//イニシャライズ
			if (createjs.Touch.isSupported())
				createjs.Touch.enable(stage);
			 
			stage.enableMouseOver(20); 
			main.CalculateGeneratorCost();	//ジェネレータの価格の更新
			main.RebuildGenerator();		//ジェネレータ一覧の更新
			main.CalculateGains();			//SushiPSの計算
			main.RebuildStore();			//ショップの一覧の更新
			main.InitBGScroll();			//背景のイニシャライズ
			main.Debug_Init();				//デバッグのイニシャライズ
			
			main.SetSkin();					//スキンの設定
			//main.BGScroll();				//背景の更新
			main.Debug_Memory();			//デバッグ更新
			main.SushiDisplayUdates();		//所持寿司の表示更新
			this.GeneratorPanelMC.Create();
			this.UpgradePanelMC.Create();
			//this.AchievementPanelMC.Create();
			createjs.Ticker.addEventListener("tick", main.MainTick.bind(main));	
			this.LodingMC.visible = false;
			
			hiddenLoadingScreen();
			
			main.CheckPending();			//ペンディングの表示
		}
		
		if(API_userData !== undefined)
			this.Run();
		
		//debug
		//main.SetSkin();	
		//main.InitBGScroll();
		//this.LodingMC.visible = false;
		//hiddenLoadingScreen();
	}

	// actions tween:
	this.timeline.addTween(cjs.Tween.get(this).call(this.frame_0).wait(1));

	// Game
	this.instance = new lib.ContainerMC();
	this.instance.setTransform(-641,-303.85);

	this.SushiEffectMC = new lib.SushiEffectMC();
	this.SushiEffectMC.name = "SushiEffectMC";
	this.SushiEffectMC.setTransform(-386.2,-187.3);

	this.instance_1 = new lib.DispNumMC();
	this.instance_1.setTransform(-473.75,-68.25);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.instance_1},{t:this.SushiEffectMC},{t:this.instance}]}).wait(1));

	// Message
	this.MessageMC = new lib.MessageMC();
	this.MessageMC.name = "MessageMC";
	this.MessageMC.setTransform(-2536.45,2052.1,1,1,0,0,0,562.5,103);

	this.NotificationMC = new lib.NotificationMC();
	this.NotificationMC.name = "NotificationMC";
	this.NotificationMC.setTransform(-3098.95,2207.2);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.NotificationMC},{t:this.MessageMC}]}).wait(1));

	// Loding
	this.LodingMC = new lib.LodingMC();
	this.LodingMC.name = "LodingMC";

	this.timeline.addTween(cjs.Tween.get(this.LodingMC).wait(1));

	// Mask3
	this.Mask3MC = new lib.MaskMC();
	this.Mask3MC.name = "Mask3MC";
	this.Mask3MC.setTransform(563,1218,50.0005,50.0005,0,0,0,50,50);

	this.timeline.addTween(cjs.Tween.get(this.Mask3MC).wait(1));

	// Mask2
	this.Mask2MC = new lib.MaskMC();
	this.Mask2MC.name = "Mask2MC";
	this.Mask2MC.setTransform(563,1218,50.0005,50.0005,0,0,0,50,50);

	this.timeline.addTween(cjs.Tween.get(this.Mask2MC).wait(1));

	// Desciption
	this.PendingDesciptionMC = new lib.PendingDesciptionMC();
	this.PendingDesciptionMC.name = "PendingDesciptionMC";
	this.PendingDesciptionMC.setTransform(-26.4,-1840.45,1,1,0,0,0,521,444.5);

	this.ConfigDesciptionMC = new lib.ConfigDesciptionMC();
	this.ConfigDesciptionMC.name = "ConfigDesciptionMC";
	this.ConfigDesciptionMC.setTransform(1672.4,-1819.4,1,1,0,0,0,521,595.5);

	this.InviteRewardDesciptionMC = new lib.InviteRewardDesciptionMC();
	this.InviteRewardDesciptionMC.name = "InviteRewardDesciptionMC";
	this.InviteRewardDesciptionMC.setTransform(-2504.95,-1852.45,1,1,0,0,0,521,492.5);

	this.InviteDesciptionMC = new lib.InviteDesciptionMC();
	this.InviteDesciptionMC.name = "InviteDesciptionMC";
	this.InviteDesciptionMC.setTransform(-1405.2,-1418.35,1,1,0,0,0,526.5,934.5);

	this.AchievementDesciptionMC = new lib.AchievementDesciptionMC();
	this.AchievementDesciptionMC.name = "AchievementDesciptionMC";
	this.AchievementDesciptionMC.setTransform(-2536.45,1594.3,1,1,0,0,0,562.5,240);

	this.ShopDesciptionMC = new lib.ShopDesciptionMC();
	this.ShopDesciptionMC.name = "ShopDesciptionMC";
	this.ShopDesciptionMC.setTransform(-1409.7,1330.2,1,1,0,0,0,522,572.5);

	this.UpgradeDesciptionMC = new lib.UpgradeDesciptionMC();
	this.UpgradeDesciptionMC.name = "UpgradeDesciptionMC";
	this.UpgradeDesciptionMC.setTransform(-1409.7,185.2,1,1,0,0,0,522,572.5);

	this.GeneratorDesciptionMC = new lib.GeneratorDesciptionMC();
	this.GeneratorDesciptionMC.name = "GeneratorDesciptionMC";
	this.GeneratorDesciptionMC.setTransform(-2453.7,185.2,1,1,0,0,0,522,572.5);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.GeneratorDesciptionMC},{t:this.UpgradeDesciptionMC},{t:this.ShopDesciptionMC},{t:this.AchievementDesciptionMC},{t:this.InviteDesciptionMC},{t:this.InviteRewardDesciptionMC},{t:this.ConfigDesciptionMC},{t:this.PendingDesciptionMC}]}).wait(1));

	// Mask
	this.MaskMC = new lib.MaskMC();
	this.MaskMC.name = "MaskMC";
	this.MaskMC.setTransform(563,1218,50.0005,50.0005,0,0,0,50,50);

	this.timeline.addTween(cjs.Tween.get(this.MaskMC).wait(1));

	// Menu
	this.HeaderMC = new lib.HeaderMC();
	this.HeaderMC.name = "HeaderMC";

	this.FooterMC = new lib.FooterMC();
	this.FooterMC.name = "FooterMC";
	this.FooterMC.setTransform(0,2436,1,1,0,0,0,0,251);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.FooterMC},{t:this.HeaderMC}]}).wait(1));

	// Panel
	this.DebugPanelMC = new lib.DebugPanelMC();
	this.DebugPanelMC.name = "DebugPanelMC";
	this.DebugPanelMC.setTransform(2368.2,3588,1,1,0,0,0,0,913);

	this.ShopPanelMC = new lib.ShopPanelMC();
	this.ShopPanelMC.name = "ShopPanelMC";
	this.ShopPanelMC.setTransform(-286.4,3588,1,1,0,0,0,2,913);

	this.AchievementPanelMC = new lib.AchievementPanelMC();
	this.AchievementPanelMC.name = "AchievementPanelMC";
	this.AchievementPanelMC.setTransform(972.55,3588,1,1,0,0,0,-0.8,913);

	this.UpgradePanelMC = new lib.UpgradePanelMC();
	this.UpgradePanelMC.name = "UpgradePanelMC";
	this.UpgradePanelMC.setTransform(-1790.7,3588,1,1,0,0,0,0,913);

	this.GeneratorPanelMC = new lib.GeneratorPanelMC();
	this.GeneratorPanelMC.name = "GeneratorPanelMC";
	this.GeneratorPanelMC.setTransform(-3098.95,3588,1,1,0,0,0,0,913);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.GeneratorPanelMC},{t:this.UpgradePanelMC},{t:this.AchievementPanelMC},{t:this.ShopPanelMC},{t:this.DebugPanelMC}]}).wait(1));

	// Sushi
	this.SushiMC = new lib.SushiMC();
	this.SushiMC.name = "SushiMC";
	this.SushiMC.setTransform(563,1218,1,1,0,0,0,500,300);

	this.timeline.addTween(cjs.Tween.get(this.SushiMC).wait(1));

	// BG
	this.UpperBGMC = new lib.UpperBGMC();
	this.UpperBGMC.name = "UpperBGMC";

	this.UnderBGMC = new lib.UnderBGMC();
	this.UnderBGMC.name = "UnderBGMC";
	this.UnderBGMC.setTransform(0,2436,1,1,0,0,0,0,509);

	this.BgMC = new lib.bgMC();
	this.BgMC.name = "BgMC";

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.BgMC},{t:this.UnderBGMC},{t:this.UpperBGMC}]}).wait(1));

	this._renderFirstFrame();

}).prototype = p = new lib.AnMovieClip();
p.nominalBounds = new cjs.Rectangle(-2636.9,-1241.9,6132.6,9957.6);
// library properties:
lib.properties = {
	id: '969C0F3DFF839440AC4059700CCE57F9',
	width: 1125,
	height: 2436,
	fps: 30,
	color: "#FF0000",
	opacity: 1.00,
	manifest: [
		{src:"images/index_atlas_1.png", id:"index_atlas_1"}
	],
	preloads: []
};



// bootstrap callback support:

(lib.Stage = function(canvas) {
	createjs.Stage.call(this, canvas);
}).prototype = p = new createjs.Stage();

p.setAutoPlay = function(autoPlay) {
	this.tickEnabled = autoPlay;
}
p.play = function() { this.tickEnabled = true; this.getChildAt(0).gotoAndPlay(this.getTimelinePosition()) }
p.stop = function(ms) { if(ms) this.seek(ms); this.tickEnabled = false; }
p.seek = function(ms) { this.tickEnabled = true; this.getChildAt(0).gotoAndStop(lib.properties.fps * ms / 1000); }
p.getDuration = function() { return this.getChildAt(0).totalFrames / lib.properties.fps * 1000; }

p.getTimelinePosition = function() { return this.getChildAt(0).currentFrame / lib.properties.fps * 1000; }

an.bootcompsLoaded = an.bootcompsLoaded || [];
if(!an.bootstrapListeners) {
	an.bootstrapListeners=[];
}

an.bootstrapCallback=function(fnCallback) {
	an.bootstrapListeners.push(fnCallback);
	if(an.bootcompsLoaded.length > 0) {
		for(var i=0; i<an.bootcompsLoaded.length; ++i) {
			fnCallback(an.bootcompsLoaded[i]);
		}
	}
};

an.compositions = an.compositions || {};
an.compositions['969C0F3DFF839440AC4059700CCE57F9'] = {
	getStage: function() { return exportRoot.stage; },
	getLibrary: function() { return lib; },
	getSpriteSheet: function() { return ss; },
	getImages: function() { return img; }
};

an.compositionLoaded = function(id) {
	an.bootcompsLoaded.push(id);
	for(var j=0; j<an.bootstrapListeners.length; j++) {
		an.bootstrapListeners[j](id);
	}
}

an.getComposition = function(id) {
	return an.compositions[id];
}


an.makeResponsive = function(isResp, respDim, isScale, scaleType, domContainers) {		
	var lastW, lastH, lastS=1;		
	window.addEventListener('resize', resizeCanvas);		
	resizeCanvas();		
	function resizeCanvas() {			
		var w = lib.properties.width, h = lib.properties.height;			
		var iw = window.innerWidth, ih=window.innerHeight;			
		var pRatio = window.devicePixelRatio || 1, xRatio=iw/w, yRatio=ih/h, sRatio=1;			
		if(isResp) {                
			if((respDim=='width'&&lastW==iw) || (respDim=='height'&&lastH==ih)) {                    
				sRatio = lastS;                
			}				
			else if(!isScale) {					
				if(iw<w || ih<h)						
					sRatio = Math.min(xRatio, yRatio);				
			}				
			else if(scaleType==1) {					
				sRatio = Math.min(xRatio, yRatio);				
			}				
			else if(scaleType==2) {					
				sRatio = Math.max(xRatio, yRatio);				
			}			
		}
		domContainers[0].width = w * pRatio * sRatio;			
		domContainers[0].height = h * pRatio * sRatio;
		domContainers.forEach(function(container) {				
			container.style.width = w * sRatio + 'px';				
			container.style.height = h * sRatio + 'px';			
		});
		stage.scaleX = pRatio*sRatio;			
		stage.scaleY = pRatio*sRatio;
		lastW = iw; lastH = ih; lastS = sRatio;            
		stage.tickOnUpdate = false;            
		stage.update();            
		stage.tickOnUpdate = true;		
	}
}
an.handleSoundStreamOnTick = function(event) {
	if(!event.paused){
		var stageChild = stage.getChildAt(0);
		if(!stageChild.paused || stageChild.ignorePause){
			stageChild.syncStreamSounds();
		}
	}
}
an.handleFilterCache = function(event) {
	if(!event.paused){
		var target = event.target;
		if(target){
			if(target.filterCacheList){
				for(var index = 0; index < target.filterCacheList.length ; index++){
					var cacheInst = target.filterCacheList[index];
					if((cacheInst.startFrame <= target.currentFrame) && (target.currentFrame <= cacheInst.endFrame)){
						cacheInst.instance.cache(cacheInst.x, cacheInst.y, cacheInst.w, cacheInst.h);
					}
				}
			}
		}
	}
}


})(createjs = createjs||{}, AdobeAn = AdobeAn||{});
var createjs, AdobeAn;